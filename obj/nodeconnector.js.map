{"version":3,"sources":["nodeconnector.ts"],"names":[],"mappings":";;AAKA,IAAM,SAAS,GAAG,4BAA4B,CAAC;AAE/C;IAQI,uBAAY,EAAS,EAAE,IAAU;QAC7B,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC;QACb,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC;QACb,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QAEjB,IAAI,CAAC,IAAI,GAAG,QAAQ,CAAC,eAAe,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC;QACxD,IAAI,CAAC,OAAO,EAAE,CAAC;IACnB,CAAC;IAAA,CAAC;IAEF,+BAAO,GAAP;QACI,IAAI,EAAE,GAAG;YACD,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC;YAC5C,CAAC,EAAE,IAAI,CAAC,EAAE,CAAC,CAAC;SACf,EACD,EAAE,GAAG;YACD,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC;YAC7C,CAAC,EAAE,IAAI,CAAC,EAAE,CAAC,CAAC;SACf,CAAC;QACN,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,GAAG,EAAE,GAAG,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,GAAG,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,IAAI,GAAG,EAAE,CAAC,CAAC,GAAG,GAAG,GAAG,EAAE,CAAC,CAAC,GAAG,GAAG,GAAG,EAAE,CAAC,CAAC,GAAG,GAAG,GAAG,EAAE,CAAC,CAAC,GAAG,GAAG,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,GAAG,GAAG,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IAC5J,CAAC;IAAA,CAAC;IAEF,8BAAM,GAAN;QACI,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;YACZ,IAAI,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;YACnD,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;gBACX,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;YAC9C,CAAC;YACD,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACrB,CAAC;QACD,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;YACZ,IAAI,CAAC,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;QACpC,CAAC;QACD,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;YACZ,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC;YACnB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACrB,CAAC;IACL,CAAC;IAAA,CAAC;IAEF,oCAAY,GAAZ,UAAa,KAAK;QACd,IAAI,CAAC,EAAE,GAAG,KAAK,CAAC;QAChB,IAAI,CAAC,OAAO,EAAE,CAAC;IACnB,CAAC;IACL,oBAAC;AAAD,CAnDA,AAmDC,IAAA;AAnDY,sCAAa","file":"nodeconnector.js","sourcesContent":["import {Node} from \"./node\";\r\nimport {Point} from \"./point\";\r\nimport {NodeValue} from \"./nodevalue\";\r\n\r\n\r\nconst namespace = \"http://www.w3.org/2000/svg\";\r\n\r\nexport class NodeConnector {\r\n\r\n    public end1: Node;\r\n    public end2: NodeValue;\r\n    public sp: Point;\r\n    public ep: Point;\r\n    public path: SVGPathElement;\r\n\r\n    constructor(sp: Point, node: Node) {\r\n        this.sp = sp;\r\n        this.ep = sp;\r\n        this.end1 = node;\r\n        this.end2 = null;\r\n\r\n        this.path = document.createElementNS(namespace, \"path\");\r\n        this.setPath();\r\n    };\r\n\r\n    setPath() {\r\n        let c1 = {\r\n                x: ((this.ep.x - this.sp.x) / 3) + this.sp.x,\r\n                y: this.sp.y\r\n            },\r\n            c2 = {\r\n                x: -((this.ep.x - this.sp.x) / 3) + this.ep.x,\r\n                y: this.ep.y\r\n            };\r\n        this.path.setAttribute(\"d\", \"M\" + this.sp.x + \",\" + this.sp.y + \" C\" + c1.x + \",\" + c1.y + \" \" + c2.x + \",\" + c2.y + \" \" + this.ep.x + \",\" + this.ep.y);\r\n    };\r\n\r\n    remove() {\r\n        if (this.end1) {\r\n            var ind = this.end1.outputConnectors.indexOf(this);\r\n            if (ind >= 0) {\r\n                this.end1.outputConnectors.splice(ind, 1);\r\n            }\r\n            this.end1 = null;\r\n        }\r\n        if (this.end2) {\r\n            this.end2.inputConnector = null;\r\n        }\r\n        if (this.path) {\r\n            this.path.remove();\r\n            this.path = null;\r\n        }\r\n    };\r\n\r\n    moveEndPoint(point) {\r\n        this.ep = point;\r\n        this.setPath();\r\n    }\r\n}"]}