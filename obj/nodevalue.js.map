{"version":3,"sources":["nodevalue.ts"],"names":[],"mappings":"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","file":"nodevalue.js","sourcesContent":["import {Node} from \"./node\";\r\nimport {Point} from \"./point\";\r\nimport {NodeConnector} from \"./nodeconnector\";\r\nimport {ICodeNodesValueSchema} from \"./interfaces/ICodeNodesValueSchema\";\r\n\r\nconst namespace = \"http://www.w3.org/2000/svg\";\r\nconst ROW_HEIGHT = 38;\r\n\r\nexport class NodeValue {\r\n    public parentNode: Node;\r\n    private dot : SVGCircleElement;\r\n    private gOffset: Point;\r\n    public inputConnector: NodeConnector;\r\n    public __internalGetValue: Function;\r\n    public __internalSetValue: Function;\r\n    private svgEntity: SVGGElement;\r\n    public options: ICodeNodesValueSchema;\r\n\r\n\r\n\r\n    constructor (opts: ICodeNodesValueSchema, node: Node){\r\n        this.options = opts;\r\n        this.inputConnector = null;\r\n\t\tthis.__internalGetValue = null;\r\n        this.svgEntity = null;\r\n        this.gOffset = null;\r\n        this.parentNode = node;\r\n    }\r\n\r\n    render(parent: SVGElement, position: number) {\r\n        let self = this;\r\n        if (!this.svgEntity) {\r\n            let ent = document.createElementNS(namespace, \"g\");\r\n            this.gOffset = {\r\n                x: 1,\r\n                y: ((position * ROW_HEIGHT) + 1)\r\n            };\r\n            ent.setAttribute(\"transform\", \"translate(\" + this.gOffset.x + \", \" + this.gOffset.y + \")\");\r\n            ent.setAttribute(\"class\", \"row\");\r\n            if (this.options.mode === \"edit\") {\r\n                let rect = document.createElementNS(namespace, \"rect\"),\r\n                    fo = document.createElementNS(namespace, \"foreignObject\"),\r\n                    name = document.createElementNS(namespace, \"text\"),\r\n                    div = document.createElementNS(\"http://www.w3.org/1999/xhtml\", \"div\");\r\n                name.textContent = this.options.name;\r\n                name.setAttribute(\"x\", \"10\");\r\n                name.setAttribute(\"y\", \"6\");\r\n                rect.setAttribute(\"x\", \"1\");\r\n                div.setAttribute(\"xmlns\", \"http://www.w3.org/1999/xhtml\");\r\n                let input = document.createElement(\"input\");\r\n                switch(this.options.type) {\r\n                    case \"range\":\r\n                        input.min = this.options[0];\r\n                        input.max = this.options[1];\r\n                    case \"text\":\r\n                    case \"number\":\r\n                    case \"email\":\r\n                   case \"date\":\r\n                   case \"color\":\r\n                        this.__internalGetValue = function () {\r\n                            return input.value;\r\n                        };\r\n                        this.__internalSetValue = function (v: string) {\r\n                            input.value = v;\r\n                        };\r\n                        input.type = this.options.type;\r\n                        div.appendChild(input);\r\n                        break;\r\n                   case \"boolean\":\r\n                        this.__internalGetValue = function () {\r\n                            return input.checked;\r\n                        };\r\n                        this.__internalSetValue = function (v: boolean) {\r\n                            input.checked = v;\r\n                        };\r\n                        input.type = \"checkbox\";\r\n                        div.appendChild(input);\r\n                        break;\r\n                    case \"select\":\r\n                        let div_select = document.createElement(\"select\");\r\n                        this.options.options.forEach( op =>{\r\n                            let div_option = document.createElement(\"option\");\r\n                            div_option.textContent =op.show.toString();\r\n                            div_option.setAttribute(\"value\", op.save);\r\n                            div_select.appendChild(div_option);\r\n                        });\r\n                        this.__internalGetValue = function () {\r\n                            return div_select.value;\r\n                        };\r\n                        this.__internalSetValue = function (v: string) {\r\n                            input.value = v;\r\n                        };\r\n                        div.appendChild(div_select);\r\n                        break;\r\n                    case \"popup\":\r\n                        let btn = document.createElement(\"button\");\r\n                        btn.classList.add(\"popup-btn\");\r\n                        btn.textContent = \"*Edit\";\r\n                        let popup = document.createElement(\"div\");\r\n                        popup.classList.add(\"codenodes-popup\");\r\n                        let popupLayer = document.createElement(\"div\");\r\n                        popupLayer.classList.add(\"layer\");\r\n                        let popupContent = document.createElement(\"div\");\r\n                        popupContent.classList.add(\"content\");\r\n                        let popupWraper = document.createElement(\"div\");\r\n                        popupWraper.classList.add(\"wraper\");\r\n                        let popupTextArea = document.createElement(\"div\");\r\n                        popupTextArea.classList.add(\"text\");\r\n                        popupTextArea.setAttribute(\"contenteditable\", \"true\");\r\n                        let popupOK = document.createElement(\"div\");\r\n                        popupOK.classList.add(\"ok\");\r\n                        btn.addEventListener(\"click\", function () {\r\n                            popup.classList.add(\"visible\");\r\n                        });\r\n                        let fnClose = function () {\r\n                            popup.classList.remove(\"visible\");\r\n                        }\r\n\r\n                        popup.appendChild(popupLayer);\r\n                        popup.appendChild(popupWraper);\r\n                        popupWraper.appendChild(popupContent);\r\n                        popupContent.appendChild(popupTextArea);\r\n                        popupContent.appendChild(popupOK);\r\n                        \r\n                        popupOK.addEventListener(\"click\", fnClose);\r\n                        \r\n                        this.__internalGetValue = function () {\r\n                            return popupTextArea.textContent;\r\n                        };\r\n                        this.__internalSetValue = function (v: string) {\r\n                            popupTextArea.textContent = v;\r\n                        };\r\n                        document.body.appendChild(popup);\r\n                        div.appendChild(btn);\r\n                        break;\r\n                }\r\n                fo.appendChild(div);\r\n                fo.setAttribute(\"transform\", \"translate(0,13)\");\r\n                //ent.appendChild(rect);\r\n                ent.appendChild(name);\r\n                ent.appendChild(fo);\r\n            }\r\n\r\n            if (this.options.mode === \"in\") {\r\n                let name = document.createElementNS(namespace, \"text\"),\r\n                    type = document.createElementNS(namespace, \"text\"),\r\n                    dot = document.createElementNS(namespace, \"circle\");\r\n\r\n                dot.setAttribute(\"cx\", \"-1\");\r\n                dot.setAttribute(\"cy\", \"16\");\r\n                dot.setAttribute(\"r\", \"4\");\r\n                dot.setAttribute(\"class\", \"dot\");\r\n                dot.addEventListener(\"click\", function(evt) {\r\n                    if (self.inputConnector) {\r\n                        self.inputConnector.remove();\r\n                    }\r\n                    evt.stopPropagation();\r\n                });\r\n                dot[\"parentValue\"] = this;\r\n                name.textContent = this.options.name;\r\n                name.setAttribute(\"x\", \"10\");\r\n                name.setAttribute(\"y\", \"8\");\r\n                if (this.options.multiple) {\r\n                    type.textContent = \"[\" + this.options.type + \"]\";\r\n                } else {\r\n                    type.textContent = this.options.type;\r\n                }\r\n\t\t\t\ttype.classList.add(\"value-type\");\r\n                type.setAttribute(\"x\", \"10\");\r\n                type.setAttribute(\"y\", \"25\");\r\n\t\t\t\tthis.__internalGetValue = function () {\r\n\t\t\t\t\tif (self.inputConnector) {\r\n                        let built = self.inputConnector.end1.build();\r\n                        if (self.options.multiple && !self.inputConnector.end1.options.type.outputMultiple) {\r\n                            return [built];\r\n                        } else {\r\n\t\t\t\t\t\t    return built;\r\n                        }\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn undefined\r\n\t\t\t\t};\r\n\r\n                ent.appendChild(name);\r\n                ent.appendChild(type);\r\n                ent.appendChild(dot);\r\n            }\r\n            this.svgEntity = ent;\r\n            parent.appendChild(ent);\r\n        }\r\n    };\r\n\r\n    getSerializedValue () {\r\n        if (this.options.mode === \"edit\" && this.__internalGetValue instanceof Function) {\r\n            return this.__internalGetValue();\r\n        }\r\n        return null;\r\n    }\r\n\r\n    getDotPosition(){\r\n        return {\r\n            x: this.parentNode.position.x + this.gOffset.x - 1,\r\n            y: this.parentNode.position.y + this.gOffset.y + 16\r\n        };\r\n    };\r\n\r\n    updateConectorPosition() {\r\n        if (this.inputConnector) {\r\n            this.inputConnector.ep = this.getDotPosition();\r\n            this.inputConnector.setPath();\r\n        }\r\n    }\r\n\r\n    getValue() {\r\n        if (this.__internalGetValue instanceof Function) {\r\n\t\t\treturn this.__internalGetValue();\r\n\t\t}\r\n\t\treturn null;\r\n    }\r\n}\r\n"]}