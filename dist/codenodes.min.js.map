{"version":3,"sources":["codenodes.min.js"],"names":["f","exports","module","define","amd","window","global","self","this","codenodes","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","SvgPanZoom","./svg-pan-zoom.js","2","SvgUtils","enable","instance","defs","svg","querySelector","document","createElementNS","svgNS","appendChild","style","setAttribute","textContent","zoomGroup","width","height","_createZoomIn","_createZoomReset","_createZoomOut","controlIcons","zoomIn","addEventListener","getPublicInstance","zoomInBackground","zoomInShape","resetPanZoomControl","reset","resetPanZoomControlBackground","resetPanZoomControlShape1","resetPanZoomControlShape2","zoomOut","zoomOutBackground","zoomOutShape","disable","parentNode","removeChild","./svg-utilities","3","Utils","ShadowViewport","viewport","options","init","prototype","originalState","zoom","x","y","activeState","updateCTMCached","proxy","updateCTM","requestAnimationFrame","createRequestAnimationFrame","refreshRate","viewBox","cacheViewBox","newCTM","processCTM","setCTM","svgViewBox","getAttribute","viewBoxValues","split","filter","v","map","parseFloat","Math","min","updateCTMOnNextFrame","removeAttribute","simpleViewBoxCache","bBox","getBBox","getViewBox","extend","getCTM","fit","contain","newScale","max","d","center","offsetX","offsetY","getOriginalState","getState","getZoom","getRelativeZoom","computeRelativeZoom","scale","getPan","safeCTM","createSVGMatrix","b","c","willZoom","isZoomDifferent","willPan","isPanDifferent","beforeZoom","updateCache","onZoom","preventPan","beforePan","preventPanX","preventPanY","isObject","isNumber","onPan","pendingUpdate","ctm","onUpdatedCTM","./utilities","4","Wheel","ControlIcons","optionsDefaults","viewportSelector","panEnabled","controlIconsEnabled","zoomEnabled","dblClickZoomEnabled","mouseWheelZoomEnabled","preventMouseEventsDefault","zoomScaleSensitivity","minZoom","maxZoom","customEventsHandler","eventsListenerElement","that","setupSvgAttributes","state","boundingClientRectNormalized","getBoundingClientRectNormalized","getOrCreateViewport","oldScale","oldPoint","newPoint","point","publicInstance","setBeforeZoom","setOnZoom","setBeforePan","setOnPan","setOnUpdatedCTM","lastMouseWheelEventTime","Date","now","setupHandlers","prevEvt","eventListeners","mousedown","evt","target","HTMLInputElement","HTMLSelectElement","HTMLButtonElement","result","handleMouseDown","touchstart","mouseup","handleMouseUp","touchend","mousemove","handleMouseMove","touchmove","mouseleave","touchleave","touchcancel","svgElement","haltEventListeners","hasOwnProperty","event","enableMouseWheelZoom","wheelListener","handleMouseWheel","on","disableMouseWheelZoom","off","preventDefault","returnValue","delta","deltaY","timeDelta","divider","deltaMode","wheelDelta","abs","log","inversedScreenCTM","getScreenCTM","inverse","relativeMousePoint","getEventPoint","matrixTransform","pow","zoomAtPoint","zoomScale","zoomAbsolute","oldCTM","relativePoint","modifier","translate","multiply","absolute","getSvgCenterPoint","publicZoom","computeFromRelativeZoom","publicZoomAtPoint","getType","createSVGPoint","resetZoom","resetPan","pan","handleDblClick","indexOf","zoomFactor","shiftKey","mouseAndTouchNormalize","isDblClick","firstEventCTM","stateOrigin","viewportCTM","updateBBox","panBy","resize","disableControlIcons","enableControlIcons","destroy","removeEventListener","instancesStore","pi","enablePan","disablePan","isPanEnabled","fn","enableZoom","disableZoom","isZoomEnabled","isControlIconsEnabled","enableDblClickZoom","disableDblClickZoom","isDblClickZoomEnabled","isMouseWheelZoomEnabled","setZoomScaleSensitivity","setMinZoom","setMaxZoom","zoomBy","zoomAtPointBy","getSizes","realZoom","elementOrSelector","getSvg","push","./control-icons","./shadow-viewport","./uniwheel","5","_browser","documentMode","xmlNS","xmlnsNS","xlinkNS","evNS","clientWidth","clientHeight","getBoundingClientRect","selector","isElement","childNodes","Array","slice","children","el","nodeName","viewportId","toISOString","replace","svgChildren","classNames","join","setAttributeNS","toLowerCase","internetExplorerRedisplayInterval","refreshDefsGlobal","throttle","allDefs","querySelectorAll","allDefsCount","thisDefs","insertBefore","element","matrix","transform","setTimeout","clientX","clientY","6","createCallback","callback","capture","originalEvent","srcElement","type","deltaX","delatZ","support","wheelDeltaX","detail","fns","getCallback","removeCallback","splice","_addWheelListener","elem","eventName","useCapture","cb","_addEventListener","prefix","_removeWheelListener","_removeEventListener","createElement","undefined","onmousewheel","7","requestTimeout","timeout","source","prop","HTMLElement","SVGElement","SVGSVGElement","nodeType","Object","toString","isNaN","isFinite","String","tagName","contentDocument","documentElement","getSVGDocument","context","apply","arguments","changedTouches","pageX","rect","left","pageY","top","timeStampDiff","timeStamp","touchesDistance","sqrt","getTime","func","wait","args","previous","later","leading","remaining","clearTimeout","trailing","floor","8","nodecanvas_1","CodeNodes","types","canvas","NodeCanvas","getSVG","render","addNode","name","builder","schema","clonable","clone","console","Interface","./nodecanvas","9","defineProperty","value","nodevalue_1","namespace","Node","title","clonefn","values","position","nRows","onmousedown","outputConnectors","forEach","NodeValue","mode","parent","g","rectDownHandler","Function","bind","classList","add","output","outputOffset","outputDownHandler","outputMousedown","outputType","closeBtn","close","remove","keys","k","move","con","sp","setPath","updateConectorPosition","build","built","valuesArr","propsOnBuild","p","onBuild","getValue","val","inputConnector","concat","onremove","./nodevalue","10","svgPanZoom","node_1","nodeconnector_1","paths","nodes","pt","draggingEntity","currentConnector","diff","cursorPoint","node","convertCoords","offset","mouseMoveHandler","p1","mouseUpHandler","mouseMoveConnectorHandler","moveEndPoint","mouseUpConnectorHandler","candidates","dot","pos","parentValue","getDotPosition","dist","sort","end2","end1","entity","parseInt","NodeConnector","path","stopPropagation","entPos","ind","zoomingSvg","clear","getTerminalNodes","./node","./nodeconnector","svg-pan-zoom","11","ep","c1","c2","12","__internalGetValue","svgEntity","gOffset","ent","fo","name_1","div","input_1","div_select_1","op","div_option","show","save","btn","popup_1","popupLayer","popupContent","popupWraper","popupTextArea_1","popupOK","body","name_2"],"mappings":"CAAA,SAAUA,GAAG,GAAoB,iBAAVC,SAAoC,oBAATC,OAAsBA,OAAOD,QAAQD,SAAS,GAAmB,mBAATG,QAAqBA,OAAOC,IAAKD,UAAUH,OAAO,EAA0B,oBAATK,OAAwBA,OAA+B,oBAATC,OAAwBA,OAA6B,oBAAPC,KAAsBA,KAAYC,MAAOC,UAAYT,MAAO,WAAqC,OAAO,SAAUU,EAAEC,EAAEC,EAAEC,GAAG,SAASC,EAAEC,EAAEC,GAAG,IAAIJ,EAAEG,GAAG,CAAC,IAAIJ,EAAEI,GAAG,CAAC,IAAIE,EAAkB,mBAATC,SAAqBA,QAAQ,IAAIF,GAAGC,EAAE,OAAOA,EAAEF,GAAE,GAAI,GAAGI,EAAE,OAAOA,EAAEJ,GAAE,GAAI,IAAIf,EAAE,IAAIoB,MAAM,uBAAuBL,EAAE,KAAK,MAAMf,EAAEqB,KAAK,mBAAmBrB,EAAE,IAAIsB,EAAEV,EAAEG,IAAId,YAAYU,EAAEI,GAAG,GAAGQ,KAAKD,EAAErB,QAAQ,SAASS,GAAG,IAAIE,EAAED,EAAEI,GAAG,GAAGL,GAAG,OAAOI,EAAEF,GAAIF,IAAIY,EAAEA,EAAErB,QAAQS,EAAEC,EAAEC,EAAEC,GAAG,OAAOD,EAAEG,GAAGd,QAAkD,IAAI,IAA1CkB,EAAkB,mBAATD,SAAqBA,QAAgBH,EAAE,EAAEA,EAAEF,EAAEW,OAAOT,IAAID,EAAED,EAAEE,IAAI,OAAOD,IAAKW,GAAG,SAASP,EAAQhB,EAAOD,GACx0B,IAAIyB,EAAaR,EAAQ,qBAEzBhB,EAAOD,QAAUyB,IAEdC,oBAAoB,IAAIC,GAAG,SAASV,EAAQhB,EAAOD,GACtD,IAAI4B,EAAWX,EAAQ,mBAEvBhB,EAAOD,SACL6B,OAAQ,SAASC,GAEf,IAAIC,EAAOD,EAASE,IAAIC,cAAc,QAQtC,GAPKF,IACHA,EAAOG,SAASC,gBAAgBP,EAASQ,MAAO,QAChDN,EAASE,IAAIK,YAAYN,KAIbA,EAAKE,cAAc,sCACnB,CACZ,IAAIK,EAAQJ,SAASC,gBAAgBP,EAASQ,MAAO,SACrDE,EAAMC,aAAa,KAAM,gCACzBD,EAAMC,aAAa,OAAQ,YAC3BD,EAAME,YAAc,+PACpBT,EAAKM,YAAYC,GAInB,IAAIG,EAAYP,SAASC,gBAAgBP,EAASQ,MAAO,KACzDK,EAAUF,aAAa,KAAM,yBAC7BE,EAAUF,aAAa,YAAa,cAAiBT,EAASY,MAAQ,IAAO,KAAQZ,EAASa,OAAS,IAAO,iBAC9GF,EAAUF,aAAa,QAAS,wBAGhCE,EAAUJ,YAAY9B,KAAKqC,cAAcd,IACzCW,EAAUJ,YAAY9B,KAAKsC,iBAAiBf,IAC5CW,EAAUJ,YAAY9B,KAAKuC,eAAehB,IAG1CA,EAASE,IAAIK,YAAYI,GAGzBX,EAASiB,aAAeN,GAG1BG,cAAe,SAASd,GACtB,IAAIkB,EAASd,SAASC,gBAAgBP,EAASQ,MAAO,KACtDY,EAAOT,aAAa,KAAM,wBAC1BS,EAAOT,aAAa,YAAa,kCACjCS,EAAOT,aAAa,QAAS,wBAC7BS,EAAOC,iBAAiB,QAAS,WAAYnB,EAASoB,oBAAoBF,WAAW,GACrFA,EAAOC,iBAAiB,aAAc,WAAYnB,EAASoB,oBAAoBF,WAAW,GAE1F,IAAIG,EAAmBjB,SAASC,gBAAgBP,EAASQ,MAAO,QAChEe,EAAiBZ,aAAa,IAAK,KACnCY,EAAiBZ,aAAa,IAAK,KACnCY,EAAiBZ,aAAa,QAAS,QACvCY,EAAiBZ,aAAa,SAAU,QACxCY,EAAiBZ,aAAa,QAAS,mCACvCS,EAAOX,YAAYc,GAEnB,IAAIC,EAAclB,SAASC,gBAAgBP,EAASQ,MAAO,QAK3D,OAJAgB,EAAYb,aAAa,IAAK,wXAC9Ba,EAAYb,aAAa,QAAS,gCAClCS,EAAOX,YAAYe,GAEZJ,GAGTH,iBAAkB,SAASf,GAEzB,IAAIuB,EAAsBnB,SAASC,gBAAgBP,EAASQ,MAAO,KACnEiB,EAAoBd,aAAa,KAAM,+BACvCc,EAAoBd,aAAa,YAAa,8BAC9Cc,EAAoBd,aAAa,QAAS,wBAC1Cc,EAAoBJ,iBAAiB,QAAS,WAAYnB,EAASoB,oBAAoBI,UAAU,GACjGD,EAAoBJ,iBAAiB,aAAc,WAAYnB,EAASoB,oBAAoBI,UAAU,GAEtG,IAAIC,EAAgCrB,SAASC,gBAAgBP,EAASQ,MAAO,QAC7EmB,EAA8BhB,aAAa,IAAK,KAChDgB,EAA8BhB,aAAa,IAAK,KAChDgB,EAA8BhB,aAAa,QAAS,OACpDgB,EAA8BhB,aAAa,SAAU,MACrDgB,EAA8BhB,aAAa,QAAS,mCACpDc,EAAoBhB,YAAYkB,GAEhC,IAAIC,EAA4BtB,SAASC,gBAAgBP,EAASQ,MAAO,QACzEoB,EAA0BjB,aAAa,IAAK,yLAC5CiB,EAA0BjB,aAAa,QAAS,gCAChDc,EAAoBhB,YAAYmB,GAEhC,IAAIC,EAA4BvB,SAASC,gBAAgBP,EAASQ,MAAO,QAKzE,OAJAqB,EAA0BlB,aAAa,IAAK,wzDAC5CkB,EAA0BlB,aAAa,QAAS,gCAChDc,EAAoBhB,YAAYoB,GAEzBJ,GAGTP,eAAgB,SAAShB,GAEvB,IAAI4B,EAAUxB,SAASC,gBAAgBP,EAASQ,MAAO,KACvDsB,EAAQnB,aAAa,KAAM,yBAC3BmB,EAAQnB,aAAa,YAAa,mCAClCmB,EAAQnB,aAAa,QAAS,wBAC9BmB,EAAQT,iBAAiB,QAAS,WAAYnB,EAASoB,oBAAoBQ,YAAY,GACvFA,EAAQT,iBAAiB,aAAc,WAAYnB,EAASoB,oBAAoBQ,YAAY,GAE5F,IAAIC,EAAoBzB,SAASC,gBAAgBP,EAASQ,MAAO,QACjEuB,EAAkBpB,aAAa,IAAK,KACpCoB,EAAkBpB,aAAa,IAAK,KACpCoB,EAAkBpB,aAAa,QAAS,QACxCoB,EAAkBpB,aAAa,SAAU,QACzCoB,EAAkBpB,aAAa,QAAS,mCACxCmB,EAAQrB,YAAYsB,GAEpB,IAAIC,EAAe1B,SAASC,gBAAgBP,EAASQ,MAAO,QAK5D,OAJAwB,EAAarB,aAAa,IAAK,sQAC/BqB,EAAarB,aAAa,QAAS,gCACnCmB,EAAQrB,YAAYuB,GAEbF,GAGTG,QAAS,SAAS/B,GACZA,EAASiB,eACXjB,EAASiB,aAAae,WAAWC,YAAYjC,EAASiB,cACtDjB,EAASiB,aAAe,UAK3BiB,kBAAkB,IAAIC,GAAG,SAAShD,EAAQhB,EAAOD,GACpD,IAAI4B,EAAWX,EAAQ,mBACnBiD,EAAQjD,EAAQ,eAGhBkD,EAAiB,SAASC,EAAUC,GACtC9D,KAAK+D,KAAKF,EAAUC,IAStBF,EAAeI,UAAUD,KAAO,SAASF,EAAUC,GAEjD9D,KAAK6D,SAAWA,EAChB7D,KAAK8D,QAAUA,EAGf9D,KAAKiE,eAAiBC,KAAM,EAAGC,EAAG,EAAGC,EAAG,GACxCpE,KAAKqE,aAAeH,KAAM,EAAGC,EAAG,EAAGC,EAAG,GAEtCpE,KAAKsE,gBAAkBX,EAAMY,MAAMvE,KAAKwE,UAAWxE,MAGnDA,KAAKyE,sBAAwBd,EAAMe,4BAA4B1E,KAAK8D,QAAQa,aAG5E3E,KAAK4E,SAAWT,EAAG,EAAGC,EAAG,EAAGjC,MAAO,EAAGC,OAAQ,GAC9CpC,KAAK6E,eAGL,IAAIC,EAAS9E,KAAK+E,aAGlB/E,KAAKgF,OAAOF,GAGZ9E,KAAKwE,aAOPZ,EAAeI,UAAUa,aAAe,WACtC,IAAII,EAAajF,KAAK8D,QAAQrC,IAAIyD,aAAa,WAE/C,GAAID,EAAY,CACd,IAAIE,EAAgBF,EAAWG,MAAM,UAAUC,OAAO,SAASC,GAAG,OAAOA,IAAIC,IAAIC,YAGjFxF,KAAK4E,QAAQT,EAAIgB,EAAc,GAC/BnF,KAAK4E,QAAQR,EAAIe,EAAc,GAC/BnF,KAAK4E,QAAQzC,MAAQgD,EAAc,GACnCnF,KAAK4E,QAAQxC,OAAS+C,EAAc,GAEpC,IAAIjB,EAAOuB,KAAKC,IAAI1F,KAAK8D,QAAQ3B,MAAQnC,KAAK4E,QAAQzC,MAAOnC,KAAK8D,QAAQ1B,OAASpC,KAAK4E,QAAQxC,QAGhGpC,KAAKqE,YAAYH,KAAOA,EACxBlE,KAAKqE,YAAYF,GAAKnE,KAAK8D,QAAQ3B,MAAQnC,KAAK4E,QAAQzC,MAAQ+B,GAAQ,EACxElE,KAAKqE,YAAYD,GAAKpE,KAAK8D,QAAQ1B,OAASpC,KAAK4E,QAAQxC,OAAS8B,GAAQ,EAG1ElE,KAAK2F,uBAEL3F,KAAK8D,QAAQrC,IAAImE,gBAAgB,gBAEjC5F,KAAK6F,sBAOTjC,EAAeI,UAAU6B,mBAAqB,WAC5C,IAAIC,EAAO9F,KAAK6D,SAASkC,UAEzB/F,KAAK4E,QAAQT,EAAI2B,EAAK3B,EACtBnE,KAAK4E,QAAQR,EAAI0B,EAAK1B,EACtBpE,KAAK4E,QAAQzC,MAAQ2D,EAAK3D,MAC1BnC,KAAK4E,QAAQxC,OAAS0D,EAAK1D,QAQ7BwB,EAAeI,UAAUgC,WAAa,WACpC,OAAOrC,EAAMsC,UAAWjG,KAAK4E,UAS/BhB,EAAeI,UAAUe,WAAa,WACpC,IAAID,EAAS9E,KAAKkG,SAElB,GAAIlG,KAAK8D,QAAQqC,KAAOnG,KAAK8D,QAAQsC,QAAS,CAC5C,IAAIC,EAEFA,EADErG,KAAK8D,QAAQqC,IACJV,KAAKC,IAAI1F,KAAK8D,QAAQ3B,MAAMnC,KAAK4E,QAAQzC,MAAOnC,KAAK8D,QAAQ1B,OAAOpC,KAAK4E,QAAQxC,QAEjFqD,KAAKa,IAAItG,KAAK8D,QAAQ3B,MAAMnC,KAAK4E,QAAQzC,MAAOnC,KAAK8D,QAAQ1B,OAAOpC,KAAK4E,QAAQxC,QAG9F0C,EAAOrE,EAAI4F,EACXvB,EAAOyB,EAAIF,EACXvB,EAAO5E,GAAKF,KAAK4E,QAAQT,EAAIkC,EAC7BvB,EAAOtF,GAAKQ,KAAK4E,QAAQR,EAAIiC,EAG/B,GAAIrG,KAAK8D,QAAQ0C,OAAQ,CACvB,IAAIC,EAAwF,IAA7EzG,KAAK8D,QAAQ3B,OAASnC,KAAK4E,QAAQzC,MAAyB,EAAjBnC,KAAK4E,QAAQT,GAASW,EAAOrE,GACnFiG,EAA0F,IAA/E1G,KAAK8D,QAAQ1B,QAAUpC,KAAK4E,QAAQxC,OAA0B,EAAjBpC,KAAK4E,QAAQR,GAASU,EAAOrE,GAEzFqE,EAAO5E,EAAIuG,EACX3B,EAAOtF,EAAIkH,EAQb,OAJA1G,KAAKiE,cAAcC,KAAOY,EAAOrE,EACjCT,KAAKiE,cAAcE,EAAIW,EAAO5E,EAC9BF,KAAKiE,cAAcG,EAAIU,EAAOtF,EAEvBsF,GAQTlB,EAAeI,UAAU2C,iBAAmB,WAC1C,OAAOhD,EAAMsC,UAAWjG,KAAKiE,gBAQ/BL,EAAeI,UAAU4C,SAAW,WAClC,OAAOjD,EAAMsC,UAAWjG,KAAKqE,cAQ/BT,EAAeI,UAAU6C,QAAU,WACjC,OAAO7G,KAAKqE,YAAYH,MAQ1BN,EAAeI,UAAU8C,gBAAkB,WACzC,OAAO9G,KAAKqE,YAAYH,KAAOlE,KAAKiE,cAAcC,MAQpDN,EAAeI,UAAU+C,oBAAsB,SAASC,GACtD,OAAOA,EAAQhH,KAAKiE,cAAcC,MAQpCN,EAAeI,UAAUiD,OAAS,WAChC,OAAQ9C,EAAGnE,KAAKqE,YAAYF,EAAGC,EAAGpE,KAAKqE,YAAYD,IAQrDR,EAAeI,UAAUkC,OAAS,WAChC,IAAIgB,EAAUlH,KAAK8D,QAAQrC,IAAI0F,kBAU/B,OAPAD,EAAQzG,EAAIT,KAAKqE,YAAYH,KAC7BgD,EAAQE,EAAI,EACZF,EAAQG,EAAI,EACZH,EAAQX,EAAIvG,KAAKqE,YAAYH,KAC7BgD,EAAQhH,EAAIF,KAAKqE,YAAYF,EAC7B+C,EAAQ1H,EAAIQ,KAAKqE,YAAYD,EAEtB8C,GAQTtD,EAAeI,UAAUgB,OAAS,SAASF,GACzC,IAAIwC,EAAWtH,KAAKuH,gBAAgBzC,GAChC0C,EAAUxH,KAAKyH,eAAe3C,GAElC,GAAIwC,GAAYE,EAAS,CAcvB,GAZIF,KAE0F,IAAxFtH,KAAK8D,QAAQ4D,WAAW1H,KAAK8G,kBAAmB9G,KAAK+G,oBAAoBjC,EAAOrE,KAClFqE,EAAOrE,EAAIqE,EAAOyB,EAAIvG,KAAKqE,YAAYH,KACvCoD,GAAW,IAEXtH,KAAK2H,YAAY7C,GACjB9E,KAAK8D,QAAQ8D,OAAO5H,KAAK8G,qBAKzBU,EAAS,CACX,IAAIK,EAAa7H,KAAK8D,QAAQgE,UAAU9H,KAAKiH,UAAW9C,EAAGW,EAAO5E,EAAGkE,EAAGU,EAAOtF,IAE3EuI,GAAc,EACdC,GAAc,GAGC,IAAfH,GAEF/C,EAAO5E,EAAIF,KAAKiH,SAAS9C,EACzBW,EAAOtF,EAAIQ,KAAKiH,SAAS7C,EAEzB2D,EAAcC,GAAc,GACnBrE,EAAMsE,SAASJ,MAEH,IAAjBA,EAAW1D,GAEbW,EAAO5E,EAAIF,KAAKiH,SAAS9C,EACzB4D,GAAc,GACLpE,EAAMuE,SAASL,EAAW1D,KAEnCW,EAAO5E,EAAI2H,EAAW1D,IAIH,IAAjB0D,EAAWzD,GAEbU,EAAOtF,EAAIQ,KAAKiH,SAAS7C,EACzB4D,GAAc,GACLrE,EAAMuE,SAASL,EAAWzD,KAEnCU,EAAOtF,EAAIqI,EAAWzD,IAMrB2D,GAAeC,IAAiBhI,KAAKyH,eAAe3C,GACvD0C,GAAU,GAEVxH,KAAK2H,YAAY7C,GACjB9E,KAAK8D,QAAQqE,MAAMnI,KAAKiH,YAKxBK,GAAYE,IACdxH,KAAK2F,yBAKX/B,EAAeI,UAAUuD,gBAAkB,SAASzC,GAClD,OAAO9E,KAAKqE,YAAYH,OAASY,EAAOrE,GAG1CmD,EAAeI,UAAUyD,eAAiB,SAAS3C,GACjD,OAAO9E,KAAKqE,YAAYF,IAAMW,EAAO5E,GAAKF,KAAKqE,YAAYD,IAAMU,EAAOtF,GAS1EoE,EAAeI,UAAU2D,YAAc,SAAS7C,GAC9C9E,KAAKqE,YAAYH,KAAOY,EAAOrE,EAC/BT,KAAKqE,YAAYF,EAAIW,EAAO5E,EAC5BF,KAAKqE,YAAYD,EAAIU,EAAOtF,GAG9BoE,EAAeI,UAAUoE,eAAgB,EAKzCxE,EAAeI,UAAU2B,qBAAuB,WACzC3F,KAAKoI,gBAERpI,KAAKoI,eAAgB,EAGrBpI,KAAKyE,sBAAsB1D,KAAKlB,OAAQG,KAAKsE,mBAOjDV,EAAeI,UAAUQ,UAAY,WACnC,IAAI6D,EAAMrI,KAAKkG,SAGf7E,EAAS2D,OAAOhF,KAAK6D,SAAUwE,EAAKrI,KAAKwB,MAGzCxB,KAAKoI,eAAgB,EAGlBpI,KAAK8D,QAAQwE,cACdtI,KAAK8D,QAAQwE,aAAaD,IAI9B3I,EAAOD,QAAU,SAASoE,EAAUC,GAClC,OAAO,IAAIF,EAAeC,EAAUC,MAGnCL,kBAAkB,EAAE8E,cAAc,IAAIC,GAAG,SAAS9H,EAAQhB,EAAOD,GACpE,IAAIgJ,EAAQ/H,EAAQ,cAClBgI,EAAehI,EAAQ,mBACvBiD,EAAQjD,EAAQ,eAChBW,EAAWX,EAAQ,mBACnBkD,EAAiBlD,EAAQ,qBAEvBQ,EAAa,SAASO,EAAKqC,GAC7B9D,KAAK+D,KAAKtC,EAAKqC,IAGb6E,GACFC,iBAAkB,yBAClBC,YAAY,EACZC,qBAAqB,EACrBC,aAAa,EACbC,qBAAqB,EACrBC,uBAAuB,EACvBC,2BAA2B,EAC3BC,qBAAsB,GACtBC,QAAS,GACTC,QAAS,GACTlD,KAAK,EACLC,SAAS,EACTI,QAAQ,EACR7B,YAAa,OACb+C,WAAY,KACZE,OAAQ,KACRE,UAAW,KACXK,MAAO,KACPmB,oBAAqB,KACrBC,sBAAuB,KACvBjB,aAAc,MAGhBpH,EAAW8C,UAAUD,KAAO,SAAStC,EAAKqC,GACxC,IAAI0F,EAAOxJ,KAEXA,KAAKyB,IAAMA,EACXzB,KAAKwB,KAAOC,EAAIC,cAAc,QAG9BL,EAASoI,mBAAmBzJ,KAAKyB,KAGjCzB,KAAK8D,QAAUH,EAAMsC,OAAOtC,EAAMsC,UAAW0C,GAAkB7E,GAG/D9D,KAAK0J,MAAQ,OAGb,IAAIC,EAA+BtI,EAASuI,gCAAgCnI,GAC5EzB,KAAKmC,MAAQwH,EAA6BxH,MAC1CnC,KAAKoC,OAASuH,EAA6BvH,OAG3CpC,KAAK6D,SAAWD,EAAevC,EAASwI,oBAAoB7J,KAAKyB,IAAKzB,KAAK8D,QAAQ8E,mBACjFnH,IAAKzB,KAAKyB,IACVU,MAAOnC,KAAKmC,MACZC,OAAQpC,KAAKoC,OACb+D,IAAKnG,KAAK8D,QAAQqC,IAClBC,QAASpG,KAAK8D,QAAQsC,QACtBI,OAAQxG,KAAK8D,QAAQ0C,OACrB7B,YAAa3E,KAAK8D,QAAQa,YAE1B+C,WAAY,SAASoC,EAAUzD,GAC7B,GAAImD,EAAK3F,UAAY2F,EAAK1F,QAAQ4D,WAAa,OAAO8B,EAAK1F,QAAQ4D,WAAWoC,EAAUzD,IAE1FuB,OAAQ,SAASZ,GACf,GAAIwC,EAAK3F,UAAY2F,EAAK1F,QAAQ8D,OAAS,OAAO4B,EAAK1F,QAAQ8D,OAAOZ,IAExEc,UAAW,SAASiC,EAAUC,GAC5B,GAAIR,EAAK3F,UAAY2F,EAAK1F,QAAQgE,UAAY,OAAO0B,EAAK1F,QAAQgE,UAAUiC,EAAUC,IAExF7B,MAAO,SAAS8B,GACd,GAAIT,EAAK3F,UAAY2F,EAAK1F,QAAQqE,MAAQ,OAAOqB,EAAK1F,QAAQqE,MAAM8B,IAEtE3B,aAAc,SAASD,GACrB,GAAImB,EAAK3F,UAAY2F,EAAK1F,QAAQwE,aAAe,OAAOkB,EAAK1F,QAAQwE,aAAaD,MAKtF,IAAI6B,EAAiBlK,KAAK2C,oBAC1BuH,EAAeC,cAAcnK,KAAK8D,QAAQ4D,YAC1CwC,EAAeE,UAAUpK,KAAK8D,QAAQ8D,QACtCsC,EAAeG,aAAarK,KAAK8D,QAAQgE,WACzCoC,EAAeI,SAAStK,KAAK8D,QAAQqE,OACrC+B,EAAeK,gBAAgBvK,KAAK8D,QAAQwE,cAExCtI,KAAK8D,QAAQgF,qBACfJ,EAAapH,OAAOtB,MAItBA,KAAKwK,wBAA0BC,KAAKC,MACpC1K,KAAK2K,iBAMPzJ,EAAW8C,UAAU2G,cAAgB,WACnC,IAAInB,EAAOxJ,KACP4K,EAAU,KAsDd,GAnDA5K,KAAK6K,gBAEHC,UAAW,SAASC,GACvB,KAAIA,EAAIC,kBAAkBC,kBAAoBF,EAAIC,kBAAkBE,mBAAqBH,EAAIC,kBAAkBG,mBAA/G,CACK,IAAIC,EAAS5B,EAAK6B,gBAAgBN,EAAKH,GAEvC,OADAA,EAAUG,EACHK,IAETE,WAAY,SAASP,GACxB,KAAIA,EAAIC,kBAAkBC,kBAAoBF,EAAIC,kBAAkBE,mBAAqBH,EAAIC,kBAAkBG,mBAA/G,CACK,IAAIC,EAAS5B,EAAK6B,gBAAgBN,EAAKH,GAEvC,OADAA,EAAUG,EACHK,IAITG,QAAS,SAASR,GACrB,KAAIA,EAAIC,kBAAkBC,kBAAoBF,EAAIC,kBAAkBE,mBAAqBH,EAAIC,kBAAkBG,mBAC1G,OAAO3B,EAAKgC,cAAcT,IAE5BU,SAAU,SAASV,GACtB,KAAIA,EAAIC,kBAAkBC,kBAAoBF,EAAIC,kBAAkBE,mBAAqBH,EAAIC,kBAAkBG,mBAC1G,OAAO3B,EAAKgC,cAAcT,IAI5BW,UAAW,SAASX,GACvB,KAAIA,EAAIC,kBAAkBC,kBAAoBF,EAAIC,kBAAkBE,mBAAqBH,EAAIC,kBAAkBG,mBAC1G,OAAO3B,EAAKmC,gBAAgBZ,IAE9Ba,UAAW,SAASb,GACvB,KAAIA,EAAIC,kBAAkBC,kBAAoBF,EAAIC,kBAAkBE,mBAAqBH,EAAIC,kBAAkBG,mBAC1G,OAAO3B,EAAKmC,gBAAgBZ,IAI9Bc,WAAY,SAASd,GACxB,KAAIA,EAAIC,kBAAkBC,kBAAoBF,EAAIC,kBAAkBE,mBAAqBH,EAAIC,kBAAkBG,mBAC1G,OAAO3B,EAAKgC,cAAcT,IAE5Be,WAAY,SAASf,GACxB,KAAIA,EAAIC,kBAAkBC,kBAAoBF,EAAIC,kBAAkBE,mBAAqBH,EAAIC,kBAAkBG,mBAC1G,OAAO3B,EAAKgC,cAAcT,IAE5BgB,YAAa,SAAShB,GACzB,KAAIA,EAAIC,kBAAkBC,kBAAoBF,EAAIC,kBAAkBE,mBAAqBH,EAAIC,kBAAkBG,mBAC1G,OAAO3B,EAAKgC,cAAcT,KAKU,MAApC/K,KAAK8D,QAAQwF,oBAA6B,CAC5CtJ,KAAK8D,QAAQwF,oBAAoBvF,MAC/BiI,WAAYhM,KAAKyB,IACjB8H,sBAAuBvJ,KAAK8D,QAAQyF,sBACpChI,SAAUvB,KAAK2C,sBAIjB,IAAIsJ,EAAqBjM,KAAK8D,QAAQwF,oBAAoB2C,mBAC1D,GAAIA,GAAsBA,EAAmBjL,OAC3C,IAAK,IAAIL,EAAIsL,EAAmBjL,OAAS,EAAGL,GAAK,EAAGA,IAC9CX,KAAK6K,eAAeqB,eAAeD,EAAmBtL,YACjDX,KAAK6K,eAAeoB,EAAmBtL,IAOtD,IAAK,IAAIwL,KAASnM,KAAK6K,gBAEpB7K,KAAK8D,QAAQyF,uBAAyBvJ,KAAKyB,KACzCiB,iBAAiByJ,EAAOnM,KAAK6K,eAAesB,IAAQ,GAIrDnM,KAAK8D,QAAQmF,wBACfjJ,KAAK8D,QAAQmF,uBAAwB,EACrCjJ,KAAKoM,yBAOTlL,EAAW8C,UAAUoI,qBAAuB,WAC1C,IAAKpM,KAAK8D,QAAQmF,sBAAuB,CACvC,IAAIO,EAAOxJ,KAGXA,KAAKqM,cAAgB,SAAStB,GAC5B,OAAOvB,EAAK8C,iBAAiBvB,IAI/BtC,EAAM8D,GAAGvM,KAAK8D,QAAQyF,uBAAyBvJ,KAAKyB,IAAKzB,KAAKqM,eAAe,GAE7ErM,KAAK8D,QAAQmF,uBAAwB,IAOzC/H,EAAW8C,UAAUwI,sBAAwB,WACvCxM,KAAK8D,QAAQmF,wBACfR,EAAMgE,IAAIzM,KAAK8D,QAAQyF,uBAAyBvJ,KAAKyB,IAAKzB,KAAKqM,eAAe,GAC9ErM,KAAK8D,QAAQmF,uBAAwB,IASzC/H,EAAW8C,UAAUsI,iBAAmB,SAASvB,GAC/C,GAAK/K,KAAK8D,QAAQiF,aAA8B,SAAf/I,KAAK0J,MAAtC,CAII1J,KAAK8D,QAAQoF,4BACX6B,EAAI2B,eACN3B,EAAI2B,iBAEJ3B,EAAI4B,aAAc,GAKtB,IAAIC,EAAQ7B,EAAI8B,QAAU,EACtBC,EAAYrC,KAAKC,MAAQ1K,KAAKwK,wBAC9BuC,EAAU,EAAItH,KAAKa,IAAI,EAAG,GAAKwG,GAGnC9M,KAAKwK,wBAA0BC,KAAKC,MAGhC,cAAeK,GAAyB,IAAlBA,EAAIiC,WAAmBjC,EAAIkC,aACnDL,EAAuB,IAAf7B,EAAI8B,OAAe,EAAKpH,KAAKyH,IAAInC,EAAIkC,YAAclC,EAAI8B,QAGjED,GAAS,GAAMA,GAASA,EAAQ,GAAMA,GAASA,EAAQ,EAAI,GAAK,GAAKnH,KAAK0H,IAAI1H,KAAKyH,IAAIN,GAAS,IAAMG,EAEtG,IAAIK,EAAoBpN,KAAKyB,IAAI4L,eAAeC,UAC5CC,EAAqBlM,EAASmM,cAAczC,EAAK/K,KAAKyB,KAAKgM,gBAAgBL,GAC3ElJ,EAAOuB,KAAKiI,IAAI,EAAI1N,KAAK8D,QAAQqF,sBAAwB,EAAKyD,GAElE5M,KAAK2N,YAAYzJ,EAAMqJ,KAWzBrM,EAAW8C,UAAU2J,YAAc,SAASC,EAAW3D,EAAO4D,GAC5D,IAAI5J,EAAgBjE,KAAK6D,SAAS8C,mBAE7BkH,GASHD,EAAYnI,KAAKa,IAAItG,KAAK8D,QAAQsF,QAAUnF,EAAcC,KAAMuB,KAAKC,IAAI1F,KAAK8D,QAAQuF,QAAUpF,EAAcC,KAAM0J,IAEpHA,GAAsB5N,KAAK6G,WATvB7G,KAAK6G,UAAY+G,EAAY5N,KAAK8D,QAAQsF,QAAUnF,EAAcC,KACpE0J,EAAa5N,KAAK8D,QAAQsF,QAAUnF,EAAcC,KAAQlE,KAAK6G,UACtD7G,KAAK6G,UAAY+G,EAAY5N,KAAK8D,QAAQuF,QAAUpF,EAAcC,OAC3E0J,EAAa5N,KAAK8D,QAAQuF,QAAUpF,EAAcC,KAAQlE,KAAK6G,WASnE,IAAIiH,EAAS9N,KAAK6D,SAASqC,SACvB6H,EAAgB9D,EAAMwD,gBAAgBK,EAAOR,WAC7CU,EAAWhO,KAAKyB,IAAI0F,kBAAkB8G,UAAUF,EAAc5J,EAAG4J,EAAc3J,GAAG4C,MAAM4G,GAAWK,WAAWF,EAAc5J,GAAI4J,EAAc3J,GAC9IU,EAASgJ,EAAOI,SAASF,GAEzBlJ,EAAOrE,IAAMqN,EAAOrN,GACtBT,KAAK6D,SAASmB,OAAOF,IAUzB5D,EAAW8C,UAAUE,KAAO,SAAS8C,EAAOmH,GAC1CnO,KAAK2N,YAAY3G,EAAO3F,EAAS+M,kBAAkBpO,KAAKyB,IAAKzB,KAAKmC,MAAOnC,KAAKoC,QAAS+L,IASzFjN,EAAW8C,UAAUqK,WAAa,SAASrH,EAAOmH,GAC5CA,IACFnH,EAAQhH,KAAKsO,wBAAwBtH,IAGvChH,KAAKkE,KAAK8C,EAAOmH,IAUnBjN,EAAW8C,UAAUuK,kBAAoB,SAASvH,EAAOiD,EAAOkE,GAO9D,GANIA,IAEFnH,EAAQhH,KAAKsO,wBAAwBtH,IAIV,aAAzBrD,EAAM6K,QAAQvE,GAAuB,CACvC,KAAG,MAAOA,GAAS,MAAOA,GAGxB,MAAM,IAAIrJ,MAAM,0BAFhBqJ,EAAQ5I,EAASoN,eAAezO,KAAKyB,IAAKwI,EAAM9F,EAAG8F,EAAM7F,GAM7DpE,KAAK2N,YAAY3G,EAAOiD,EAAOkE,IAQjCjN,EAAW8C,UAAU6C,QAAU,WAC7B,OAAO7G,KAAK6D,SAASgD,WAQvB3F,EAAW8C,UAAU8C,gBAAkB,WACrC,OAAO9G,KAAK6D,SAASiD,mBASvB5F,EAAW8C,UAAUsK,wBAA0B,SAASpK,GACtD,OAAOA,EAAOlE,KAAK6D,SAAS8C,mBAAmBzC,MAMjDhD,EAAW8C,UAAU0K,UAAY,WAC/B,IAAIzK,EAAgBjE,KAAK6D,SAAS8C,mBAElC3G,KAAKkE,KAAKD,EAAcC,MAAM,IAMhChD,EAAW8C,UAAU2K,SAAW,WAC9B3O,KAAK4O,IAAI5O,KAAK6D,SAAS8C,qBAMzBzF,EAAW8C,UAAUjB,MAAQ,WAC3B/C,KAAK0O,YACL1O,KAAK2O,YASPzN,EAAW8C,UAAU6K,eAAiB,SAAS9D,GAU7C,GATI/K,KAAK8D,QAAQoF,4BACX6B,EAAI2B,eACN3B,EAAI2B,iBAEJ3B,EAAI4B,aAAc,GAKlB3M,KAAK8D,QAAQgF,sBACGiC,EAAIC,OAAO9F,aAAa,UAAY,IACtC4J,QAAQ,yBAA2B,EACjD,OAAO,EAIX,IAAIC,EAGFA,EADEhE,EAAIiE,SACO,GAA6C,GAAzC,EAAIhP,KAAK8D,QAAQqF,uBAEqB,GAAzC,EAAInJ,KAAK8D,QAAQqF,sBAGjC,IAAIc,EAAQ5I,EAASmM,cAAczC,EAAK/K,KAAKyB,KAAKgM,gBAAgBzN,KAAKyB,IAAI4L,eAAeC,WAC1FtN,KAAK2N,YAAYoB,EAAY9E,IAQ/B/I,EAAW8C,UAAUqH,gBAAkB,SAASN,EAAKH,GAC/C5K,KAAK8D,QAAQoF,4BACX6B,EAAI2B,eACN3B,EAAI2B,iBAEJ3B,EAAI4B,aAAc,GAItBhJ,EAAMsL,uBAAuBlE,EAAK/K,KAAKyB,KAGnCzB,KAAK8D,QAAQkF,qBAAuBrF,EAAMuL,WAAWnE,EAAKH,GAC5D5K,KAAK6O,eAAe9D,IAGpB/K,KAAK0J,MAAQ,MACb1J,KAAKmP,cAAgBnP,KAAK6D,SAASqC,SACnClG,KAAKoP,YAAc/N,EAASmM,cAAczC,EAAK/K,KAAKyB,KAAKgM,gBAAgBzN,KAAKmP,cAAc7B,aAShGpM,EAAW8C,UAAU2H,gBAAkB,SAASZ,GAS9C,GARI/K,KAAK8D,QAAQoF,4BACX6B,EAAI2B,eACN3B,EAAI2B,iBAEJ3B,EAAI4B,aAAc,GAIH,QAAf3M,KAAK0J,OAAmB1J,KAAK8D,QAAQ+E,WAAY,CAEnD,IAAIoB,EAAQ5I,EAASmM,cAAczC,EAAK/K,KAAKyB,KAAKgM,gBAAgBzN,KAAKmP,cAAc7B,WACjF+B,EAAcrP,KAAKmP,cAAclB,UAAUhE,EAAM9F,EAAInE,KAAKoP,YAAYjL,EAAG8F,EAAM7F,EAAIpE,KAAKoP,YAAYhL,GAExGpE,KAAK6D,SAASmB,OAAOqK,KASzBnO,EAAW8C,UAAUwH,cAAgB,SAAST,GACxC/K,KAAK8D,QAAQoF,4BACX6B,EAAI2B,eACN3B,EAAI2B,iBAEJ3B,EAAI4B,aAAc,GAIH,QAAf3M,KAAK0J,QAEP1J,KAAK0J,MAAQ,SAQjBxI,EAAW8C,UAAUmC,IAAM,WACzB,IAAIvB,EAAU5E,KAAK6D,SAASmC,aACxBK,EAAWZ,KAAKC,IAAI1F,KAAKmC,MAAMyC,EAAQzC,MAAOnC,KAAKoC,OAAOwC,EAAQxC,QAEtEpC,KAAKkE,KAAKmC,GAAU,IAOtBnF,EAAW8C,UAAUoC,QAAU,WAC7B,IAAIxB,EAAU5E,KAAK6D,SAASmC,aACxBK,EAAWZ,KAAKa,IAAItG,KAAKmC,MAAMyC,EAAQzC,MAAOnC,KAAKoC,OAAOwC,EAAQxC,QAEtEpC,KAAKkE,KAAKmC,GAAU,IAOtBnF,EAAW8C,UAAUwC,OAAS,WAC5B,IAAI5B,EAAU5E,KAAK6D,SAASmC,aACxBS,EAA4E,IAAjEzG,KAAKmC,OAASyC,EAAQzC,MAAoB,EAAZyC,EAAQT,GAASnE,KAAK6G,WAC/DH,EAA8E,IAAnE1G,KAAKoC,QAAUwC,EAAQxC,OAAqB,EAAZwC,EAAQR,GAASpE,KAAK6G,WAErE7G,KAAK2C,oBAAoBiM,KAAKzK,EAAGsC,EAASrC,EAAGsC,KAO/CxF,EAAW8C,UAAUsL,WAAa,WAChCtP,KAAK6D,SAASgC,sBAQhB3E,EAAW8C,UAAU4K,IAAM,SAAS3E,GAClC,IAAIoF,EAAcrP,KAAK6D,SAASqC,SAChCmJ,EAAYnP,EAAI+J,EAAM9F,EACtBkL,EAAY7P,EAAIyK,EAAM7F,EACtBpE,KAAK6D,SAASmB,OAAOqK,IAQvBnO,EAAW8C,UAAUuL,MAAQ,SAAStF,GACpC,IAAIoF,EAAcrP,KAAK6D,SAASqC,SAChCmJ,EAAYnP,GAAK+J,EAAM9F,EACvBkL,EAAY7P,GAAKyK,EAAM7F,EACvBpE,KAAK6D,SAASmB,OAAOqK,IAQvBnO,EAAW8C,UAAUiD,OAAS,WAC5B,IAAIyC,EAAQ1J,KAAK6D,SAAS+C,WAE1B,OAAQzC,EAAGuF,EAAMvF,EAAGC,EAAGsF,EAAMtF,IAM/BlD,EAAW8C,UAAUwL,OAAS,WAE5B,IAAI7F,EAA+BtI,EAASuI,gCAAgC5J,KAAKyB,KACjFzB,KAAKmC,MAAQwH,EAA6BxH,MAC1CnC,KAAKoC,OAASuH,EAA6BvH,OAG3C,IAAIyB,EAAW7D,KAAK6D,SACpBA,EAASC,QAAQ3B,MAAQnC,KAAKmC,MAC9B0B,EAASC,QAAQ1B,OAASpC,KAAKoC,OAC/ByB,EAASkB,aAGL/E,KAAK8D,QAAQgF,sBACf9I,KAAK2C,oBAAoB8M,sBACzBzP,KAAK2C,oBAAoB+M,uBAO7BxO,EAAW8C,UAAU2L,QAAU,WAC7B,IAAInG,EAAOxJ,KAGXA,KAAK0H,WAAa,KAClB1H,KAAK4H,OAAS,KACd5H,KAAK8H,UAAY,KACjB9H,KAAKmI,MAAQ,KACbnI,KAAKsI,aAAe,KAGoB,MAApCtI,KAAK8D,QAAQwF,qBACftJ,KAAK8D,QAAQwF,oBAAoBqG,SAC/B3D,WAAYhM,KAAKyB,IACjB8H,sBAAuBvJ,KAAK8D,QAAQyF,sBACpChI,SAAUvB,KAAK2C,sBAKnB,IAAK,IAAIwJ,KAASnM,KAAK6K,gBACpB7K,KAAK8D,QAAQyF,uBAAyBvJ,KAAKyB,KACzCmO,oBAAoBzD,EAAOnM,KAAK6K,eAAesB,IAAQ,GAI5DnM,KAAKwM,wBAGLxM,KAAK2C,oBAAoB8M,sBAGzBzP,KAAK+C,QAGL8M,EAAiBA,EAAexK,OAAO,SAAS9D,GAC9C,OAAOA,EAASE,MAAQ+H,EAAK/H,aAIxBzB,KAAK8D,eAGL9D,KAAK6D,gBAGL7D,KAAKkK,sBACLlK,KAAK8P,GACZ9P,KAAK2C,kBAAoB,WACvB,OAAO,OASXzB,EAAW8C,UAAUrB,kBAAoB,WACvC,IAAI6G,EAAOxJ,KAmFX,OAhFKA,KAAKkK,iBACRlK,KAAKkK,eAAiBlK,KAAK8P,IAEzBC,UAAW,WAA4C,OAAhCvG,EAAK1F,QAAQ+E,YAAa,EAAaW,EAAKsG,IACnEE,WAAY,WAA6C,OAAjCxG,EAAK1F,QAAQ+E,YAAa,EAAcW,EAAKsG,IACrEG,aAAc,WAAY,QAASzG,EAAK1F,QAAQ+E,YAChD+F,IAAK,SAAS3E,GAAyB,OAAjBT,EAAKoF,IAAI3E,GAAeT,EAAKsG,IACnDP,MAAO,SAAStF,GAA2B,OAAnBT,EAAK+F,MAAMtF,GAAeT,EAAKsG,IACvD7I,OAAQ,WAAY,OAAOuC,EAAKvC,UAEhCoD,aAAc,SAAS6F,GAAyF,OAApF1G,EAAK1F,QAAQgE,UAAmB,OAAPoI,EAAc,KAAOvM,EAAMY,MAAM2L,EAAI1G,EAAKU,gBAAwBV,EAAKsG,IAC5HxF,SAAU,SAAS4F,GAAqF,OAAhF1G,EAAK1F,QAAQqE,MAAe,OAAP+H,EAAc,KAAOvM,EAAMY,MAAM2L,EAAI1G,EAAKU,gBAAwBV,EAAKsG,IAEpHK,WAAY,WAA6C,OAAjC3G,EAAK1F,QAAQiF,aAAc,EAAaS,EAAKsG,IACrEM,YAAa,WAA8C,OAAlC5G,EAAK1F,QAAQiF,aAAc,EAAcS,EAAKsG,IACvEO,cAAe,WAAY,QAAS7G,EAAK1F,QAAQiF,aACjD2G,mBAAoB,WAKlB,OAJKlG,EAAK1F,QAAQgF,sBAChBU,EAAK1F,QAAQgF,qBAAsB,EACnCJ,EAAapH,OAAOkI,IAEfA,EAAKsG,IAEdL,oBAAqB,WAKnB,OAJIjG,EAAK1F,QAAQgF,sBACfU,EAAK1F,QAAQgF,qBAAsB,EACnCJ,EAAapF,QAAQkG,IAEhBA,EAAKsG,IAEdQ,sBAAuB,WAAY,QAAS9G,EAAK1F,QAAQgF,qBAEzDyH,mBAAoB,WAAqD,OAAzC/G,EAAK1F,QAAQkF,qBAAsB,EAAaQ,EAAKsG,IACrFU,oBAAqB,WAAsD,OAA1ChH,EAAK1F,QAAQkF,qBAAsB,EAAcQ,EAAKsG,IACvFW,sBAAuB,WAAY,QAASjH,EAAK1F,QAAQkF,qBAEzDoD,qBAAsB,WAAyC,OAA7B5C,EAAK4C,uBAA+B5C,EAAKsG,IAC3EtD,sBAAuB,WAA0C,OAA9BhD,EAAKgD,wBAAgChD,EAAKsG,IAC7EY,wBAAyB,WAAY,QAASlH,EAAK1F,QAAQmF,uBAE3D0H,wBAAyB,SAAS3J,GAAmD,OAA3CwC,EAAK1F,QAAQqF,qBAAuBnC,EAAcwC,EAAKsG,IACjGc,WAAY,SAAS1M,GAAoC,OAA7BsF,EAAK1F,QAAQsF,QAAUlF,EAAasF,EAAKsG,IACrEe,WAAY,SAAS3M,GAAoC,OAA7BsF,EAAK1F,QAAQuF,QAAUnF,EAAasF,EAAKsG,IAErE3F,cAAe,SAAS+F,GAA0F,OAArF1G,EAAK1F,QAAQ4D,WAAoB,OAAPwI,EAAc,KAAOvM,EAAMY,MAAM2L,EAAI1G,EAAKU,gBAAwBV,EAAKsG,IAC9H1F,UAAW,SAAS8F,GAAsF,OAAjF1G,EAAK1F,QAAQ8D,OAAgB,OAAPsI,EAAc,KAAOvM,EAAMY,MAAM2L,EAAI1G,EAAKU,gBAAwBV,EAAKsG,IAEtH5L,KAAM,SAAS8C,GAAsC,OAA9BwC,EAAK6E,WAAWrH,GAAO,GAAcwC,EAAKsG,IACjEgB,OAAQ,SAAS9J,GAAuC,OAA/BwC,EAAK6E,WAAWrH,GAAO,GAAewC,EAAKsG,IACpEnC,YAAa,SAAS3G,EAAOiD,GAAoD,OAA5CT,EAAK+E,kBAAkBvH,EAAOiD,GAAO,GAAcT,EAAKsG,IAC7FiB,cAAe,SAAS/J,EAAOiD,GAAqD,OAA7CT,EAAK+E,kBAAkBvH,EAAOiD,GAAO,GAAeT,EAAKsG,IAChGrN,OAAQ,WAAgE,OAApDzC,KAAK8Q,OAAO,EAAItH,EAAK1F,QAAQqF,sBAA8BK,EAAKsG,IACpF3M,QAAS,WAAsE,OAA1DnD,KAAK8Q,OAAO,GAAK,EAAItH,EAAK1F,QAAQqF,uBAA+BK,EAAKsG,IAC3FjJ,QAAS,WAAY,OAAO2C,EAAK1C,mBAEjCyD,gBAAiB,SAAS2F,GAA4F,OAAvF1G,EAAK1F,QAAQwE,aAAsB,OAAP4H,EAAc,KAAOvM,EAAMY,MAAM2L,EAAI1G,EAAKU,gBAAwBV,EAAKsG,IAElIpB,UAAW,WAA8B,OAAlBlF,EAAKkF,YAAoBlF,EAAKsG,IACrDnB,SAAU,WAA6B,OAAjBnF,EAAKmF,WAAmBnF,EAAKsG,IACnD/M,MAAO,WAA0B,OAAdyG,EAAKzG,QAAgByG,EAAKsG,IAE7C3J,IAAK,WAAwB,OAAZqD,EAAKrD,MAAcqD,EAAKsG,IACzC1J,QAAS,WAA4B,OAAhBoD,EAAKpD,UAAkBoD,EAAKsG,IACjDtJ,OAAQ,WAA2B,OAAfgD,EAAKhD,SAAiBgD,EAAKsG,IAE/CR,WAAY,WAA+B,OAAnB9F,EAAK8F,aAAqB9F,EAAKsG,IACvDN,OAAQ,WAA2B,OAAfhG,EAAKgG,SAAiBhG,EAAKsG,IAC/CkB,SAAU,WACR,OACE7O,MAAOqH,EAAKrH,MACZC,OAAQoH,EAAKpH,OACb6O,SAAUzH,EAAK3C,UACfjC,QAAS4E,EAAK3F,SAASmC,eAI3B2J,QAAS,WAA4B,OAAhBnG,EAAKmG,UAAkBnG,EAAKsG,MAI9C9P,KAAKkK,gBASd,IAAI2F,KA0BJnQ,EAAOD,QAxBU,SAASyR,EAAmBpN,GAC3C,IAAIrC,EAAMkC,EAAMwN,OAAOD,GAEvB,GAAY,OAARzP,EACF,OAAO,KAGP,IAAI,IAAId,EAAIkP,EAAe7O,OAAS,EAAGL,GAAK,EAAGA,IAC7C,GAAIkP,EAAelP,GAAGc,MAAQA,EAC5B,OAAOoO,EAAelP,GAAGY,SAASoB,oBAWtC,OANAkN,EAAeuB,MACb3P,IAAKA,EACLF,SAAU,IAAIL,EAAWO,EAAKqC,KAIzB+L,EAAeA,EAAe7O,OAAS,GAAGO,SAASoB,uBAM3D0O,kBAAkB,EAAEC,oBAAoB,EAAE7N,kBAAkB,EAAE8N,aAAa,EAAEhJ,cAAc,IAAIiJ,GAAG,SAAS9Q,EAAQhB,EAAOD,GAC7H,IAAIkE,EAAQjD,EAAQ,eAChB+Q,EAAW,UAIY9P,SAAS+P,eAClCD,EAAW,MAGb/R,EAAOD,SACLoC,MAAQ,6BACR8P,MAAQ,uCACRC,QAAU,gCACVC,QAAU,+BACVC,KAAO,oCAQPlI,gCAAiC,SAASnI,GACxC,GAAIA,EAAIsQ,aAAetQ,EAAIuQ,aACzB,OAAQ7P,MAAOV,EAAIsQ,YAAa3P,OAAQX,EAAIuQ,cACvC,GAAMvQ,EAAIwQ,wBACf,OAAOxQ,EAAIwQ,wBAEX,MAAM,IAAIrR,MAAM,2CAUpBiJ,oBAAqB,SAASpI,EAAKyQ,GACjC,IAAIrO,EAAW,KASf,KANEA,EADEF,EAAMwO,UAAUD,GACPA,EAEAzQ,EAAIC,cAAcwQ,IAIhB,CACb,IAAIE,EAAaC,MAAMrO,UAAUsO,MAAMvR,KAAKU,EAAI2Q,YAAc3Q,EAAI8Q,UAAUlN,OAAO,SAASmN,GAC1F,MAAuB,SAAhBA,EAAGC,UAAuC,UAAhBD,EAAGC,WAKZ,IAAtBL,EAAWpR,QAA2C,MAA3BoR,EAAW,GAAGK,UAAgE,OAA5CL,EAAW,GAAGlN,aAAa,eAC1FrB,EAAWuO,EAAW,IAK1B,IAAKvO,EAAU,CACb,IAAI6O,EAAa,aAAc,IAAIjI,MAAOkI,cAAcC,QAAQ,MAAO,KACvE/O,EAAWlC,SAASC,gBAAgB5B,KAAK6B,MAAO,MACvCG,aAAa,KAAM0Q,GAG5B,IAAIG,EAAcpR,EAAI2Q,YAAc3Q,EAAI8Q,SACxC,GAAMM,GAAeA,EAAY7R,OAAS,EACxC,IAAK,IAAIL,EAAIkS,EAAY7R,OAAQL,EAAI,EAAGA,IAEe,SAAjDkS,EAAYA,EAAY7R,OAASL,GAAG8R,UACtC5O,EAAS/B,YAAY+Q,EAAYA,EAAY7R,OAASL,IAI5Dc,EAAIK,YAAY+B,GAIlB,IAAIiP,KAWJ,OAVIjP,EAASqB,aAAa,WACxB4N,EAAajP,EAASqB,aAAa,SAASE,MAAM,OAI9C0N,EAAWhE,QAAQ,2BACvBgE,EAAW1B,KAAK,yBAChBvN,EAAS7B,aAAa,QAAS8Q,EAAWC,KAAK,OAG1ClP,GAQP4F,mBAAoB,SAAShI,GAO7B,GALAA,EAAIO,aAAa,QAAShC,KAAK6B,OAC/BJ,EAAIuR,eAAehT,KAAK4R,QAAS,cAAe5R,KAAK6R,SACrDpQ,EAAIuR,eAAehT,KAAK4R,QAAS,WAAY5R,KAAK8R,MAG3B,OAAnBrQ,EAAI8B,WAAqB,CAC3B,IAAIxB,EAAQN,EAAIyD,aAAa,UAAY,IACQ,IAA7CnD,EAAMkR,cAAcnE,QAAQ,aAC9BrN,EAAIO,aAAa,QAAS,qBAAuBD,KAQvDmR,kCAAmC,IAanCC,kBAAmBxP,EAAMyP,SAAS,WAGhC,IAAK,IAFDC,EAAU1R,SAAS2R,iBAAiB,QACpCC,EAAeF,EAAQrS,OAClBL,EAAI,EAAGA,EAAI4S,EAAc5S,IAAK,CACrC,IAAI6S,EAAWH,EAAQ1S,GACvB6S,EAASjQ,WAAWkQ,aAAaD,EAAUA,KAE5CxT,KAAKkT,mCASRlO,OAAQ,SAAS0O,EAASC,EAAQnS,GAChC,IAAIgI,EAAOxJ,KACPM,EAAI,UAAYqT,EAAOlT,EAAI,IAAMkT,EAAOvM,EAAI,IAAMuM,EAAOtM,EAAI,IAAMsM,EAAOpN,EAAI,IAAMoN,EAAOzT,EAAI,IAAMyT,EAAOnU,EAAI,IAEpHkU,EAAQV,eAAe,KAAM,YAAa1S,GACtC,cAAeoT,EAAQ3R,MACzB2R,EAAQ3R,MAAM6R,UAAYtT,EACjB,kBAAmBoT,EAAQ3R,MACpC2R,EAAQ3R,MAAM,iBAAmBzB,EACxB,sBAAuBoT,EAAQ3R,QACxC2R,EAAQ3R,MAAM,qBAAuBzB,GAMtB,OAAbmR,GAAuBjQ,IAEzBA,EAAK+B,WAAWkQ,aAAajS,EAAMA,GAInC3B,OAAOgU,WAAW,WAChBrK,EAAK2J,qBACJ3J,EAAK0J,qCAWZ1F,cAAe,SAASzC,EAAKtJ,GAC3B,IAAIwI,EAAQxI,EAAIgN,iBAOhB,OALA9K,EAAMsL,uBAAuBlE,EAAKtJ,GAElCwI,EAAM9F,EAAI4G,EAAI+I,QACd7J,EAAM7F,EAAI2G,EAAIgJ,QAEP9J,GASTmE,kBAAmB,SAAS3M,EAAKU,EAAOC,GACtC,OAAOpC,KAAKyO,eAAehN,EAAKU,EAAQ,EAAGC,EAAS,IAWtDqM,eAAgB,SAAShN,EAAK0C,EAAGC,GAC/B,IAAI6F,EAAQxI,EAAIgN,iBAIhB,OAHAxE,EAAM9F,EAAIA,EACV8F,EAAM7F,EAAIA,EAEH6F,MAIR1B,cAAc,IAAIyL,GAAG,SAAStT,EAAQhB,EAAOD,GAKhDC,EAAOD,QAAU,WAsBf,SAASwU,EAAeP,EAAQQ,EAASC,GAEvC,IAAIjE,EAAK,SAASkE,IAEfA,IAAmBA,EAAgBvU,OAAOsM,OAG3C,IAAIA,GAEFiI,cAAeA,EACfpJ,OAAQoJ,EAAcpJ,QAAUoJ,EAAcC,WAC9CC,KAAM,QACNtH,UAAiC,uBAAtBoH,EAAcE,KAAgC,EAAI,EAC7DC,OAAQ,EACRC,OAAQ,EACR9H,eAAgB,WACd0H,EAAc1H,eACZ0H,EAAc1H,iBACd0H,EAAczH,aAAc,IAclC,MATgB,cAAX8H,GACHtI,EAAMU,QAAS,KAASuH,EAAcnH,WAEtCmH,EAAcM,cAAiBvI,EAAMoI,QAAS,KAASH,EAAcM,cAErEvI,EAAMU,OAASuH,EAAcO,OAIxBT,EAAU/H,IAUnB,OANAyI,EAAIxD,MACFsC,QAASA,EACTxD,GAAIA,EACJiE,QAASA,IAGJjE,EAGT,SAAS2E,EAAYnB,EAAQS,GAC3B,IAAK,IAAIxT,EAAI,EAAGA,EAAIiU,EAAI5T,OAAQL,IAC9B,GAAIiU,EAAIjU,GAAG+S,UAAYA,GAAWkB,EAAIjU,GAAGwT,UAAYA,EACnD,OAAOS,EAAIjU,GAAGuP,GAGlB,OAAO,aAGT,SAAS4E,EAAepB,EAAQS,GAC9B,IAAK,IAAIxT,EAAI,EAAGA,EAAIiU,EAAI5T,OAAQL,IAC9B,GAAIiU,EAAIjU,GAAG+S,UAAYA,GAAWkB,EAAIjU,GAAGwT,UAAYA,EACnD,OAAOS,EAAIG,OAAOpU,EAAE,GAK1B,SAASqU,EAAmBC,EAAMC,EAAWhB,EAAUiB,GAErD,IAAIC,EAGFA,EADc,UAAZX,EACGP,EAEAD,EAAegB,EAAKf,EAASiB,GAGpCF,EAAMI,GAAqBC,EAASJ,EAAWE,EAAID,IAAc,GAInE,SAASI,EAAsBN,EAAMC,EAAWhB,EAAUiB,GAExD,IAAIC,EAGFA,EADc,UAAZX,EACGP,EAEAW,EAAYI,EAAKE,GAGxBF,EAAMO,GAAwBF,EAASJ,EAAWE,EAAID,IAAc,GAEpEL,EAAeG,EAAKE,GA1GtB,IAAiBE,EAAmBG,EAA+Bf,EAA/Da,EAAS,GAA+DV,KAgI5E,OA7HK/U,OAAO6C,kBACV2S,EAAoB,mBACpBG,EAAuB,wBAEvBH,EAAoB,cACpBG,EAAuB,cACvBF,EAAS,MAIXb,EAAU,YAAa9S,SAAS8T,cAAc,OAAS,aACnBC,IAA1B/T,SAASgU,aAA6B,aACtC,kBAkHRpJ,GAnBF,SAA2B0I,EAAMf,EAAUiB,GACzCH,EAAmBC,EAAMR,EAASP,EAAUiB,GAG7B,kBAAXV,GACAO,EAAmBC,EAAM,sBAAuBf,EAAUiB,IAe9D1I,IAXF,SAA6BwI,EAAKf,EAASiB,GACzCI,EAAqBN,EAAKR,EAAQP,EAASiB,GAG5B,kBAAXV,GACAc,EAAqBN,EAAM,sBAAuBf,EAAUiB,aAW9DS,GAAG,SAASlV,EAAQhB,EAAOD,GA8QjC,SAASoW,EAAeC,GACtB,OAAO,SAAS5B,GACdrU,OAAOgU,WAAWK,EAAU4B,IA/QhCpW,EAAOD,SAQLwG,OAAQ,SAAS+E,EAAQ+K,GACvB/K,EAASA,MACT,IAAK,IAAIgL,KAAQD,EAEX/V,KAAKiI,SAAS8N,EAAOC,IACvBhL,EAAOgL,GAAQhW,KAAKiG,OAAO+E,EAAOgL,GAAOD,EAAOC,IAEhDhL,EAAOgL,GAAQD,EAAOC,GAG1B,OAAOhL,GASTmH,UAAW,SAAS5R,GAClB,OACEA,aAAa0V,aAAe1V,aAAa2V,YAAc3V,aAAa4V,eACnE5V,GAAkB,iBAANA,GAAwB,OAANA,GAA6B,IAAfA,EAAE6V,UAAwC,iBAAf7V,EAAEkS,UAU9ExK,SAAU,SAAS1H,GACjB,MAA6C,oBAAtC8V,OAAOrS,UAAUsS,SAASvV,KAAKR,IASxC2H,SAAU,SAAS9H,GACjB,OAAQmW,MAAM/Q,WAAWpF,KAAOoW,SAASpW,IAS3C+Q,OAAQ,SAASD,GACf,IAAIwC,EACAjS,EAEJ,GAAKzB,KAAKmS,UAAUjB,GAelBwC,EAAUxC,MAf4B,CAEtC,KAAiC,iBAAtBA,GAAkCA,aAA6BuF,QASxE,MAAM,IAAI7V,MAAM,sDALhB,KAFA8S,EAAU/R,SAASD,cAAcwP,IAG/B,MAAM,IAAItQ,MAAM,0DAA4DsQ,GAWlF,GAAsC,QAAlCwC,EAAQgD,QAAQzD,cAClBxR,EAAMiS,OAEN,GAAsC,WAAlCA,EAAQgD,QAAQzD,cAClBxR,EAAMiS,EAAQiD,gBAAgBC,oBACzB,CACL,GAAsC,UAAlClD,EAAQgD,QAAQzD,cAGlB,KAAsC,QAAlCS,EAAQgD,QAAQzD,cACZ,IAAIrS,MAAM,+FAEV,IAAIA,MAAM,mBALlBa,EAAMiS,EAAQmD,iBAAiBD,gBAYrC,OAAOnV,GAST8C,MAAO,SAAS2L,EAAI4G,GAClB,OAAO,WACL,OAAO5G,EAAG6G,MAAMD,EAASE,aAY7BxI,QAAS,SAASjO,GAChB,OAAO8V,OAAOrS,UAAUsS,SAASS,MAAMxW,GAAGqS,QAAQ,cAAe,IAAIA,QAAQ,MAAO,KAStF3D,uBAAwB,SAASlE,EAAKtJ,GAEpC,QAAoB,IAAhBsJ,EAAI+I,SAAsC,OAAhB/I,EAAI+I,QAMhC,GAJA/I,EAAI+I,QAAU,EACd/I,EAAIgJ,QAAU,OAGa,IAAvBhJ,EAAIkM,gBAA6BlM,EAAIkM,eAAejW,QAEtD,QAAsC,IAAlC+J,EAAIkM,eAAe,GAAGnD,QACxB/I,EAAI+I,QAAU/I,EAAIkM,eAAe,GAAGnD,QACpC/I,EAAIgJ,QAAUhJ,EAAIkM,eAAe,GAAGlD,aAGjC,QAAoC,IAAhChJ,EAAIkM,eAAe,GAAGC,MAAkB,CAC/C,IAAIC,EAAO1V,EAAIwQ,wBAEflH,EAAI+I,QAAU/I,EAAIkM,eAAe,GAAGC,MAAQC,EAAKC,KACjDrM,EAAIgJ,QAAUhJ,EAAIkM,eAAe,GAAGI,MAAQF,EAAKG,eAGpB,IAAtBvM,EAAIqJ,oBACqB,IAA9BrJ,EAAIqJ,cAAcN,UACpB/I,EAAI+I,QAAU/I,EAAIqJ,cAAcN,QAChC/I,EAAIgJ,QAAUhJ,EAAIqJ,cAAcL,UAexC7E,WAAY,SAASnE,EAAKH,GAExB,GAAmB,IAAfG,EAAI4J,OACN,OAAO,EAGJ,QAAgB,IAAZ/J,GAAkC,OAAZA,EAAkB,CAC/C,IAAI2M,EAAgBxM,EAAIyM,UAAY5M,EAAQ4M,UACxCC,EAAkBhS,KAAKiS,KAAKjS,KAAKiI,IAAI3C,EAAI+I,QAAUlJ,EAAQkJ,QAAS,GAAKrO,KAAKiI,IAAI3C,EAAIgJ,QAAUnJ,EAAQmJ,QAAS,IAErH,OAAOwD,EAAgB,KAAOE,EAAkB,GAIlD,OAAO,GAQT/M,IAAKD,KAAKC,KAAO,WACf,OAAO,IAAID,MAAOkN,WAWpBvE,SAAU,SAASwE,EAAMC,EAAM/T,GAC7B,IACIgT,EAASgB,EAAM1M,EADf5B,EAAOxJ,KAEP8V,EAAU,KACViC,EAAW,EACVjU,IAASA,MACd,IAAIkU,EAAQ,WACVD,GAA+B,IAApBjU,EAAQmU,QAAoB,EAAIzO,EAAKkB,MAChDoL,EAAU,KACV1K,EAASwM,EAAKb,MAAMD,EAASgB,GACxBhC,IAASgB,EAAUgB,EAAO,OAEjC,OAAO,WACL,IAAIpN,EAAMlB,EAAKkB,MACVqN,IAAgC,IAApBjU,EAAQmU,UAAmBF,EAAWrN,GACvD,IAAIwN,EAAYL,GAAQnN,EAAMqN,GAY9B,OAXAjB,EAAU9W,KACV8X,EAAOd,UACHkB,GAAa,GAAKA,EAAYL,GAChCM,aAAarC,GACbA,EAAU,KACViC,EAAWrN,EACXU,EAASwM,EAAKb,MAAMD,EAASgB,GACxBhC,IAASgB,EAAUgB,EAAO,OACrBhC,IAAgC,IAArBhS,EAAQsU,WAC7BtC,EAAUjC,WAAWmE,EAAOE,IAEvB9M,IAYX1G,4BAA6B,SAASC,GACpC,IAAImR,EAAU,KAOd,MAJoB,SAAhBnR,GAA0BA,EAAc,IAAMA,EAAc,IAC9DmR,EAAUrQ,KAAK4S,MAAM,IAAO1T,IAGd,OAAZmR,EACKjW,OAAO4E,uBAAyBoR,EAAe,IAE/CA,EAAeC,UAiBtBwC,GAAG,SAAS5X,EAAQhB,EAAOD,GACjC,aACA,IAAI8Y,EAAe7X,EAAQ,gBACvB8X,EAAa,WACb,SAASA,EAAUC,GACfzY,KAAK0Y,OAAS,IAAIH,EAAaI,WAC/B3Y,KAAKyY,MAAQA,EAsBjB,OAnBAD,EAAUxU,UAAU4U,OAAS,WAEzB,OADA5Y,KAAK0Y,OAAOG,SACL7Y,KAAK0Y,OAAOjX,KAGvB+W,EAAUxU,UAAUD,KAAO,WACvB/D,KAAK0Y,OAAO3U,QAGhByU,EAAUxU,UAAU8U,QAAU,SAAUC,EAAMzE,GAC1C,IAAInU,EAAIH,KAAKyY,MAAMnE,GACfnU,EACAH,KAAK0Y,OAAOI,QAAQC,EAAM5Y,EAAE6Y,QAAS7Y,EAAE8Y,OAAQ3E,EAAMnU,EAAE+Y,WAAY,EAAO/Y,EAAEgZ,MAAO,GAAI,IAGvFC,QAAQjM,IAAI,oBAAsBmH,EAAO,gBAI1CkE,KAEX9Y,EAAOD,SACH4Z,UAAWb,KAKZc,eAAe,KAAKC,GAAG,SAAS7Y,EAAQhB,EAAOD,GAClD,aACA4W,OAAOmD,eAAe/Z,EAAS,cAAgBga,OAAO,IACtD,IAAIC,EAAchZ,EAAQ,eACtBiZ,EAAY,6BAEZC,EAAQ,WACR,SAASA,EAAKC,EAAOb,EAASC,EAAQ3E,EAAM4E,EAAUY,EAAS3V,EAAGC,GAC9D,IAAIrE,EAAOC,KACXA,KAAK6Z,MAAQA,EACb7Z,KAAKsU,KAAOA,EACZtU,KAAK+Z,UACL/Z,KAAK8Z,QAAUA,EACf9Z,KAAKkZ,SAAWA,EAChBlZ,KAAKgZ,QAAUA,EACfhZ,KAAKga,UACD7V,EAAGA,EACHC,EAAGA,GAEPpE,KAAKiZ,OAASA,EACdjZ,KAAKia,MAAQja,KAAKiZ,OAAOjY,OAAS,EAClChB,KAAKka,YAAc,KACnBla,KAAKma,oBACLna,KAAKiZ,OAAOmB,QAAQ,SAAUpE,GAC1BjW,EAAKga,OAAO/D,EAAK+C,MAAQ,IAAIW,EAAYW,UAAUrE,EAAK+C,KAAM/C,EAAK1B,KAAM0B,EAAKsE,KAAMva,EAAMiW,EAAKlS,WA0IvG,OAtIA8V,EAAK5V,UAAU6U,OAAS,SAAU0B,GAC9B,IAAIxa,EAAOC,KACX,IAAKA,KAAKwa,EAAG,CACTxa,KAAKwa,EAAI7Y,SAASC,gBAAgB+X,EAAW,KAC7C3Z,KAAKwa,EAAExY,aAAa,YAAa,aAAehC,KAAKga,SAAS7V,EAAI,IAAMnE,KAAKga,SAAS5V,EAAI,KAC1FpE,KAAKwa,EAAExY,aAAa,QAAS,UAC7BhC,KAAKmX,KAAOxV,SAASC,gBAAgB+X,EAAW,QAChD3Z,KAAKmX,KAAKnV,aAAa,QAAS,OAChChC,KAAKmX,KAAKnV,aAAa,KAAM,KAC7BhC,KAAKmX,KAAKnV,aAAa,UAhClB,GAgC8BhC,KAAKia,MAAsB,GAAG3D,YACjEtW,KAAKmX,KAAKnV,aAAa,QAAS,aAChChC,KAAKya,gBAAkB,SAAU1P,GACzB/K,KAAKka,uBAAuBQ,UAC5B1a,KAAKka,YAAYnP,EAAK/K,OAE5B2a,KAAK3a,MACPA,KAAKmX,KAAKzU,iBAAiB,YAAa1C,KAAKya,iBAC7C,IAAIta,EAAIwB,SAASC,gBAAgB+X,EAAW,QAC5CxZ,EAAE8B,YAAcjC,KAAK6Z,MACrB1Z,EAAEya,UAAUC,IAAI,SAChB1a,EAAE6B,aAAa,IAAK,KACpB7B,EAAE6B,aAAa,IAAK,MACpBhC,KAAKwa,EAAE1Y,YAAY9B,KAAKmX,MACxBnX,KAAKwa,EAAE1Y,YAAY3B,GACnB,IAAI2a,EAASnZ,SAASC,gBAAgB+X,EAAW,UACjD3Z,KAAK8a,OAASA,EACd9a,KAAK+a,cACD5W,EAAG,IACHC,EAnDC,GAmDGpE,KAAKia,MAAsB,IAEnCa,EAAO9Y,aAAa,KAAOhC,KAAK+a,aAAc,EAAEzE,YAChDwE,EAAO9Y,aAAa,KAAOhC,KAAK+a,aAAc,EAAEzE,YAChDwE,EAAO9Y,aAAa,IAAK,KACzB8Y,EAAO9Y,aAAa,QAAS,UAC7BhC,KAAKgb,kBAAoB,SAAUjQ,GAC3B/K,KAAKib,2BAA2BP,UAChC1a,KAAKib,gBAAgBlQ,EAAK/K,OAEhC2a,KAAK3a,MACP8a,EAAOpY,iBAAiB,YAAa1C,KAAKgb,mBAC1C,IAAIE,EAAavZ,SAASC,gBAAgB+X,EAAW,QACrDuB,EAAWjZ,YAAc,IAAMjC,KAAKsU,KAAO,IAC3C4G,EAAWN,UAAUC,IAAI,eACzBK,EAAWlZ,aAAa,IAAK,KAAMsU,YACnC4E,EAAWlZ,aAAa,IAAMhC,KAAK+a,aAAc,EAAEzE,YACnDtW,KAAKwa,EAAE1Y,YAAYgZ,GACnB9a,KAAKwa,EAAE1Y,YAAYoZ,GACnBlb,KAAKmb,SAAWxZ,SAASC,gBAAgB+X,EAAW,UACpD3Z,KAAKmb,SAASP,UAAUC,IAAI,aAC5B7a,KAAKmb,SAASnZ,aAAa,KAAM,OACjChC,KAAKmb,SAASnZ,aAAa,IAAK,KAChChC,KAAKmb,SAASnZ,aAAa,KAAM,MACjChC,KAAKob,MAAQ,WACTpb,KAAKqb,UACPV,KAAK3a,MACPA,KAAKmb,SAASzY,iBAAiB,QAAS1C,KAAKob,OAC7Cpb,KAAKwa,EAAE1Y,YAAY9B,KAAKmb,UACxBZ,EAAOzY,YAAY9B,KAAKwa,GAE5B,IAAI7Z,EAAI,EACR0V,OAAOiF,KAAKtb,KAAK+Z,QAAQK,QAAQ,SAAUmB,GACnCxb,EAAKga,OAAO7N,eAAeqP,IACjBxb,EAAKga,OAAOwB,GAClB1C,OAAO9Y,EAAKya,EAAG7Z,QAK/BiZ,EAAK5V,UAAUwX,KAAO,SAAUrX,EAAGC,GAC/B,IAAIrE,EAAOC,KACXA,KAAKga,UACD7V,EAAGA,EACHC,EAAGA,GAEPpE,KAAKma,iBAAiBC,QAAQ,SAAUqB,GACpCA,EAAIC,IACAvX,EAAGA,EAAIpE,EAAKgb,aAAa5W,EACzBC,EAAGA,EAAIrE,EAAKgb,aAAa3W,GAE7BqX,EAAIE,YAERtF,OAAOiF,KAAKtb,KAAK+Z,QAAQK,QAAQ,SAAUmB,GACnCxb,EAAKga,OAAO7N,eAAeqP,IACjBxb,EAAKga,OAAOwB,GAClBK,2BAGZ5b,KAAKwa,EAAExY,aAAa,YAAa,aAAehC,KAAKga,SAAS7V,EAAI,IAAMnE,KAAKga,SAAS5V,EAAI,MAG9FwV,EAAK5V,UAAU6X,MAAQ,WACnB,GAAK7b,KAAK8b,MAYN,OAAI9b,KAAKkZ,SACElZ,KAAK8Z,QAAQ9Z,KAAK8b,OAGlB9b,KAAK8b,MAfhB,IAAIC,KAAgBC,KAAmBjc,EAAOC,KAQ9C,OAPAgc,EAAehc,KAAKiZ,OAAO5T,OAAO,SAAU4W,GACxC,OAAOA,EAAEC,UAEbH,EAAYC,EAAazW,IAAI,SAAU0W,GACnC,OAAOlc,EAAKga,OAAOkC,EAAElD,MAAMoD,aAE/Bnc,KAAK8b,MAAQ9b,KAAKgZ,QAAQjC,MAAM/W,KAAM+b,GAC/B/b,KAAK8b,OAYpBlC,EAAK5V,UAAUqX,OAAS,WACpB,IAAItb,EAAOC,KACXqW,OAAOiF,KAAKtb,KAAK+Z,QAAQK,QAAQ,SAAUmB,GACvC,GAAIxb,EAAKga,OAAO7N,eAAeqP,GAAI,CAC/B,IAAIa,EAAMrc,EAAKga,OAAOwB,GAClBa,EAAIC,gBACJD,EAAIC,eAAehB,eAK5BiB,OAAOtc,KAAKma,kBAAkBC,QAAQ,SAAUqB,GAC/CA,EAAIJ,WAEJrb,KAAKuc,oBAAoB7B,UACzB1a,KAAKuc,WAETvc,KAAKmb,SAASvL,oBAAoB,QAAS5P,KAAKob,OAChDpb,KAAKmX,KAAKvH,oBAAoB,YAAa5P,KAAKya,iBAChDza,KAAK8a,OAAOpY,iBAAiB,YAAa1C,KAAKgb,oBAG5CpB,KAEXna,EAAQma,KAAOA,IAIZ4C,cAAc,KAAKC,IAAI,SAAS/b,EAAQhB,EAAOD,GAClD,aACA4W,OAAOmD,eAAe/Z,EAAS,cAAgBga,OAAO,IACtD,IAAIiD,EAAahc,EAAQ,gBACrBic,EAASjc,EAAQ,UACjBkc,EAAkBlc,EAAQ,mBAC1BiZ,EAAY,6BACZhB,EAAc,WACd,SAASA,IACL3Y,KAAKyB,IAAM,KACXzB,KAAKwa,EAAI,KACTxa,KAAK6c,MAAQ,KACb7c,KAAK8c,SACL9c,KAAK+c,GAAK,KACV/c,KAAKgd,eAAiB,KACtBhd,KAAKid,iBAAmB,KACxBjd,KAAKkd,KAAO,KAgKhB,OA9JAvE,EAAW3U,UAAUmZ,YAAc,SAAUpS,GAGzC,OAFA/K,KAAK+c,GAAG5Y,EAAI4G,EAAI+I,QAChB9T,KAAK+c,GAAG3Y,EAAI2G,EAAIgJ,QACT/T,KAAK+c,GAAGtP,gBAAgBzN,KAAKyB,IAAI4L,eAAeC,YAG3DqL,EAAW3U,UAAU6U,OAAS,WAC1B,IAAI9Y,EAAOC,KACNA,KAAKyB,MACNzB,KAAKyB,IAAME,SAASC,gBAAgB+X,EAAW,OAC/C3Z,KAAKyB,IAAIO,aAAa,QAAS,aAC/BhC,KAAK+c,GAAK/c,KAAKyB,IAAIgN,iBACnBzO,KAAKyB,IAAIuR,eAAe,gCAAiC,QAAS2G,GAClE3Z,KAAKyB,IAAIuR,eAAe,gCAAiC,cAAe,gCACxEhT,KAAKyB,IAAIO,aAAa,QAAS,QAC/BhC,KAAKyB,IAAIO,aAAa,SAAU,QAChChC,KAAKwa,EAAI7Y,SAASC,gBAAgB+X,EAAW,KAC7C3Z,KAAK6c,MAAQlb,SAASC,gBAAgB+X,EAAW,KACjD3Z,KAAKwa,EAAEI,UAAUC,IAAI,yBACrB7a,KAAKwa,EAAExY,aAAa,YAAa,uBACjChC,KAAKwa,EAAE1Y,YAAY9B,KAAK6c,OACxB7c,KAAKyB,IAAIK,YAAY9B,KAAKwa,IAE9Bxa,KAAK8c,MAAM1C,QAAQ,SAAUgD,GACzBA,EAAKvE,OAAO9Y,EAAKya,MAIzB7B,EAAW3U,UAAU8U,QAAU,SAAUe,EAAOb,EAASC,EAAQ3E,EAAM4E,EAAUY,EAAS3V,EAAGC,GAEzF,SAASiZ,EAAc9c,GACnB,IAAI4D,EAAI5D,EAAE4D,EAAGC,EAAI7D,EAAE6D,EACnB,OACID,EAAIkE,EAAI5H,EAAI0D,EAAMkE,EAAIhB,EAAIjD,EAAKiE,EAAInI,EAAIod,EAAOlG,KAC9ChT,EAAIiE,EAAIjB,EAAIjD,EAAMkE,EAAI9B,EAAInC,EAAKiE,EAAI7I,EAAI8d,EAAOhG,KAGtD,SAASiG,EAAiBxS,GACtB,GAAIhL,EAAKid,eAAgB,CACrB,IAAIf,EAAIlc,EAAKod,YAAYpS,GACzBkR,EAAE9X,EAAI8X,EAAE9X,EAAIpE,EAAKmd,KAAK/Y,EACtB8X,EAAE7X,EAAI6X,EAAE7X,EAAIrE,EAAKmd,KAAK9Y,EACtB,IAAIoZ,EAAKH,EAAcpB,GACvBlc,EAAKid,eAAexB,KAAKgC,EAAGrZ,EAAGqZ,EAAGpZ,IAG1C,SAASqZ,EAAe1S,GACpBhL,EAAK0B,IAAImO,oBAAoB,YAAa2N,GAC1Cxd,EAAK0B,IAAImO,oBAAoB,UAAW6N,GACxCF,EAAiBxS,GACjBhL,EAAKid,eAAiB,KAE1B,SAASU,EAA0B3S,GAC/B,IAAIkR,EAAIoB,EAActd,EAAKod,YAAYpS,IACvChL,EAAKkd,iBAAiBU,aAAa1B,GAEvC,SAAS2B,EAAwB7S,GAC7B,IAAIkR,EAAIoB,EAActd,EAAKod,YAAYpS,IACvChL,EAAK0B,IAAImO,oBAAoB,YAAa8N,GAC1C3d,EAAK0B,IAAImO,oBAAoB,UAAWgO,GACxC,IACIC,KADUvL,MAAMvR,KAAKY,SAAS2R,iBAAiB,oBAC7B/N,IAAI,SAAUuY,GAChC,IAAIC,EAAMD,EAAIE,YAAYC,iBAE1B,OACIC,KAFOzY,KAAKiS,KAAKjS,KAAKiI,IAAIuO,EAAE9X,EAAI4Z,EAAI5Z,EAAG,GAAKsB,KAAKiI,IAAIuO,EAAE7X,EAAI2Z,EAAI3Z,EAAG,IAGlE0Z,IAAKA,KAEVzY,OAAO,SAAUyY,GAChB,OAAOA,EAAII,MAAQ,KACpBC,KAAK,SAAU1d,EAAG2G,GACjB,OAAO3G,EAAEyd,KAAO9W,EAAE8W,OAElBL,EAAW7c,OAAS,GAChB6c,EAAW,GAAGC,IAAIE,YAAY3B,gBAC9BwB,EAAW,GAAGC,IAAIE,YAAY3B,eAAehB,SAEjDwC,EAAW,GAAGC,IAAIE,YAAY3B,eAAiBtc,EAAKkd,iBACpDld,EAAKkd,iBAAiBmB,KAAOP,EAAW,GAAGC,IAAIE,YACP,QAApCje,EAAKkd,iBAAiBmB,KAAK9J,MAAmBvU,EAAKkd,iBAAiBmB,KAAK9J,OAASvU,EAAKkd,iBAAiBoB,KAAK/J,MAC7GvU,EAAKkd,iBAAiB5B,SAEtBtb,EAAKkd,iBAAiBoB,OAASR,EAAW,GAAGC,IAAIE,YAAYza,YAC7DxD,EAAKkd,iBAAiB5B,SAE1BwC,EAAW,GAAGC,IAAIE,YAAYpC,0BAG9B7b,EAAKkd,iBAAiB5B,SAE1Btb,EAAKkd,iBAAmB,KA7D5B,IAAI7c,EAAI,IAAIuc,EAAO/C,KAAKC,EAAOb,EAASC,EAAQ3E,EAAM4E,EAAUY,EAAS3V,EAAGC,GAAIrE,EAAOC,KAAMqI,EAAM,KAAMiV,EAAS,KA+DlHtd,KAAK8c,MAAM1L,KAAKhR,GAChBA,EAAE6a,gBAAkB,SAAUlQ,EAAKuT,GACvBve,EAAKod,YAAYpS,GACzB1C,EAAMtI,EAAKya,EAAEtU,SAASoH,UACtBgQ,EAASvd,EAAK0B,IAAIwQ,wBAClB,IAAIuL,GACArZ,EAAGma,EAAOtE,SAAS7V,EAAIoa,SAASD,EAAOxD,OAAO5V,aAAa,OAC3Dd,EAAGka,EAAOtE,SAAS5V,EAAIma,SAASD,EAAOxD,OAAO5V,aAAa,QAE/DnF,EAAKkd,iBAAmB,IAAIL,EAAgB4B,cAAchB,EAAIc,GAC9DA,EAAOnE,iBAAiB/I,KAAKrR,EAAKkd,kBAClCld,EAAK8c,MAAM/a,YAAY/B,EAAKkd,iBAAiBwB,MAC7C1e,EAAK0B,IAAIiB,iBAAiB,YAAagb,GACvC3d,EAAK0B,IAAIiB,iBAAiB,UAAWkb,GACrC7S,EAAI2T,mBAERte,EAAE8Z,YAAc,SAAUnP,EAAKuT,GAC3B,IAAIrC,EAAIlc,EAAKod,YAAYpS,GACzB1C,EAAMtI,EAAKya,EAAEtU,SACboX,EAASvd,EAAK0B,IAAIwQ,wBAClB,IAAI0M,EAAStB,EAAciB,EAAOtE,UAClCja,EAAKmd,MACD/Y,EAAG8X,EAAE9X,EAAIwa,EAAOxa,EAChBC,EAAG6X,EAAE7X,EAAIua,EAAOva,GAEpBiE,EAAMA,EAAIiF,UACVvC,EAAI2T,kBACJ3e,EAAKid,eAAiBsB,EAClBve,EAAKid,iBACLjd,EAAK0B,IAAIiB,iBAAiB,YAAa6a,GACvCxd,EAAK0B,IAAIiB,iBAAiB,UAAW+a,KAE3C9C,KAAK3a,MACPI,EAAEmc,SAAW,WACTnc,EAAE6a,gBAAkB,KACpB7a,EAAE8Z,YAAc,KAChB,IAAI0E,EAAM7e,EAAK+c,MAAMhO,QAAQ1O,GACzBwe,GAAO,GACP7e,EAAK+c,MAAM/H,OAAO6J,EAAK,GAE3B7e,EAAKya,EAAEhX,YAAYpD,EAAEoa,KAI7B7B,EAAW3U,UAAUD,KAAO,WACxB/D,KAAKyB,IAAIO,aAAa,UAAW,OAAShC,KAAKyB,IAAIsQ,YAAc,IAAM/R,KAAKyB,IAAIuQ,cAChFhS,KAAK6e,WAAanC,EAAW1c,KAAKyB,KAC9B0H,qBAAsB,GACtBH,qBAAqB,KAI7B2P,EAAW3U,UAAU8a,MAAQ,cAEZxC,OAAOtc,KAAK8c,OACrB1C,QAAQ,SAAUgD,GAClBA,EAAK/B,YAIb1C,EAAW3U,UAAU+a,iBAAmB,WACpC,OAAO/e,KAAK8c,MAAMzX,OAAO,SAAUjF,GAC/B,OAAqC,IAA9BA,EAAE+Z,iBAAiBnZ,UAI3B2X,KAEXlZ,EAAQkZ,WAAaA,IAIlBqG,SAAS,EAAEC,kBAAkB,GAAGC,eAAe,IAAIC,IAAI,SAASze,EAAQhB,EAAOD,GAClF,aACA4W,OAAOmD,eAAe/Z,EAAS,cAAgBga,OAAO,IACtD,IAAIE,EAAY,6BACZ6E,EAAiB,WACjB,SAASA,EAAc9C,EAAI0B,GACvBpd,KAAK0b,GAAKA,EACV1b,KAAKof,GAAK1D,EACV1b,KAAKqe,KAAOjB,EACZpd,KAAKoe,KAAO,KACZpe,KAAKye,KAAO9c,SAASC,gBAAgB+X,EAAW,QAChD3Z,KAAK2b,UAmCT,OAhCA6C,EAAcxa,UAAU2X,QAAU,WAC9B,IAAI0D,GACAlb,GAAKnE,KAAKof,GAAGjb,EAAInE,KAAK0b,GAAGvX,GAAK,EAAKnE,KAAK0b,GAAGvX,EAC3CC,EAAGpE,KAAK0b,GAAGtX,GACZkb,GACCnb,IAAMnE,KAAKof,GAAGjb,EAAInE,KAAK0b,GAAGvX,GAAK,EAAKnE,KAAKof,GAAGjb,EAC5CC,EAAGpE,KAAKof,GAAGhb,GAEfpE,KAAKye,KAAKzc,aAAa,IAAK,IAAMhC,KAAK0b,GAAGvX,EAAI,IAAMnE,KAAK0b,GAAGtX,EAAI,KAAOib,EAAGlb,EAAI,IAAMkb,EAAGjb,EAAI,IAAMkb,EAAGnb,EAAI,IAAMmb,EAAGlb,EAAI,IAAMpE,KAAKof,GAAGjb,EAAI,IAAMnE,KAAKof,GAAGhb,IAGzJoa,EAAcxa,UAAUqX,OAAS,WAC7B,GAAIrb,KAAKqe,KAAM,CACX,IAAIO,EAAM5e,KAAKqe,KAAKlE,iBAAiBrL,QAAQ9O,MACzC4e,GAAO,GACP5e,KAAKqe,KAAKlE,iBAAiBpF,OAAO6J,EAAK,GAE3C5e,KAAKqe,KAAO,KAEZre,KAAKoe,OACLpe,KAAKoe,KAAK/B,eAAiB,MAE3Brc,KAAKye,OACLze,KAAKye,KAAKlb,WAAWC,YAAYxD,KAAKye,MACtCze,KAAKye,KAAO,OAIpBD,EAAcxa,UAAU2Z,aAAe,SAAU1T,GAC7CjK,KAAKof,GAAKnV,EACVjK,KAAK2b,WAEF6C,KAEX/e,EAAQ+e,cAAgBA,OAIlBe,IAAI,SAAS7e,EAAQhB,EAAOD,GAClC,aACA4W,OAAOmD,eAAe/Z,EAAS,cAAgBga,OAAO,IACtD,IAAIE,EAAY,6BAEZU,EAAa,WACb,SAASA,EAAUtB,EAAMzE,EAAMgG,EAAM8C,EAAMtZ,GACvC9D,KAAK+Y,KAAOA,EACZ/Y,KAAKsU,KAAOA,EACZtU,KAAKsa,KAAOA,EACZta,KAAK8D,QAAUA,EACf9D,KAAKqc,eAAiB,KACtBrc,KAAKwf,mBAAqB,KAC1Bxf,KAAKyf,UAAY,KACjBzf,KAAK0f,QAAU,KACf1f,KAAKuD,WAAa6Z,EAoLtB,OAlLA/C,EAAUrW,UAAU6U,OAAS,SAAU0B,EAAQP,GAC3C,IAAIja,EAAOC,KACX,IAAKA,KAAKyf,UAAW,CACjB,IAAIE,EAAMhe,SAASC,gBAAgB+X,EAAW,KAO9C,GANA3Z,KAAK0f,SACDvb,EAAG,EACHC,EAnBC,GAmBI4V,EAAyB,GAElC2F,EAAI3d,aAAa,YAAa,aAAehC,KAAK0f,QAAQvb,EAAI,KAAOnE,KAAK0f,QAAQtb,EAAI,KACtFub,EAAI3d,aAAa,QAAS,OACR,SAAdhC,KAAKsa,KAAiB,CACtB,IAAInD,EAAOxV,SAASC,gBAAgB+X,EAAW,QAASiG,EAAKje,SAASC,gBAAgB+X,EAAW,iBAAkBkG,EAASle,SAASC,gBAAgB+X,EAAW,QAASmG,EAAMne,SAASC,gBAAgB,+BAAgC,OACxOie,EAAO5d,YAAcjC,KAAK+Y,KAC1B8G,EAAO7d,aAAa,IAAK,MACzB6d,EAAO7d,aAAa,IAAK,KACzBmV,EAAKnV,aAAa,IAAK,KACvB8d,EAAI9d,aAAa,QAAS,gCAC1B,IAAI+d,EAAUpe,SAAS8T,cAAc,SACrC,OAAQzV,KAAKsU,MACT,IAAK,QACDtU,KAAKwf,mBAAqB,WAGtB,GAFAO,EAAQra,IAAM1F,KAAK8D,QAAQ,GAC3Bic,EAAQzZ,IAAMtG,KAAK8D,QAAQ,GACvBic,EAAQtG,OAASsG,EAAQzZ,KAAOyZ,EAAQtG,OAASsG,EAAQra,IACzD,OAAOqa,EAAQtG,OAMvBsG,EAAQzL,KAAOtU,KAAKsU,KACpBwL,EAAIhe,YAAYie,GAChB,MACJ,IAAK,OAOL,IAAK,SAOL,IAAK,QAOL,IAAK,OACD/f,KAAKwf,mBAAqB,WACtB,OAAOO,EAAQtG,OAEnBsG,EAAQzL,KAAOtU,KAAKsU,KACpBwL,EAAIhe,YAAYie,GAChB,MACJ,IAAK,QACD/f,KAAKwf,mBAAqB,WAEtB,OADApG,QAAQjM,IAAI4S,EAAQtG,OACbsG,EAAQtG,OAEnBsG,EAAQzL,KAAOtU,KAAKsU,KACpBwL,EAAIhe,YAAYie,GAChB,MACJ,IAAK,SACD,IAAIC,EAAere,SAAS8T,cAAc,UAC1CzV,KAAK8D,QAAQsW,QAAQ,SAAU6F,GAC3B,IAAIC,EAAave,SAAS8T,cAAc,UACxCyK,EAAWje,YAAcge,EAAGE,KAAK7J,WACjC4J,EAAWle,aAAa,QAASie,EAAGG,MACpCJ,EAAale,YAAYoe,KAE7BlgB,KAAKwf,mBAAqB,WACtB,OAAOQ,EAAavG,OAExBqG,EAAIhe,YAAYke,GAChB,MACJ,IAAK,QACD,IAAIK,EAAM1e,SAAS8T,cAAc,UACjC4K,EAAIzF,UAAUC,IAAI,aAClBwF,EAAIpe,YAAc,SAClB,IAAIqe,EAAU3e,SAAS8T,cAAc,OACrC6K,EAAQ1F,UAAUC,IAAI,mBACtB,IAAI0F,EAAa5e,SAAS8T,cAAc,OACxC8K,EAAW3F,UAAUC,IAAI,SACzB,IAAI2F,EAAe7e,SAAS8T,cAAc,OAC1C+K,EAAa5F,UAAUC,IAAI,WAC3B,IAAI4F,EAAc9e,SAAS8T,cAAc,OACzCgL,EAAY7F,UAAUC,IAAI,UAC1B,IAAI6F,EAAkB/e,SAAS8T,cAAc,OAC7CiL,EAAgB9F,UAAUC,IAAI,QAC9B6F,EAAgB1e,aAAa,kBAAmB,QAChD,IAAI2e,EAAUhf,SAAS8T,cAAc,OACrCkL,EAAQ/F,UAAUC,IAAI,MACtBwF,EAAI3d,iBAAiB,QAAS,WAC1B4d,EAAQ1F,UAAUC,IAAI,aAK1ByF,EAAQxe,YAAYye,GACpBD,EAAQxe,YAAY2e,GACpBA,EAAY3e,YAAY0e,GACxBA,EAAa1e,YAAY4e,GACzBF,EAAa1e,YAAY6e,GACzBA,EAAQje,iBAAiB,QARX,WACV4d,EAAQ1F,UAAUS,OAAO,aAQ7Brb,KAAKwf,mBAAqB,WACtB,OAAOkB,EAAgBze,aAE3BN,SAASif,KAAK9e,YAAYwe,GAC1BR,EAAIhe,YAAYue,GAGxBT,EAAG9d,YAAYge,GACfF,EAAG5d,aAAa,YAAa,mBAE7B2d,EAAI7d,YAAY+d,GAChBF,EAAI7d,YAAY8d,GAEpB,GAAkB,OAAd5f,KAAKsa,KAAe,CACpB,IAAIuG,EAASlf,SAASC,gBAAgB+X,EAAW,QAASrF,EAAO3S,SAASC,gBAAgB+X,EAAW,QAASmE,EAAMnc,SAASC,gBAAgB+X,EAAW,UACxJmE,EAAI9b,aAAa,KAAM,MACvB8b,EAAI9b,aAAa,KAAM,MACvB8b,EAAI9b,aAAa,IAAK,KACtB8b,EAAI9b,aAAa,QAAS,OAC1B8b,EAAIpb,iBAAiB,QAAS,SAAUqI,GAChChL,EAAKsc,gBACLtc,EAAKsc,eAAehB,SAExBtQ,EAAI2T,oBAERZ,EAAiB,YAAI9d,KACrB6gB,EAAO5e,YAAcjC,KAAK+Y,KAC1B8H,EAAO7e,aAAa,IAAK,MACzB6e,EAAO7e,aAAa,IAAK,KACzBsS,EAAKrS,YAAc,IAAMjC,KAAKsU,KAAO,IACrCA,EAAKsG,UAAUC,IAAI,cACnBvG,EAAKtS,aAAa,IAAK,MACvBsS,EAAKtS,aAAa,IAAK,MACvBhC,KAAKwf,mBAAqB,WACtB,GAAIxf,KAAKqc,eACL,OAAOrc,KAAKqc,eAAegC,KAAKxC,SAIxC8D,EAAI7d,YAAY+e,GAChBlB,EAAI7d,YAAYwS,GAChBqL,EAAI7d,YAAYgc,GAEpB9d,KAAKyf,UAAYE,EACjBpF,EAAOzY,YAAY6d,KAI3BtF,EAAUrW,UAAUia,eAAiB,WACjC,OACI9Z,EAAGnE,KAAKuD,WAAWyW,SAAS7V,EAAInE,KAAK0f,QAAQvb,EAAI,EACjDC,EAAGpE,KAAKuD,WAAWyW,SAAS5V,EAAIpE,KAAK0f,QAAQtb,EAAI,KAIzDiW,EAAUrW,UAAU4X,uBAAyB,WACrC5b,KAAKqc,iBACLrc,KAAKqc,eAAe+C,GAAKpf,KAAKie,iBAC9Bje,KAAKqc,eAAeV,YAG5BtB,EAAUrW,UAAUmY,SAAW,WAC3B,OAAInc,KAAKwf,8BAA8B9E,SAC5B1a,KAAKwf,qBAET,MAEJnF,KAEX5a,EAAQ4a,UAAYA,YAIT,IAAI","file":"codenodes.min.js","sourcesContent":["(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.codenodes = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\nvar SvgPanZoom = require('./svg-pan-zoom.js');\n\nmodule.exports = SvgPanZoom;\n\n},{\"./svg-pan-zoom.js\":4}],2:[function(require,module,exports){\nvar SvgUtils = require('./svg-utilities');\n\nmodule.exports = {\n  enable: function(instance) {\n    // Select (and create if necessary) defs\n    var defs = instance.svg.querySelector('defs')\n    if (!defs) {\n      defs = document.createElementNS(SvgUtils.svgNS, 'defs')\n      instance.svg.appendChild(defs)\n    }\n\n    // Check for style element, and create it if it doesn't exist\n    var styleEl = defs.querySelector('style#svg-pan-zoom-controls-styles');\n    if (!styleEl) {\n      var style = document.createElementNS(SvgUtils.svgNS, 'style')\n      style.setAttribute('id', 'svg-pan-zoom-controls-styles')\n      style.setAttribute('type', 'text/css')\n      style.textContent = '.svg-pan-zoom-control { cursor: pointer; fill: black; fill-opacity: 0.333; } .svg-pan-zoom-control:hover { fill-opacity: 0.8; } .svg-pan-zoom-control-background { fill: white; fill-opacity: 0.5; } .svg-pan-zoom-control-background { fill-opacity: 0.8; }'\n      defs.appendChild(style)\n    }\n\n    // Zoom Group\n    var zoomGroup = document.createElementNS(SvgUtils.svgNS, 'g');\n    zoomGroup.setAttribute('id', 'svg-pan-zoom-controls');\n    zoomGroup.setAttribute('transform', 'translate(' + ( instance.width - 70 ) + ' ' + ( instance.height - 76 ) + ') scale(0.75)');\n    zoomGroup.setAttribute('class', 'svg-pan-zoom-control');\n\n    // Control elements\n    zoomGroup.appendChild(this._createZoomIn(instance))\n    zoomGroup.appendChild(this._createZoomReset(instance))\n    zoomGroup.appendChild(this._createZoomOut(instance))\n\n    // Finally append created element\n    instance.svg.appendChild(zoomGroup)\n\n    // Cache control instance\n    instance.controlIcons = zoomGroup\n  }\n\n, _createZoomIn: function(instance) {\n    var zoomIn = document.createElementNS(SvgUtils.svgNS, 'g');\n    zoomIn.setAttribute('id', 'svg-pan-zoom-zoom-in');\n    zoomIn.setAttribute('transform', 'translate(30.5 5) scale(0.015)');\n    zoomIn.setAttribute('class', 'svg-pan-zoom-control');\n    zoomIn.addEventListener('click', function() {instance.getPublicInstance().zoomIn()}, false)\n    zoomIn.addEventListener('touchstart', function() {instance.getPublicInstance().zoomIn()}, false)\n\n    var zoomInBackground = document.createElementNS(SvgUtils.svgNS, 'rect'); // TODO change these background space fillers to rounded rectangles so they look prettier\n    zoomInBackground.setAttribute('x', '0');\n    zoomInBackground.setAttribute('y', '0');\n    zoomInBackground.setAttribute('width', '1500'); // larger than expected because the whole group is transformed to scale down\n    zoomInBackground.setAttribute('height', '1400');\n    zoomInBackground.setAttribute('class', 'svg-pan-zoom-control-background');\n    zoomIn.appendChild(zoomInBackground);\n\n    var zoomInShape = document.createElementNS(SvgUtils.svgNS, 'path');\n    zoomInShape.setAttribute('d', 'M1280 576v128q0 26 -19 45t-45 19h-320v320q0 26 -19 45t-45 19h-128q-26 0 -45 -19t-19 -45v-320h-320q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h320v-320q0 -26 19 -45t45 -19h128q26 0 45 19t19 45v320h320q26 0 45 19t19 45zM1536 1120v-960 q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5t84.5 -203.5z');\n    zoomInShape.setAttribute('class', 'svg-pan-zoom-control-element');\n    zoomIn.appendChild(zoomInShape);\n\n    return zoomIn\n  }\n\n, _createZoomReset: function(instance){\n    // reset\n    var resetPanZoomControl = document.createElementNS(SvgUtils.svgNS, 'g');\n    resetPanZoomControl.setAttribute('id', 'svg-pan-zoom-reset-pan-zoom');\n    resetPanZoomControl.setAttribute('transform', 'translate(5 35) scale(0.4)');\n    resetPanZoomControl.setAttribute('class', 'svg-pan-zoom-control');\n    resetPanZoomControl.addEventListener('click', function() {instance.getPublicInstance().reset()}, false);\n    resetPanZoomControl.addEventListener('touchstart', function() {instance.getPublicInstance().reset()}, false);\n\n    var resetPanZoomControlBackground = document.createElementNS(SvgUtils.svgNS, 'rect'); // TODO change these background space fillers to rounded rectangles so they look prettier\n    resetPanZoomControlBackground.setAttribute('x', '2');\n    resetPanZoomControlBackground.setAttribute('y', '2');\n    resetPanZoomControlBackground.setAttribute('width', '182'); // larger than expected because the whole group is transformed to scale down\n    resetPanZoomControlBackground.setAttribute('height', '58');\n    resetPanZoomControlBackground.setAttribute('class', 'svg-pan-zoom-control-background');\n    resetPanZoomControl.appendChild(resetPanZoomControlBackground);\n\n    var resetPanZoomControlShape1 = document.createElementNS(SvgUtils.svgNS, 'path');\n    resetPanZoomControlShape1.setAttribute('d', 'M33.051,20.632c-0.742-0.406-1.854-0.609-3.338-0.609h-7.969v9.281h7.769c1.543,0,2.701-0.188,3.473-0.562c1.365-0.656,2.048-1.953,2.048-3.891C35.032,22.757,34.372,21.351,33.051,20.632z');\n    resetPanZoomControlShape1.setAttribute('class', 'svg-pan-zoom-control-element');\n    resetPanZoomControl.appendChild(resetPanZoomControlShape1);\n\n    var resetPanZoomControlShape2 = document.createElementNS(SvgUtils.svgNS, 'path');\n    resetPanZoomControlShape2.setAttribute('d', 'M170.231,0.5H15.847C7.102,0.5,0.5,5.708,0.5,11.84v38.861C0.5,56.833,7.102,61.5,15.847,61.5h154.384c8.745,0,15.269-4.667,15.269-10.798V11.84C185.5,5.708,178.976,0.5,170.231,0.5z M42.837,48.569h-7.969c-0.219-0.766-0.375-1.383-0.469-1.852c-0.188-0.969-0.289-1.961-0.305-2.977l-0.047-3.211c-0.03-2.203-0.41-3.672-1.142-4.406c-0.732-0.734-2.103-1.102-4.113-1.102h-7.05v13.547h-7.055V14.022h16.524c2.361,0.047,4.178,0.344,5.45,0.891c1.272,0.547,2.351,1.352,3.234,2.414c0.731,0.875,1.31,1.844,1.737,2.906s0.64,2.273,0.64,3.633c0,1.641-0.414,3.254-1.242,4.84s-2.195,2.707-4.102,3.363c1.594,0.641,2.723,1.551,3.387,2.73s0.996,2.98,0.996,5.402v2.32c0,1.578,0.063,2.648,0.19,3.211c0.19,0.891,0.635,1.547,1.333,1.969V48.569z M75.579,48.569h-26.18V14.022h25.336v6.117H56.454v7.336h16.781v6H56.454v8.883h19.125V48.569z M104.497,46.331c-2.44,2.086-5.887,3.129-10.34,3.129c-4.548,0-8.125-1.027-10.731-3.082s-3.909-4.879-3.909-8.473h6.891c0.224,1.578,0.662,2.758,1.316,3.539c1.196,1.422,3.246,2.133,6.15,2.133c1.739,0,3.151-0.188,4.236-0.562c2.058-0.719,3.087-2.055,3.087-4.008c0-1.141-0.504-2.023-1.512-2.648c-1.008-0.609-2.607-1.148-4.796-1.617l-3.74-0.82c-3.676-0.812-6.201-1.695-7.576-2.648c-2.328-1.594-3.492-4.086-3.492-7.477c0-3.094,1.139-5.664,3.417-7.711s5.623-3.07,10.036-3.07c3.685,0,6.829,0.965,9.431,2.895c2.602,1.93,3.966,4.73,4.093,8.402h-6.938c-0.128-2.078-1.057-3.555-2.787-4.43c-1.154-0.578-2.587-0.867-4.301-0.867c-1.907,0-3.428,0.375-4.565,1.125c-1.138,0.75-1.706,1.797-1.706,3.141c0,1.234,0.561,2.156,1.682,2.766c0.721,0.406,2.25,0.883,4.589,1.43l6.063,1.43c2.657,0.625,4.648,1.461,5.975,2.508c2.059,1.625,3.089,3.977,3.089,7.055C108.157,41.624,106.937,44.245,104.497,46.331z M139.61,48.569h-26.18V14.022h25.336v6.117h-18.281v7.336h16.781v6h-16.781v8.883h19.125V48.569z M170.337,20.14h-10.336v28.43h-7.266V20.14h-10.383v-6.117h27.984V20.14z');\n    resetPanZoomControlShape2.setAttribute('class', 'svg-pan-zoom-control-element');\n    resetPanZoomControl.appendChild(resetPanZoomControlShape2);\n\n    return resetPanZoomControl\n  }\n\n, _createZoomOut: function(instance){\n    // zoom out\n    var zoomOut = document.createElementNS(SvgUtils.svgNS, 'g');\n    zoomOut.setAttribute('id', 'svg-pan-zoom-zoom-out');\n    zoomOut.setAttribute('transform', 'translate(30.5 70) scale(0.015)');\n    zoomOut.setAttribute('class', 'svg-pan-zoom-control');\n    zoomOut.addEventListener('click', function() {instance.getPublicInstance().zoomOut()}, false);\n    zoomOut.addEventListener('touchstart', function() {instance.getPublicInstance().zoomOut()}, false);\n\n    var zoomOutBackground = document.createElementNS(SvgUtils.svgNS, 'rect'); // TODO change these background space fillers to rounded rectangles so they look prettier\n    zoomOutBackground.setAttribute('x', '0');\n    zoomOutBackground.setAttribute('y', '0');\n    zoomOutBackground.setAttribute('width', '1500'); // larger than expected because the whole group is transformed to scale down\n    zoomOutBackground.setAttribute('height', '1400');\n    zoomOutBackground.setAttribute('class', 'svg-pan-zoom-control-background');\n    zoomOut.appendChild(zoomOutBackground);\n\n    var zoomOutShape = document.createElementNS(SvgUtils.svgNS, 'path');\n    zoomOutShape.setAttribute('d', 'M1280 576v128q0 26 -19 45t-45 19h-896q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h896q26 0 45 19t19 45zM1536 1120v-960q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5 t84.5 -203.5z');\n    zoomOutShape.setAttribute('class', 'svg-pan-zoom-control-element');\n    zoomOut.appendChild(zoomOutShape);\n\n    return zoomOut\n  }\n\n, disable: function(instance) {\n    if (instance.controlIcons) {\n      instance.controlIcons.parentNode.removeChild(instance.controlIcons)\n      instance.controlIcons = null\n    }\n  }\n}\n\n},{\"./svg-utilities\":5}],3:[function(require,module,exports){\nvar SvgUtils = require('./svg-utilities')\n  , Utils = require('./utilities')\n  ;\n\nvar ShadowViewport = function(viewport, options){\n  this.init(viewport, options)\n}\n\n/**\n * Initialization\n *\n * @param  {SVGElement} viewport\n * @param  {Object} options\n */\nShadowViewport.prototype.init = function(viewport, options) {\n  // DOM Elements\n  this.viewport = viewport\n  this.options = options\n\n  // State cache\n  this.originalState = {zoom: 1, x: 0, y: 0}\n  this.activeState = {zoom: 1, x: 0, y: 0}\n\n  this.updateCTMCached = Utils.proxy(this.updateCTM, this)\n\n  // Create a custom requestAnimationFrame taking in account refreshRate\n  this.requestAnimationFrame = Utils.createRequestAnimationFrame(this.options.refreshRate)\n\n  // ViewBox\n  this.viewBox = {x: 0, y: 0, width: 0, height: 0}\n  this.cacheViewBox()\n\n  // Process CTM\n  var newCTM = this.processCTM()\n\n  // Update viewport CTM and cache zoom and pan\n  this.setCTM(newCTM)\n\n  // Update CTM in this frame\n  this.updateCTM()\n}\n\n/**\n * Cache initial viewBox value\n * If no viewBox is defined, then use viewport size/position instead for viewBox values\n */\nShadowViewport.prototype.cacheViewBox = function() {\n  var svgViewBox = this.options.svg.getAttribute('viewBox')\n\n  if (svgViewBox) {\n    var viewBoxValues = svgViewBox.split(/[\\s\\,]/).filter(function(v){return v}).map(parseFloat)\n\n    // Cache viewbox x and y offset\n    this.viewBox.x = viewBoxValues[0]\n    this.viewBox.y = viewBoxValues[1]\n    this.viewBox.width = viewBoxValues[2]\n    this.viewBox.height = viewBoxValues[3]\n\n    var zoom = Math.min(this.options.width / this.viewBox.width, this.options.height / this.viewBox.height)\n\n    // Update active state\n    this.activeState.zoom = zoom\n    this.activeState.x = (this.options.width - this.viewBox.width * zoom) / 2\n    this.activeState.y = (this.options.height - this.viewBox.height * zoom) / 2\n\n    // Force updating CTM\n    this.updateCTMOnNextFrame()\n\n    this.options.svg.removeAttribute('viewBox')\n  } else {\n    this.simpleViewBoxCache()\n  }\n}\n\n/**\n * Recalculate viewport sizes and update viewBox cache\n */\nShadowViewport.prototype.simpleViewBoxCache = function() {\n  var bBox = this.viewport.getBBox()\n\n  this.viewBox.x = bBox.x\n  this.viewBox.y = bBox.y\n  this.viewBox.width = bBox.width\n  this.viewBox.height = bBox.height\n}\n\n/**\n * Returns a viewbox object. Safe to alter\n *\n * @return {Object} viewbox object\n */\nShadowViewport.prototype.getViewBox = function() {\n  return Utils.extend({}, this.viewBox)\n}\n\n/**\n * Get initial zoom and pan values. Save them into originalState\n * Parses viewBox attribute to alter initial sizes\n *\n * @return {CTM} CTM object based on options\n */\nShadowViewport.prototype.processCTM = function() {\n  var newCTM = this.getCTM()\n\n  if (this.options.fit || this.options.contain) {\n    var newScale;\n    if (this.options.fit) {\n      newScale = Math.min(this.options.width/this.viewBox.width, this.options.height/this.viewBox.height);\n    } else {\n      newScale = Math.max(this.options.width/this.viewBox.width, this.options.height/this.viewBox.height);\n    }\n\n    newCTM.a = newScale; //x-scale\n    newCTM.d = newScale; //y-scale\n    newCTM.e = -this.viewBox.x * newScale; //x-transform\n    newCTM.f = -this.viewBox.y * newScale; //y-transform\n  }\n\n  if (this.options.center) {\n    var offsetX = (this.options.width - (this.viewBox.width + this.viewBox.x * 2) * newCTM.a) * 0.5\n      , offsetY = (this.options.height - (this.viewBox.height + this.viewBox.y * 2) * newCTM.a) * 0.5\n\n    newCTM.e = offsetX\n    newCTM.f = offsetY\n  }\n\n  // Cache initial values. Based on activeState and fix+center opitons\n  this.originalState.zoom = newCTM.a\n  this.originalState.x = newCTM.e\n  this.originalState.y = newCTM.f\n\n  return newCTM\n}\n\n/**\n * Return originalState object. Safe to alter\n *\n * @return {Object}\n */\nShadowViewport.prototype.getOriginalState = function() {\n  return Utils.extend({}, this.originalState)\n}\n\n/**\n * Return actualState object. Safe to alter\n *\n * @return {Object}\n */\nShadowViewport.prototype.getState = function() {\n  return Utils.extend({}, this.activeState)\n}\n\n/**\n * Get zoom scale\n *\n * @return {Float} zoom scale\n */\nShadowViewport.prototype.getZoom = function() {\n  return this.activeState.zoom\n}\n\n/**\n * Get zoom scale for pubilc usage\n *\n * @return {Float} zoom scale\n */\nShadowViewport.prototype.getRelativeZoom = function() {\n  return this.activeState.zoom / this.originalState.zoom\n}\n\n/**\n * Compute zoom scale for pubilc usage\n *\n * @return {Float} zoom scale\n */\nShadowViewport.prototype.computeRelativeZoom = function(scale) {\n  return scale / this.originalState.zoom\n}\n\n/**\n * Get pan\n *\n * @return {Object}\n */\nShadowViewport.prototype.getPan = function() {\n  return {x: this.activeState.x, y: this.activeState.y}\n}\n\n/**\n * Return cached viewport CTM value that can be safely modified\n *\n * @return {SVGMatrix}\n */\nShadowViewport.prototype.getCTM = function() {\n  var safeCTM = this.options.svg.createSVGMatrix()\n\n  // Copy values manually as in FF they are not itterable\n  safeCTM.a = this.activeState.zoom\n  safeCTM.b = 0\n  safeCTM.c = 0\n  safeCTM.d = this.activeState.zoom\n  safeCTM.e = this.activeState.x\n  safeCTM.f = this.activeState.y\n\n  return safeCTM\n}\n\n/**\n * Set a new CTM\n *\n * @param {SVGMatrix} newCTM\n */\nShadowViewport.prototype.setCTM = function(newCTM) {\n  var willZoom = this.isZoomDifferent(newCTM)\n    , willPan = this.isPanDifferent(newCTM)\n\n  if (willZoom || willPan) {\n    // Before zoom\n    if (willZoom) {\n      // If returns false then cancel zooming\n      if (this.options.beforeZoom(this.getRelativeZoom(), this.computeRelativeZoom(newCTM.a)) === false) {\n        newCTM.a = newCTM.d = this.activeState.zoom\n        willZoom = false\n      } else {\n        this.updateCache(newCTM);\n        this.options.onZoom(this.getRelativeZoom())\n      }\n    }\n\n    // Before pan\n    if (willPan) {\n      var preventPan = this.options.beforePan(this.getPan(), {x: newCTM.e, y: newCTM.f})\n          // If prevent pan is an object\n        , preventPanX = false\n        , preventPanY = false\n\n      // If prevent pan is Boolean false\n      if (preventPan === false) {\n        // Set x and y same as before\n        newCTM.e = this.getPan().x\n        newCTM.f = this.getPan().y\n\n        preventPanX = preventPanY = true\n      } else if (Utils.isObject(preventPan)) {\n        // Check for X axes attribute\n        if (preventPan.x === false) {\n          // Prevent panning on x axes\n          newCTM.e = this.getPan().x\n          preventPanX = true\n        } else if (Utils.isNumber(preventPan.x)) {\n          // Set a custom pan value\n          newCTM.e = preventPan.x\n        }\n\n        // Check for Y axes attribute\n        if (preventPan.y === false) {\n          // Prevent panning on x axes\n          newCTM.f = this.getPan().y\n          preventPanY = true\n        } else if (Utils.isNumber(preventPan.y)) {\n          // Set a custom pan value\n          newCTM.f = preventPan.y\n        }\n      }\n\n      // Update willPan flag\n      // Check if newCTM is still different\n      if ((preventPanX && preventPanY) || !this.isPanDifferent(newCTM)) {\n        willPan = false\n      } else {\n        this.updateCache(newCTM);\n        this.options.onPan(this.getPan());\n      }\n    }\n\n    // Check again if should zoom or pan\n    if (willZoom || willPan) {\n      this.updateCTMOnNextFrame()\n    }\n  }\n}\n\nShadowViewport.prototype.isZoomDifferent = function(newCTM) {\n  return this.activeState.zoom !== newCTM.a\n}\n\nShadowViewport.prototype.isPanDifferent = function(newCTM) {\n  return this.activeState.x !== newCTM.e || this.activeState.y !== newCTM.f\n}\n\n\n/**\n * Update cached CTM and active state\n *\n * @param {SVGMatrix} newCTM\n */\nShadowViewport.prototype.updateCache = function(newCTM) {\n  this.activeState.zoom = newCTM.a\n  this.activeState.x = newCTM.e\n  this.activeState.y = newCTM.f\n}\n\nShadowViewport.prototype.pendingUpdate = false\n\n/**\n * Place a request to update CTM on next Frame\n */\nShadowViewport.prototype.updateCTMOnNextFrame = function() {\n  if (!this.pendingUpdate) {\n    // Lock\n    this.pendingUpdate = true\n\n    // Throttle next update\n    this.requestAnimationFrame.call(window, this.updateCTMCached)\n  }\n}\n\n/**\n * Update viewport CTM with cached CTM\n */\nShadowViewport.prototype.updateCTM = function() {\n  var ctm = this.getCTM()\n\n  // Updates SVG element\n  SvgUtils.setCTM(this.viewport, ctm, this.defs)\n\n  // Free the lock\n  this.pendingUpdate = false\n\n  // Notify about the update\n  if(this.options.onUpdatedCTM) {\n    this.options.onUpdatedCTM(ctm)\n  }\n}\n\nmodule.exports = function(viewport, options){\n  return new ShadowViewport(viewport, options)\n}\n\n},{\"./svg-utilities\":5,\"./utilities\":7}],4:[function(require,module,exports){\nvar Wheel = require('./uniwheel')\n, ControlIcons = require('./control-icons')\n, Utils = require('./utilities')\n, SvgUtils = require('./svg-utilities')\n, ShadowViewport = require('./shadow-viewport')\n\nvar SvgPanZoom = function(svg, options) {\n  this.init(svg, options)\n}\n\nvar optionsDefaults = {\n  viewportSelector: '.svg-pan-zoom_viewport' // Viewport selector. Can be querySelector string or SVGElement\n, panEnabled: true // enable or disable panning (default enabled)\n, controlIconsEnabled: false // insert icons to give user an option in addition to mouse events to control pan/zoom (default disabled)\n, zoomEnabled: true // enable or disable zooming (default enabled)\n, dblClickZoomEnabled: true // enable or disable zooming by double clicking (default enabled)\n, mouseWheelZoomEnabled: true // enable or disable zooming by mouse wheel (default enabled)\n, preventMouseEventsDefault: true // enable or disable preventDefault for mouse events\n, zoomScaleSensitivity: 0.1 // Zoom sensitivity\n, minZoom: 0.5 // Minimum Zoom level\n, maxZoom: 10 // Maximum Zoom level\n, fit: true // enable or disable viewport fit in SVG (default true)\n, contain: false // enable or disable viewport contain the svg (default false)\n, center: true // enable or disable viewport centering in SVG (default true)\n, refreshRate: 'auto' // Maximum number of frames per second (altering SVG's viewport)\n, beforeZoom: null\n, onZoom: null\n, beforePan: null\n, onPan: null\n, customEventsHandler: null\n, eventsListenerElement: null\n, onUpdatedCTM: null\n}\n\nSvgPanZoom.prototype.init = function(svg, options) {\n  var that = this\n\n  this.svg = svg\n  this.defs = svg.querySelector('defs')\n\n  // Add default attributes to SVG\n  SvgUtils.setupSvgAttributes(this.svg)\n\n  // Set options\n  this.options = Utils.extend(Utils.extend({}, optionsDefaults), options)\n\n  // Set default state\n  this.state = 'none'\n\n  // Get dimensions\n  var boundingClientRectNormalized = SvgUtils.getBoundingClientRectNormalized(svg)\n  this.width = boundingClientRectNormalized.width\n  this.height = boundingClientRectNormalized.height\n\n  // Init shadow viewport\n  this.viewport = ShadowViewport(SvgUtils.getOrCreateViewport(this.svg, this.options.viewportSelector), {\n    svg: this.svg\n  , width: this.width\n  , height: this.height\n  , fit: this.options.fit\n  , contain: this.options.contain\n  , center: this.options.center\n  , refreshRate: this.options.refreshRate\n  // Put callbacks into functions as they can change through time\n  , beforeZoom: function(oldScale, newScale) {\n      if (that.viewport && that.options.beforeZoom) {return that.options.beforeZoom(oldScale, newScale)}\n    }\n  , onZoom: function(scale) {\n      if (that.viewport && that.options.onZoom) {return that.options.onZoom(scale)}\n    }\n  , beforePan: function(oldPoint, newPoint) {\n      if (that.viewport && that.options.beforePan) {return that.options.beforePan(oldPoint, newPoint)}\n    }\n  , onPan: function(point) {\n      if (that.viewport && that.options.onPan) {return that.options.onPan(point)}\n    }\n  , onUpdatedCTM: function(ctm) {\n      if (that.viewport && that.options.onUpdatedCTM) {return that.options.onUpdatedCTM(ctm)}\n    }\n  })\n\n  // Wrap callbacks into public API context\n  var publicInstance = this.getPublicInstance()\n  publicInstance.setBeforeZoom(this.options.beforeZoom)\n  publicInstance.setOnZoom(this.options.onZoom)\n  publicInstance.setBeforePan(this.options.beforePan)\n  publicInstance.setOnPan(this.options.onPan)\n  publicInstance.setOnUpdatedCTM(this.options.onUpdatedCTM)\n\n  if (this.options.controlIconsEnabled) {\n    ControlIcons.enable(this)\n  }\n\n  // Init events handlers\n  this.lastMouseWheelEventTime = Date.now()\n  this.setupHandlers()\n}\n\n/**\n * Register event handlers\n */\nSvgPanZoom.prototype.setupHandlers = function() {\n  var that = this\n    , prevEvt = null // use for touchstart event to detect double tap\n    ;\n\n  this.eventListeners = {\n    // Mouse down group\n    mousedown: function(evt) {\n\tif (evt.target instanceof HTMLInputElement || evt.target instanceof HTMLSelectElement || evt.target instanceof HTMLButtonElement)  return;\n      var result = that.handleMouseDown(evt, prevEvt);\n      prevEvt = evt\n      return result;\n    }\n  , touchstart: function(evt) {\n\tif (evt.target instanceof HTMLInputElement || evt.target instanceof HTMLSelectElement || evt.target instanceof HTMLButtonElement)  return;\n      var result = that.handleMouseDown(evt, prevEvt);\n      prevEvt = evt\n      return result;\n    }\n\n    // Mouse up group\n  , mouseup: function(evt) {\n\tif (evt.target instanceof HTMLInputElement || evt.target instanceof HTMLSelectElement || evt.target instanceof HTMLButtonElement)  return;\n      return that.handleMouseUp(evt);\n    }\n  , touchend: function(evt) {\n\tif (evt.target instanceof HTMLInputElement || evt.target instanceof HTMLSelectElement || evt.target instanceof HTMLButtonElement)  return;\n      return that.handleMouseUp(evt);\n    }\n\n    // Mouse move group\n  , mousemove: function(evt) {\n\tif (evt.target instanceof HTMLInputElement || evt.target instanceof HTMLSelectElement || evt.target instanceof HTMLButtonElement)  return;\n      return that.handleMouseMove(evt);\n    }\n  , touchmove: function(evt) {\n\tif (evt.target instanceof HTMLInputElement || evt.target instanceof HTMLSelectElement || evt.target instanceof HTMLButtonElement)  return;\n      return that.handleMouseMove(evt);\n    }\n\n    // Mouse leave group\n  , mouseleave: function(evt) {\n\tif (evt.target instanceof HTMLInputElement || evt.target instanceof HTMLSelectElement || evt.target instanceof HTMLButtonElement)  return;\n      return that.handleMouseUp(evt);\n    }\n  , touchleave: function(evt) {\n\tif (evt.target instanceof HTMLInputElement || evt.target instanceof HTMLSelectElement || evt.target instanceof HTMLButtonElement)  return;\n      return that.handleMouseUp(evt);\n    }\n  , touchcancel: function(evt) {\n\tif (evt.target instanceof HTMLInputElement || evt.target instanceof HTMLSelectElement || evt.target instanceof HTMLButtonElement)  return;\n      return that.handleMouseUp(evt);\n    }\n  }\n\n  // Init custom events handler if available\n  if (this.options.customEventsHandler != null) { // jshint ignore:line\n    this.options.customEventsHandler.init({\n      svgElement: this.svg\n    , eventsListenerElement: this.options.eventsListenerElement\n    , instance: this.getPublicInstance()\n    })\n\n    // Custom event handler may halt builtin listeners\n    var haltEventListeners = this.options.customEventsHandler.haltEventListeners\n    if (haltEventListeners && haltEventListeners.length) {\n      for (var i = haltEventListeners.length - 1; i >= 0; i--) {\n        if (this.eventListeners.hasOwnProperty(haltEventListeners[i])) {\n          delete this.eventListeners[haltEventListeners[i]]\n        }\n      }\n    }\n  }\n\n  // Bind eventListeners\n  for (var event in this.eventListeners) {\n    // Attach event to eventsListenerElement or SVG if not available\n    (this.options.eventsListenerElement || this.svg)\n      .addEventListener(event, this.eventListeners[event], false)\n  }\n\n  // Zoom using mouse wheel\n  if (this.options.mouseWheelZoomEnabled) {\n    this.options.mouseWheelZoomEnabled = false // set to false as enable will set it back to true\n    this.enableMouseWheelZoom()\n  }\n}\n\n/**\n * Enable ability to zoom using mouse wheel\n */\nSvgPanZoom.prototype.enableMouseWheelZoom = function() {\n  if (!this.options.mouseWheelZoomEnabled) {\n    var that = this\n\n    // Mouse wheel listener\n    this.wheelListener = function(evt) {\n      return that.handleMouseWheel(evt);\n    }\n\n    // Bind wheelListener\n    Wheel.on(this.options.eventsListenerElement || this.svg, this.wheelListener, false)\n\n    this.options.mouseWheelZoomEnabled = true\n  }\n}\n\n/**\n * Disable ability to zoom using mouse wheel\n */\nSvgPanZoom.prototype.disableMouseWheelZoom = function() {\n  if (this.options.mouseWheelZoomEnabled) {\n    Wheel.off(this.options.eventsListenerElement || this.svg, this.wheelListener, false)\n    this.options.mouseWheelZoomEnabled = false\n  }\n}\n\n/**\n * Handle mouse wheel event\n *\n * @param  {Event} evt\n */\nSvgPanZoom.prototype.handleMouseWheel = function(evt) {\n  if (!this.options.zoomEnabled || this.state !== 'none') {\n    return;\n  }\n\n  if (this.options.preventMouseEventsDefault){\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    } else {\n      evt.returnValue = false;\n    }\n  }\n\n  // Default delta in case that deltaY is not available\n  var delta = evt.deltaY || 1\n    , timeDelta = Date.now() - this.lastMouseWheelEventTime\n    , divider = 3 + Math.max(0, 30 - timeDelta)\n\n  // Update cache\n  this.lastMouseWheelEventTime = Date.now()\n\n  // Make empirical adjustments for browsers that give deltaY in pixels (deltaMode=0)\n  if ('deltaMode' in evt && evt.deltaMode === 0 && evt.wheelDelta) {\n    delta = evt.deltaY === 0 ? 0 :  Math.abs(evt.wheelDelta) / evt.deltaY\n  }\n\n  delta = -0.3 < delta && delta < 0.3 ? delta : (delta > 0 ? 1 : -1) * Math.log(Math.abs(delta) + 10) / divider\n\n  var inversedScreenCTM = this.svg.getScreenCTM().inverse()\n    , relativeMousePoint = SvgUtils.getEventPoint(evt, this.svg).matrixTransform(inversedScreenCTM)\n    , zoom = Math.pow(1 + this.options.zoomScaleSensitivity, (-1) * delta); // multiplying by neg. 1 so as to make zoom in/out behavior match Google maps behavior\n\n  this.zoomAtPoint(zoom, relativeMousePoint)\n}\n\n/**\n * Zoom in at a SVG point\n *\n * @param  {SVGPoint} point\n * @param  {Float} zoomScale    Number representing how much to zoom\n * @param  {Boolean} zoomAbsolute Default false. If true, zoomScale is treated as an absolute value.\n *                                Otherwise, zoomScale is treated as a multiplied (e.g. 1.10 would zoom in 10%)\n */\nSvgPanZoom.prototype.zoomAtPoint = function(zoomScale, point, zoomAbsolute) {\n  var originalState = this.viewport.getOriginalState()\n\n  if (!zoomAbsolute) {\n    // Fit zoomScale in set bounds\n    if (this.getZoom() * zoomScale < this.options.minZoom * originalState.zoom) {\n      zoomScale = (this.options.minZoom * originalState.zoom) / this.getZoom()\n    } else if (this.getZoom() * zoomScale > this.options.maxZoom * originalState.zoom) {\n      zoomScale = (this.options.maxZoom * originalState.zoom) / this.getZoom()\n    }\n  } else {\n    // Fit zoomScale in set bounds\n    zoomScale = Math.max(this.options.minZoom * originalState.zoom, Math.min(this.options.maxZoom * originalState.zoom, zoomScale))\n    // Find relative scale to achieve desired scale\n    zoomScale = zoomScale/this.getZoom()\n  }\n\n  var oldCTM = this.viewport.getCTM()\n    , relativePoint = point.matrixTransform(oldCTM.inverse())\n    , modifier = this.svg.createSVGMatrix().translate(relativePoint.x, relativePoint.y).scale(zoomScale).translate(-relativePoint.x, -relativePoint.y)\n    , newCTM = oldCTM.multiply(modifier)\n\n  if (newCTM.a !== oldCTM.a) {\n    this.viewport.setCTM(newCTM)\n  }\n}\n\n/**\n * Zoom at center point\n *\n * @param  {Float} scale\n * @param  {Boolean} absolute Marks zoom scale as relative or absolute\n */\nSvgPanZoom.prototype.zoom = function(scale, absolute) {\n  this.zoomAtPoint(scale, SvgUtils.getSvgCenterPoint(this.svg, this.width, this.height), absolute)\n}\n\n/**\n * Zoom used by public instance\n *\n * @param  {Float} scale\n * @param  {Boolean} absolute Marks zoom scale as relative or absolute\n */\nSvgPanZoom.prototype.publicZoom = function(scale, absolute) {\n  if (absolute) {\n    scale = this.computeFromRelativeZoom(scale)\n  }\n\n  this.zoom(scale, absolute)\n}\n\n/**\n * Zoom at point used by public instance\n *\n * @param  {Float} scale\n * @param  {SVGPoint|Object} point    An object that has x and y attributes\n * @param  {Boolean} absolute Marks zoom scale as relative or absolute\n */\nSvgPanZoom.prototype.publicZoomAtPoint = function(scale, point, absolute) {\n  if (absolute) {\n    // Transform zoom into a relative value\n    scale = this.computeFromRelativeZoom(scale)\n  }\n\n  // If not a SVGPoint but has x and y then create a SVGPoint\n  if (Utils.getType(point) !== 'SVGPoint') {\n    if('x' in point && 'y' in point) {\n      point = SvgUtils.createSVGPoint(this.svg, point.x, point.y)\n    } else {\n      throw new Error('Given point is invalid')\n    }\n  }\n\n  this.zoomAtPoint(scale, point, absolute)\n}\n\n/**\n * Get zoom scale\n *\n * @return {Float} zoom scale\n */\nSvgPanZoom.prototype.getZoom = function() {\n  return this.viewport.getZoom()\n}\n\n/**\n * Get zoom scale for public usage\n *\n * @return {Float} zoom scale\n */\nSvgPanZoom.prototype.getRelativeZoom = function() {\n  return this.viewport.getRelativeZoom()\n}\n\n/**\n * Compute actual zoom from public zoom\n *\n * @param  {Float} zoom\n * @return {Float} zoom scale\n */\nSvgPanZoom.prototype.computeFromRelativeZoom = function(zoom) {\n  return zoom * this.viewport.getOriginalState().zoom\n}\n\n/**\n * Set zoom to initial state\n */\nSvgPanZoom.prototype.resetZoom = function() {\n  var originalState = this.viewport.getOriginalState()\n\n  this.zoom(originalState.zoom, true);\n}\n\n/**\n * Set pan to initial state\n */\nSvgPanZoom.prototype.resetPan = function() {\n  this.pan(this.viewport.getOriginalState());\n}\n\n/**\n * Set pan and zoom to initial state\n */\nSvgPanZoom.prototype.reset = function() {\n  this.resetZoom()\n  this.resetPan()\n}\n\n/**\n * Handle double click event\n * See handleMouseDown() for alternate detection method\n *\n * @param {Event} evt\n */\nSvgPanZoom.prototype.handleDblClick = function(evt) {\n  if (this.options.preventMouseEventsDefault) {\n    if (evt.preventDefault) {\n      evt.preventDefault()\n    } else {\n      evt.returnValue = false\n    }\n  }\n\n  // Check if target was a control button\n  if (this.options.controlIconsEnabled) {\n    var targetClass = evt.target.getAttribute('class') || ''\n    if (targetClass.indexOf('svg-pan-zoom-control') > -1) {\n      return false\n    }\n  }\n\n  var zoomFactor\n\n  if (evt.shiftKey) {\n    zoomFactor = 1/((1 + this.options.zoomScaleSensitivity) * 2) // zoom out when shift key pressed\n  } else {\n    zoomFactor = (1 + this.options.zoomScaleSensitivity) * 2\n  }\n\n  var point = SvgUtils.getEventPoint(evt, this.svg).matrixTransform(this.svg.getScreenCTM().inverse())\n  this.zoomAtPoint(zoomFactor, point)\n}\n\n/**\n * Handle click event\n *\n * @param {Event} evt\n */\nSvgPanZoom.prototype.handleMouseDown = function(evt, prevEvt) {\n  if (this.options.preventMouseEventsDefault) {\n    if (evt.preventDefault) {\n      evt.preventDefault()\n    } else {\n      evt.returnValue = false\n    }\n  }\n\n  Utils.mouseAndTouchNormalize(evt, this.svg)\n\n  // Double click detection; more consistent than ondblclick\n  if (this.options.dblClickZoomEnabled && Utils.isDblClick(evt, prevEvt)){\n    this.handleDblClick(evt)\n  } else {\n    // Pan mode\n    this.state = 'pan'\n    this.firstEventCTM = this.viewport.getCTM()\n    this.stateOrigin = SvgUtils.getEventPoint(evt, this.svg).matrixTransform(this.firstEventCTM.inverse())\n  }\n}\n\n/**\n * Handle mouse move event\n *\n * @param  {Event} evt\n */\nSvgPanZoom.prototype.handleMouseMove = function(evt) {\n  if (this.options.preventMouseEventsDefault) {\n    if (evt.preventDefault) {\n      evt.preventDefault()\n    } else {\n      evt.returnValue = false\n    }\n  }\n\n  if (this.state === 'pan' && this.options.panEnabled) {\n    // Pan mode\n    var point = SvgUtils.getEventPoint(evt, this.svg).matrixTransform(this.firstEventCTM.inverse())\n      , viewportCTM = this.firstEventCTM.translate(point.x - this.stateOrigin.x, point.y - this.stateOrigin.y)\n\n    this.viewport.setCTM(viewportCTM)\n  }\n}\n\n/**\n * Handle mouse button release event\n *\n * @param {Event} evt\n */\nSvgPanZoom.prototype.handleMouseUp = function(evt) {\n  if (this.options.preventMouseEventsDefault) {\n    if (evt.preventDefault) {\n      evt.preventDefault()\n    } else {\n      evt.returnValue = false\n    }\n  }\n\n  if (this.state === 'pan') {\n    // Quit pan mode\n    this.state = 'none'\n  }\n}\n\n/**\n * Adjust viewport size (only) so it will fit in SVG\n * Does not center image\n */\nSvgPanZoom.prototype.fit = function() {\n  var viewBox = this.viewport.getViewBox()\n    , newScale = Math.min(this.width/viewBox.width, this.height/viewBox.height)\n\n  this.zoom(newScale, true)\n}\n\n/**\n * Adjust viewport size (only) so it will contain the SVG\n * Does not center image\n */\nSvgPanZoom.prototype.contain = function() {\n  var viewBox = this.viewport.getViewBox()\n    , newScale = Math.max(this.width/viewBox.width, this.height/viewBox.height)\n\n  this.zoom(newScale, true)\n}\n\n/**\n * Adjust viewport pan (only) so it will be centered in SVG\n * Does not zoom/fit/contain image\n */\nSvgPanZoom.prototype.center = function() {\n  var viewBox = this.viewport.getViewBox()\n    , offsetX = (this.width - (viewBox.width + viewBox.x * 2) * this.getZoom()) * 0.5\n    , offsetY = (this.height - (viewBox.height + viewBox.y * 2) * this.getZoom()) * 0.5\n\n  this.getPublicInstance().pan({x: offsetX, y: offsetY})\n}\n\n/**\n * Update content cached BorderBox\n * Use when viewport contents change\n */\nSvgPanZoom.prototype.updateBBox = function() {\n  this.viewport.simpleViewBoxCache()\n}\n\n/**\n * Pan to a rendered position\n *\n * @param  {Object} point {x: 0, y: 0}\n */\nSvgPanZoom.prototype.pan = function(point) {\n  var viewportCTM = this.viewport.getCTM()\n  viewportCTM.e = point.x\n  viewportCTM.f = point.y\n  this.viewport.setCTM(viewportCTM)\n}\n\n/**\n * Relatively pan the graph by a specified rendered position vector\n *\n * @param  {Object} point {x: 0, y: 0}\n */\nSvgPanZoom.prototype.panBy = function(point) {\n  var viewportCTM = this.viewport.getCTM()\n  viewportCTM.e += point.x\n  viewportCTM.f += point.y\n  this.viewport.setCTM(viewportCTM)\n}\n\n/**\n * Get pan vector\n *\n * @return {Object} {x: 0, y: 0}\n */\nSvgPanZoom.prototype.getPan = function() {\n  var state = this.viewport.getState()\n\n  return {x: state.x, y: state.y}\n}\n\n/**\n * Recalculates cached svg dimensions and controls position\n */\nSvgPanZoom.prototype.resize = function() {\n  // Get dimensions\n  var boundingClientRectNormalized = SvgUtils.getBoundingClientRectNormalized(this.svg)\n  this.width = boundingClientRectNormalized.width\n  this.height = boundingClientRectNormalized.height\n\n  // Recalculate original state\n  var viewport = this.viewport\n  viewport.options.width = this.width\n  viewport.options.height = this.height\n  viewport.processCTM()\n\n  // Reposition control icons by re-enabling them\n  if (this.options.controlIconsEnabled) {\n    this.getPublicInstance().disableControlIcons()\n    this.getPublicInstance().enableControlIcons()\n  }\n}\n\n/**\n * Unbind mouse events, free callbacks and destroy public instance\n */\nSvgPanZoom.prototype.destroy = function() {\n  var that = this\n\n  // Free callbacks\n  this.beforeZoom = null\n  this.onZoom = null\n  this.beforePan = null\n  this.onPan = null\n  this.onUpdatedCTM = null\n\n  // Destroy custom event handlers\n  if (this.options.customEventsHandler != null) { // jshint ignore:line\n    this.options.customEventsHandler.destroy({\n      svgElement: this.svg\n    , eventsListenerElement: this.options.eventsListenerElement\n    , instance: this.getPublicInstance()\n    })\n  }\n\n  // Unbind eventListeners\n  for (var event in this.eventListeners) {\n    (this.options.eventsListenerElement || this.svg)\n      .removeEventListener(event, this.eventListeners[event], false)\n  }\n\n  // Unbind wheelListener\n  this.disableMouseWheelZoom()\n\n  // Remove control icons\n  this.getPublicInstance().disableControlIcons()\n\n  // Reset zoom and pan\n  this.reset()\n\n  // Remove instance from instancesStore\n  instancesStore = instancesStore.filter(function(instance){\n    return instance.svg !== that.svg\n  })\n\n  // Delete options and its contents\n  delete this.options\n\n  // Delete viewport to make public shadow viewport functions uncallable\n  delete this.viewport\n\n  // Destroy public instance and rewrite getPublicInstance\n  delete this.publicInstance\n  delete this.pi\n  this.getPublicInstance = function(){\n    return null\n  }\n}\n\n/**\n * Returns a public instance object\n *\n * @return {Object} Public instance object\n */\nSvgPanZoom.prototype.getPublicInstance = function() {\n  var that = this\n\n  // Create cache\n  if (!this.publicInstance) {\n    this.publicInstance = this.pi = {\n      // Pan\n      enablePan: function() {that.options.panEnabled = true; return that.pi}\n    , disablePan: function() {that.options.panEnabled = false; return that.pi}\n    , isPanEnabled: function() {return !!that.options.panEnabled}\n    , pan: function(point) {that.pan(point); return that.pi}\n    , panBy: function(point) {that.panBy(point); return that.pi}\n    , getPan: function() {return that.getPan()}\n      // Pan event\n    , setBeforePan: function(fn) {that.options.beforePan = fn === null ? null : Utils.proxy(fn, that.publicInstance); return that.pi}\n    , setOnPan: function(fn) {that.options.onPan = fn === null ? null : Utils.proxy(fn, that.publicInstance); return that.pi}\n      // Zoom and Control Icons\n    , enableZoom: function() {that.options.zoomEnabled = true; return that.pi}\n    , disableZoom: function() {that.options.zoomEnabled = false; return that.pi}\n    , isZoomEnabled: function() {return !!that.options.zoomEnabled}\n    , enableControlIcons: function() {\n        if (!that.options.controlIconsEnabled) {\n          that.options.controlIconsEnabled = true\n          ControlIcons.enable(that)\n        }\n        return that.pi\n      }\n    , disableControlIcons: function() {\n        if (that.options.controlIconsEnabled) {\n          that.options.controlIconsEnabled = false;\n          ControlIcons.disable(that)\n        }\n        return that.pi\n      }\n    , isControlIconsEnabled: function() {return !!that.options.controlIconsEnabled}\n      // Double click zoom\n    , enableDblClickZoom: function() {that.options.dblClickZoomEnabled = true; return that.pi}\n    , disableDblClickZoom: function() {that.options.dblClickZoomEnabled = false; return that.pi}\n    , isDblClickZoomEnabled: function() {return !!that.options.dblClickZoomEnabled}\n      // Mouse wheel zoom\n    , enableMouseWheelZoom: function() {that.enableMouseWheelZoom(); return that.pi}\n    , disableMouseWheelZoom: function() {that.disableMouseWheelZoom(); return that.pi}\n    , isMouseWheelZoomEnabled: function() {return !!that.options.mouseWheelZoomEnabled}\n      // Zoom scale and bounds\n    , setZoomScaleSensitivity: function(scale) {that.options.zoomScaleSensitivity = scale; return that.pi}\n    , setMinZoom: function(zoom) {that.options.minZoom = zoom; return that.pi}\n    , setMaxZoom: function(zoom) {that.options.maxZoom = zoom; return that.pi}\n      // Zoom event\n    , setBeforeZoom: function(fn) {that.options.beforeZoom = fn === null ? null : Utils.proxy(fn, that.publicInstance); return that.pi}\n    , setOnZoom: function(fn) {that.options.onZoom = fn === null ? null : Utils.proxy(fn, that.publicInstance); return that.pi}\n      // Zooming\n    , zoom: function(scale) {that.publicZoom(scale, true); return that.pi}\n    , zoomBy: function(scale) {that.publicZoom(scale, false); return that.pi}\n    , zoomAtPoint: function(scale, point) {that.publicZoomAtPoint(scale, point, true); return that.pi}\n    , zoomAtPointBy: function(scale, point) {that.publicZoomAtPoint(scale, point, false); return that.pi}\n    , zoomIn: function() {this.zoomBy(1 + that.options.zoomScaleSensitivity); return that.pi}\n    , zoomOut: function() {this.zoomBy(1 / (1 + that.options.zoomScaleSensitivity)); return that.pi}\n    , getZoom: function() {return that.getRelativeZoom()}\n      // CTM update\n    , setOnUpdatedCTM: function(fn) {that.options.onUpdatedCTM = fn === null ? null : Utils.proxy(fn, that.publicInstance); return that.pi}\n      // Reset\n    , resetZoom: function() {that.resetZoom(); return that.pi}\n    , resetPan: function() {that.resetPan(); return that.pi}\n    , reset: function() {that.reset(); return that.pi}\n      // Fit, Contain and Center\n    , fit: function() {that.fit(); return that.pi}\n    , contain: function() {that.contain(); return that.pi}\n    , center: function() {that.center(); return that.pi}\n      // Size and Resize\n    , updateBBox: function() {that.updateBBox(); return that.pi}\n    , resize: function() {that.resize(); return that.pi}\n    , getSizes: function() {\n        return {\n          width: that.width\n        , height: that.height\n        , realZoom: that.getZoom()\n        , viewBox: that.viewport.getViewBox()\n        }\n      }\n      // Destroy\n    , destroy: function() {that.destroy(); return that.pi}\n    }\n  }\n\n  return this.publicInstance\n}\n\n/**\n * Stores pairs of instances of SvgPanZoom and SVG\n * Each pair is represented by an object {svg: SVGSVGElement, instance: SvgPanZoom}\n *\n * @type {Array}\n */\nvar instancesStore = []\n\nvar svgPanZoom = function(elementOrSelector, options){\n  var svg = Utils.getSvg(elementOrSelector)\n\n  if (svg === null) {\n    return null\n  } else {\n    // Look for existent instance\n    for(var i = instancesStore.length - 1; i >= 0; i--) {\n      if (instancesStore[i].svg === svg) {\n        return instancesStore[i].instance.getPublicInstance()\n      }\n    }\n\n    // If instance not found - create one\n    instancesStore.push({\n      svg: svg\n    , instance: new SvgPanZoom(svg, options)\n    })\n\n    // Return just pushed instance\n    return instancesStore[instancesStore.length - 1].instance.getPublicInstance()\n  }\n}\n\nmodule.exports = svgPanZoom;\n\n},{\"./control-icons\":2,\"./shadow-viewport\":3,\"./svg-utilities\":5,\"./uniwheel\":6,\"./utilities\":7}],5:[function(require,module,exports){\nvar Utils = require('./utilities')\n  , _browser = 'unknown'\n  ;\n\n// http://stackoverflow.com/questions/9847580/how-to-detect-safari-chrome-ie-firefox-and-opera-browser\nif (/*@cc_on!@*/false || !!document.documentMode) { // internet explorer\n  _browser = 'ie';\n}\n\nmodule.exports = {\n  svgNS:  'http://www.w3.org/2000/svg'\n, xmlNS:  'http://www.w3.org/XML/1998/namespace'\n, xmlnsNS:  'http://www.w3.org/2000/xmlns/'\n, xlinkNS:  'http://www.w3.org/1999/xlink'\n, evNS:  'http://www.w3.org/2001/xml-events'\n\n  /**\n   * Get svg dimensions: width and height\n   *\n   * @param  {SVGSVGElement} svg\n   * @return {Object}     {width: 0, height: 0}\n   */\n, getBoundingClientRectNormalized: function(svg) {\n    if (svg.clientWidth && svg.clientHeight) {\n      return {width: svg.clientWidth, height: svg.clientHeight}\n    } else if (!!svg.getBoundingClientRect()) {\n      return svg.getBoundingClientRect();\n    } else {\n      throw new Error('Cannot get BoundingClientRect for SVG.');\n    }\n  }\n\n  /**\n   * Gets g element with class of \"viewport\" or creates it if it doesn't exist\n   *\n   * @param  {SVGSVGElement} svg\n   * @return {SVGElement}     g (group) element\n   */\n, getOrCreateViewport: function(svg, selector) {\n    var viewport = null\n\n    if (Utils.isElement(selector)) {\n      viewport = selector\n    } else {\n      viewport = svg.querySelector(selector)\n    }\n\n    // Check if there is just one main group in SVG\n    if (!viewport) {\n      var childNodes = Array.prototype.slice.call(svg.childNodes || svg.children).filter(function(el){\n        return el.nodeName !== 'defs' && el.nodeName !== '#text'\n      })\n\n      // Node name should be SVGGElement and should have no transform attribute\n      // Groups with transform are not used as viewport because it involves parsing of all transform possibilities\n      if (childNodes.length === 1 && childNodes[0].nodeName === 'g' && childNodes[0].getAttribute('transform') === null) {\n        viewport = childNodes[0]\n      }\n    }\n\n    // If no favorable group element exists then create one\n    if (!viewport) {\n      var viewportId = 'viewport-' + new Date().toISOString().replace(/\\D/g, '');\n      viewport = document.createElementNS(this.svgNS, 'g');\n      viewport.setAttribute('id', viewportId);\n\n      // Internet Explorer (all versions?) can't use childNodes, but other browsers prefer (require?) using childNodes\n      var svgChildren = svg.childNodes || svg.children;\n      if (!!svgChildren && svgChildren.length > 0) {\n        for (var i = svgChildren.length; i > 0; i--) {\n          // Move everything into viewport except defs\n          if (svgChildren[svgChildren.length - i].nodeName !== 'defs') {\n            viewport.appendChild(svgChildren[svgChildren.length - i]);\n          }\n        }\n      }\n      svg.appendChild(viewport);\n    }\n\n    // Parse class names\n    var classNames = [];\n    if (viewport.getAttribute('class')) {\n      classNames = viewport.getAttribute('class').split(' ')\n    }\n\n    // Set class (if not set already)\n    if (!~classNames.indexOf('svg-pan-zoom_viewport')) {\n      classNames.push('svg-pan-zoom_viewport')\n      viewport.setAttribute('class', classNames.join(' '))\n    }\n\n    return viewport\n  }\n\n  /**\n   * Set SVG attributes\n   *\n   * @param  {SVGSVGElement} svg\n   */\n  , setupSvgAttributes: function(svg) {\n    // Setting default attributes\n    svg.setAttribute('xmlns', this.svgNS);\n    svg.setAttributeNS(this.xmlnsNS, 'xmlns:xlink', this.xlinkNS);\n    svg.setAttributeNS(this.xmlnsNS, 'xmlns:ev', this.evNS);\n\n    // Needed for Internet Explorer, otherwise the viewport overflows\n    if (svg.parentNode !== null) {\n      var style = svg.getAttribute('style') || '';\n      if (style.toLowerCase().indexOf('overflow') === -1) {\n        svg.setAttribute('style', 'overflow: hidden; ' + style);\n      }\n    }\n  }\n\n/**\n * How long Internet Explorer takes to finish updating its display (ms).\n */\n, internetExplorerRedisplayInterval: 300\n\n/**\n * Forces the browser to redisplay all SVG elements that rely on an\n * element defined in a 'defs' section. It works globally, for every\n * available defs element on the page.\n * The throttling is intentionally global.\n *\n * This is only needed for IE. It is as a hack to make markers (and 'use' elements?)\n * visible after pan/zoom when there are multiple SVGs on the page.\n * See bug report: https://connect.microsoft.com/IE/feedback/details/781964/\n * also see svg-pan-zoom issue: https://github.com/ariutta/svg-pan-zoom/issues/62\n */\n, refreshDefsGlobal: Utils.throttle(function() {\n    var allDefs = document.querySelectorAll('defs');\n    var allDefsCount = allDefs.length;\n    for (var i = 0; i < allDefsCount; i++) {\n      var thisDefs = allDefs[i];\n      thisDefs.parentNode.insertBefore(thisDefs, thisDefs);\n    }\n  }, this.internetExplorerRedisplayInterval)\n\n  /**\n   * Sets the current transform matrix of an element\n   *\n   * @param {SVGElement} element\n   * @param {SVGMatrix} matrix  CTM\n   * @param {SVGElement} defs\n   */\n, setCTM: function(element, matrix, defs) {\n    var that = this\n      , s = 'matrix(' + matrix.a + ',' + matrix.b + ',' + matrix.c + ',' + matrix.d + ',' + matrix.e + ',' + matrix.f + ')';\n\n    element.setAttributeNS(null, 'transform', s);\n    if ('transform' in element.style) {\n      element.style.transform = s;\n    } else if ('-ms-transform' in element.style) {\n      element.style['-ms-transform'] = s;\n    } else if ('-webkit-transform' in element.style) {\n      element.style['-webkit-transform'] = s;\n    }\n\n    // IE has a bug that makes markers disappear on zoom (when the matrix \"a\" and/or \"d\" elements change)\n    // see http://stackoverflow.com/questions/17654578/svg-marker-does-not-work-in-ie9-10\n    // and http://srndolha.wordpress.com/2013/11/25/svg-line-markers-may-disappear-in-internet-explorer-11/\n    if (_browser === 'ie' && !!defs) {\n      // this refresh is intended for redisplaying the SVG during zooming\n      defs.parentNode.insertBefore(defs, defs);\n      // this refresh is intended for redisplaying the other SVGs on a page when panning a given SVG\n      // it is also needed for the given SVG itself, on zoomEnd, if the SVG contains any markers that\n      // are located under any other element(s).\n      window.setTimeout(function() {\n        that.refreshDefsGlobal();\n      }, that.internetExplorerRedisplayInterval);\n    }\n  }\n\n  /**\n   * Instantiate an SVGPoint object with given event coordinates\n   *\n   * @param {Event} evt\n   * @param  {SVGSVGElement} svg\n   * @return {SVGPoint}     point\n   */\n, getEventPoint: function(evt, svg) {\n    var point = svg.createSVGPoint()\n\n    Utils.mouseAndTouchNormalize(evt, svg)\n\n    point.x = evt.clientX\n    point.y = evt.clientY\n\n    return point\n  }\n\n  /**\n   * Get SVG center point\n   *\n   * @param  {SVGSVGElement} svg\n   * @return {SVGPoint}\n   */\n, getSvgCenterPoint: function(svg, width, height) {\n    return this.createSVGPoint(svg, width / 2, height / 2)\n  }\n\n  /**\n   * Create a SVGPoint with given x and y\n   *\n   * @param  {SVGSVGElement} svg\n   * @param  {Number} x\n   * @param  {Number} y\n   * @return {SVGPoint}\n   */\n, createSVGPoint: function(svg, x, y) {\n    var point = svg.createSVGPoint()\n    point.x = x\n    point.y = y\n\n    return point\n  }\n}\n\n},{\"./utilities\":7}],6:[function(require,module,exports){\n// uniwheel 0.1.2 (customized)\n// A unified cross browser mouse wheel event handler\n// https://github.com/teemualap/uniwheel\n\nmodule.exports = (function(){\n\n  //Full details: https://developer.mozilla.org/en-US/docs/Web/Reference/Events/wheel\n\n  var prefix = \"\", _addEventListener, _removeEventListener, onwheel, support, fns = [];\n\n  // detect event model\n  if ( window.addEventListener ) {\n    _addEventListener = \"addEventListener\";\n    _removeEventListener = \"removeEventListener\";\n  } else {\n    _addEventListener = \"attachEvent\";\n    _removeEventListener = \"detachEvent\";\n    prefix = \"on\";\n  }\n\n  // detect available wheel event\n  support = \"onwheel\" in document.createElement(\"div\") ? \"wheel\" : // Modern browsers support \"wheel\"\n            document.onmousewheel !== undefined ? \"mousewheel\" : // Webkit and IE support at least \"mousewheel\"\n            \"DOMMouseScroll\"; // let's assume that remaining browsers are older Firefox\n\n\n  function createCallback(element,callback,capture) {\n\n    var fn = function(originalEvent) {\n\n      !originalEvent && ( originalEvent = window.event );\n\n      // create a normalized event object\n      var event = {\n        // keep a ref to the original event object\n        originalEvent: originalEvent,\n        target: originalEvent.target || originalEvent.srcElement,\n        type: \"wheel\",\n        deltaMode: originalEvent.type == \"MozMousePixelScroll\" ? 0 : 1,\n        deltaX: 0,\n        delatZ: 0,\n        preventDefault: function() {\n          originalEvent.preventDefault ?\n            originalEvent.preventDefault() :\n            originalEvent.returnValue = false;\n        }\n      };\n\n      // calculate deltaY (and deltaX) according to the event\n      if ( support == \"mousewheel\" ) {\n        event.deltaY = - 1/40 * originalEvent.wheelDelta;\n        // Webkit also support wheelDeltaX\n        originalEvent.wheelDeltaX && ( event.deltaX = - 1/40 * originalEvent.wheelDeltaX );\n      } else {\n        event.deltaY = originalEvent.detail;\n      }\n\n      // it's time to fire the callback\n      return callback( event );\n\n    };\n\n    fns.push({\n      element: element,\n      fn: fn,\n      capture: capture\n    });\n\n    return fn;\n  }\n\n  function getCallback(element,capture) {\n    for (var i = 0; i < fns.length; i++) {\n      if (fns[i].element === element && fns[i].capture === capture) {\n        return fns[i].fn;\n      }\n    }\n    return function(){};\n  }\n\n  function removeCallback(element,capture) {\n    for (var i = 0; i < fns.length; i++) {\n      if (fns[i].element === element && fns[i].capture === capture) {\n        return fns.splice(i,1);\n      }\n    }\n  }\n\n  function _addWheelListener( elem, eventName, callback, useCapture ) {\n\n    var cb;\n\n    if (support === \"wheel\") {\n      cb = callback;\n    } else {\n      cb = createCallback(elem,callback,useCapture);\n    }\n\n    elem[ _addEventListener ]( prefix + eventName, cb, useCapture || false );\n\n  }\n\n  function _removeWheelListener( elem, eventName, callback, useCapture ) {\n\n    var cb;\n\n    if (support === \"wheel\") {\n      cb = callback;\n    } else {\n      cb = getCallback(elem,useCapture);\n    }\n\n    elem[ _removeEventListener ]( prefix + eventName, cb, useCapture || false );\n\n    removeCallback(elem,useCapture);\n\n  }\n\n  function addWheelListener( elem, callback, useCapture ) {\n    _addWheelListener( elem, support, callback, useCapture );\n\n    // handle MozMousePixelScroll in older Firefox\n    if( support == \"DOMMouseScroll\" ) {\n        _addWheelListener( elem, \"MozMousePixelScroll\", callback, useCapture);\n    }\n  }\n\n  function removeWheelListener(elem,callback,useCapture){\n    _removeWheelListener(elem,support,callback,useCapture);\n\n    // handle MozMousePixelScroll in older Firefox\n    if( support == \"DOMMouseScroll\" ) {\n        _removeWheelListener(elem, \"MozMousePixelScroll\", callback, useCapture);\n    }\n  }\n\n  return {\n    on: addWheelListener,\n    off: removeWheelListener\n  };\n\n})();\n\n},{}],7:[function(require,module,exports){\nmodule.exports = {\n  /**\n   * Extends an object\n   *\n   * @param  {Object} target object to extend\n   * @param  {Object} source object to take properties from\n   * @return {Object}        extended object\n   */\n  extend: function(target, source) {\n    target = target || {};\n    for (var prop in source) {\n      // Go recursively\n      if (this.isObject(source[prop])) {\n        target[prop] = this.extend(target[prop], source[prop])\n      } else {\n        target[prop] = source[prop]\n      }\n    }\n    return target;\n  }\n\n  /**\n   * Checks if an object is a DOM element\n   *\n   * @param  {Object}  o HTML element or String\n   * @return {Boolean}   returns true if object is a DOM element\n   */\n, isElement: function(o){\n    return (\n      o instanceof HTMLElement || o instanceof SVGElement || o instanceof SVGSVGElement || //DOM2\n      (o && typeof o === 'object' && o !== null && o.nodeType === 1 && typeof o.nodeName === 'string')\n    );\n  }\n\n  /**\n   * Checks if an object is an Object\n   *\n   * @param  {Object}  o Object\n   * @return {Boolean}   returns true if object is an Object\n   */\n, isObject: function(o){\n    return Object.prototype.toString.call(o) === '[object Object]';\n  }\n\n  /**\n   * Checks if variable is Number\n   *\n   * @param  {Integer|Float}  n\n   * @return {Boolean}   returns true if variable is Number\n   */\n, isNumber: function(n) {\n    return !isNaN(parseFloat(n)) && isFinite(n);\n  }\n\n  /**\n   * Search for an SVG element\n   *\n   * @param  {Object|String} elementOrSelector DOM Element or selector String\n   * @return {Object|Null}                   SVG or null\n   */\n, getSvg: function(elementOrSelector) {\n    var element\n      , svg;\n\n    if (!this.isElement(elementOrSelector)) {\n      // If selector provided\n      if (typeof elementOrSelector === 'string' || elementOrSelector instanceof String) {\n        // Try to find the element\n        element = document.querySelector(elementOrSelector)\n\n        if (!element) {\n          throw new Error('Provided selector did not find any elements. Selector: ' + elementOrSelector)\n          return null\n        }\n      } else {\n        throw new Error('Provided selector is not an HTML object nor String')\n        return null\n      }\n    } else {\n      element = elementOrSelector\n    }\n\n    if (element.tagName.toLowerCase() === 'svg') {\n      svg = element;\n    } else {\n      if (element.tagName.toLowerCase() === 'object') {\n        svg = element.contentDocument.documentElement;\n      } else {\n        if (element.tagName.toLowerCase() === 'embed') {\n          svg = element.getSVGDocument().documentElement;\n        } else {\n          if (element.tagName.toLowerCase() === 'img') {\n            throw new Error('Cannot script an SVG in an \"img\" element. Please use an \"object\" element or an in-line SVG.');\n          } else {\n            throw new Error('Cannot get SVG.');\n          }\n          return null\n        }\n      }\n    }\n\n    return svg\n  }\n\n  /**\n   * Attach a given context to a function\n   * @param  {Function} fn      Function\n   * @param  {Object}   context Context\n   * @return {Function}           Function with certain context\n   */\n, proxy: function(fn, context) {\n    return function() {\n      return fn.apply(context, arguments)\n    }\n  }\n\n  /**\n   * Returns object type\n   * Uses toString that returns [object SVGPoint]\n   * And than parses object type from string\n   *\n   * @param  {Object} o Any object\n   * @return {String}   Object type\n   */\n, getType: function(o) {\n    return Object.prototype.toString.apply(o).replace(/^\\[object\\s/, '').replace(/\\]$/, '')\n  }\n\n  /**\n   * If it is a touch event than add clientX and clientY to event object\n   *\n   * @param  {Event} evt\n   * @param  {SVGSVGElement} svg\n   */\n, mouseAndTouchNormalize: function(evt, svg) {\n    // If no cilentX and but touch objects are available\n    if (evt.clientX === void 0 || evt.clientX === null) {\n      // Fallback\n      evt.clientX = 0\n      evt.clientY = 0\n\n      // If it is a touch event\n      if (evt.changedTouches !== void 0 && evt.changedTouches.length) {\n        // If touch event has changedTouches\n        if (evt.changedTouches[0].clientX !== void 0) {\n          evt.clientX = evt.changedTouches[0].clientX\n          evt.clientY = evt.changedTouches[0].clientY\n        }\n        // If changedTouches has pageX attribute\n        else if (evt.changedTouches[0].pageX !== void 0) {\n          var rect = svg.getBoundingClientRect();\n\n          evt.clientX = evt.changedTouches[0].pageX - rect.left\n          evt.clientY = evt.changedTouches[0].pageY - rect.top\n        }\n      // If it is a custom event\n      } else if (evt.originalEvent !== void 0) {\n        if (evt.originalEvent.clientX !== void 0) {\n          evt.clientX = evt.originalEvent.clientX\n          evt.clientY = evt.originalEvent.clientY\n        }\n      }\n    }\n  }\n\n  /**\n   * Check if an event is a double click/tap\n   * TODO: For touch gestures use a library (hammer.js) that takes in account other events\n   * (touchmove and touchend). It should take in account tap duration and traveled distance\n   *\n   * @param  {Event}  evt\n   * @param  {Event}  prevEvt Previous Event\n   * @return {Boolean}\n   */\n, isDblClick: function(evt, prevEvt) {\n    // Double click detected by browser\n    if (evt.detail === 2) {\n      return true;\n    }\n    // Try to compare events\n    else if (prevEvt !== void 0 && prevEvt !== null) {\n      var timeStampDiff = evt.timeStamp - prevEvt.timeStamp // should be lower than 250 ms\n        , touchesDistance = Math.sqrt(Math.pow(evt.clientX - prevEvt.clientX, 2) + Math.pow(evt.clientY - prevEvt.clientY, 2))\n\n      return timeStampDiff < 250 && touchesDistance < 10\n    }\n\n    // Nothing found\n    return false;\n  }\n\n  /**\n   * Returns current timestamp as an integer\n   *\n   * @return {Number}\n   */\n, now: Date.now || function() {\n    return new Date().getTime();\n  }\n\n  // From underscore.\n  // Returns a function, that, when invoked, will only be triggered at most once\n  // during a given window of time. Normally, the throttled function will run\n  // as much as it can, without ever going more than once per `wait` duration;\n  // but if you'd like to disable the execution on the leading edge, pass\n  // `{leading: false}`. To disable execution on the trailing edge, ditto.\n// jscs:disable\n// jshint ignore:start\n, throttle: function(func, wait, options) {\n    var that = this;\n    var context, args, result;\n    var timeout = null;\n    var previous = 0;\n    if (!options) options = {};\n    var later = function() {\n      previous = options.leading === false ? 0 : that.now();\n      timeout = null;\n      result = func.apply(context, args);\n      if (!timeout) context = args = null;\n    };\n    return function() {\n      var now = that.now();\n      if (!previous && options.leading === false) previous = now;\n      var remaining = wait - (now - previous);\n      context = this;\n      args = arguments;\n      if (remaining <= 0 || remaining > wait) {\n        clearTimeout(timeout);\n        timeout = null;\n        previous = now;\n        result = func.apply(context, args);\n        if (!timeout) context = args = null;\n      } else if (!timeout && options.trailing !== false) {\n        timeout = setTimeout(later, remaining);\n      }\n      return result;\n    };\n  }\n// jshint ignore:end\n// jscs:enable\n\n  /**\n   * Create a requestAnimationFrame simulation\n   *\n   * @param  {Number|String} refreshRate\n   * @return {Function}\n   */\n, createRequestAnimationFrame: function(refreshRate) {\n    var timeout = null\n\n    // Convert refreshRate to timeout\n    if (refreshRate !== 'auto' && refreshRate < 60 && refreshRate > 1) {\n      timeout = Math.floor(1000 / refreshRate)\n    }\n\n    if (timeout === null) {\n      return window.requestAnimationFrame || requestTimeout(33)\n    } else {\n      return requestTimeout(timeout)\n    }\n  }\n}\n\n/**\n * Create a callback that will execute after a given timeout\n *\n * @param  {Function} timeout\n * @return {Function}\n */\nfunction requestTimeout(timeout) {\n  return function(callback) {\n    window.setTimeout(callback, timeout)\n  }\n}\n\n},{}],8:[function(require,module,exports){\n\"use strict\";\nvar nodecanvas_1 = require(\"./nodecanvas\");\nvar CodeNodes = (function () {\n    function CodeNodes(types) {\n        this.canvas = new nodecanvas_1.NodeCanvas();\n        this.types = types;\n    }\n    ;\n    CodeNodes.prototype.getSVG = function () {\n        this.canvas.render();\n        return this.canvas.svg;\n    };\n    ;\n    CodeNodes.prototype.init = function () {\n        this.canvas.init();\n    };\n    ;\n    CodeNodes.prototype.addNode = function (name, type) {\n        var t = this.types[type];\n        if (t) {\n            this.canvas.addNode(name, t.builder, t.schema, type, t.clonable || false, t.clone, 10, 10);\n        }\n        else {\n            console.log(\"There is no type \" + type + \" registered\");\n        }\n    };\n    ;\n    return CodeNodes;\n}());\nmodule.exports = {\n    Interface: CodeNodes\n};\n\n\n\n},{\"./nodecanvas\":10}],9:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar nodevalue_1 = require(\"./nodevalue\");\nvar namespace = \"http://www.w3.org/2000/svg\";\nvar ROW_HEIGHT = 38;\nvar Node = (function () {\n    function Node(title, builder, schema, type, clonable, clonefn, x, y) {\n        var self = this;\n        this.title = title;\n        this.type = type;\n        this.values = {};\n        this.clonefn = clonefn;\n        this.clonable = clonable;\n        this.builder = builder;\n        this.position = {\n            x: x,\n            y: y\n        };\n        this.schema = schema;\n        this.nRows = this.schema.length + 2;\n        this.onmousedown = null;\n        this.outputConnectors = [];\n        this.schema.forEach(function (prop) {\n            self.values[prop.name] = new nodevalue_1.NodeValue(prop.name, prop.type, prop.mode, self, prop.options);\n        });\n    }\n    ;\n    Node.prototype.render = function (parent) {\n        var self = this;\n        if (!this.g) {\n            this.g = document.createElementNS(namespace, \"g\");\n            this.g.setAttribute(\"transform\", \"translate(\" + this.position.x + \",\" + this.position.y + \")\");\n            this.g.setAttribute(\"class\", \"entity\");\n            this.rect = document.createElementNS(namespace, \"rect\");\n            this.rect.setAttribute(\"width\", \"110\");\n            this.rect.setAttribute(\"rx\", \"3\");\n            this.rect.setAttribute(\"height\", ((this.nRows * ROW_HEIGHT) + 2).toString());\n            this.rect.setAttribute(\"class\", \"draggable\");\n            this.rectDownHandler = function (evt) {\n                if (this.onmousedown instanceof Function) {\n                    this.onmousedown(evt, this);\n                }\n            }.bind(this);\n            this.rect.addEventListener(\"mousedown\", this.rectDownHandler);\n            var t = document.createElementNS(namespace, \"text\");\n            t.textContent = this.title;\n            t.classList.add(\"title\");\n            t.setAttribute(\"x\", \"5\");\n            t.setAttribute(\"y\", \"15\");\n            this.g.appendChild(this.rect);\n            this.g.appendChild(t);\n            var output = document.createElementNS(namespace, \"circle\");\n            this.output = output;\n            this.outputOffset = {\n                x: 110,\n                y: (this.nRows * ROW_HEIGHT) - 10\n            };\n            output.setAttribute(\"cx\", (this.outputOffset.x).toString());\n            output.setAttribute(\"cy\", (this.outputOffset.y).toString());\n            output.setAttribute(\"r\", \"6\");\n            output.setAttribute(\"class\", \"output\");\n            this.outputDownHandler = function (evt) {\n                if (this.outputMousedown instanceof Function) {\n                    this.outputMousedown(evt, this);\n                }\n            }.bind(this);\n            output.addEventListener(\"mousedown\", this.outputDownHandler);\n            var outputType = document.createElementNS(namespace, \"text\");\n            outputType.textContent = \"[\" + this.type + \"]\";\n            outputType.classList.add(\"output-type\");\n            outputType.setAttribute(\"x\", (100).toString());\n            outputType.setAttribute(\"y\", (this.outputOffset.y).toString());\n            this.g.appendChild(output);\n            this.g.appendChild(outputType);\n            this.closeBtn = document.createElementNS(namespace, \"circle\");\n            this.closeBtn.classList.add(\"close-btn\");\n            this.closeBtn.setAttribute(\"cx\", \"100\");\n            this.closeBtn.setAttribute(\"r\", \"6\");\n            this.closeBtn.setAttribute(\"cy\", \"15\");\n            this.close = function () {\n                this.remove();\n            }.bind(this);\n            this.closeBtn.addEventListener(\"click\", this.close);\n            this.g.appendChild(this.closeBtn);\n            parent.appendChild(this.g);\n        }\n        var i = 1;\n        Object.keys(this.values).forEach(function (k) {\n            if (self.values.hasOwnProperty(k)) {\n                var val = self.values[k];\n                val.render(self.g, i++);\n            }\n        });\n    };\n    ;\n    Node.prototype.move = function (x, y) {\n        var self = this;\n        this.position = {\n            x: x,\n            y: y\n        };\n        this.outputConnectors.forEach(function (con) {\n            con.sp = {\n                x: x + self.outputOffset.x,\n                y: y + self.outputOffset.y\n            };\n            con.setPath();\n        });\n        Object.keys(this.values).forEach(function (k) {\n            if (self.values.hasOwnProperty(k)) {\n                var val = self.values[k];\n                val.updateConectorPosition();\n            }\n        });\n        this.g.setAttribute(\"transform\", \"translate(\" + this.position.x + \",\" + this.position.y + \")\");\n    };\n    ;\n    Node.prototype.build = function () {\n        if (!this.built) {\n            var valuesArr = [], propsOnBuild = [], self = this;\n            propsOnBuild = this.schema.filter(function (p) {\n                return p.onBuild;\n            });\n            valuesArr = propsOnBuild.map(function (p) {\n                return self.values[p.name].getValue();\n            });\n            this.built = this.builder.apply(this, valuesArr);\n            return this.built;\n        }\n        else {\n            if (this.clonable) {\n                return this.clonefn(this.built);\n            }\n            else {\n                return this.built;\n            }\n        }\n    };\n    ;\n    Node.prototype.remove = function () {\n        var self = this;\n        Object.keys(this.values).forEach(function (k) {\n            if (self.values.hasOwnProperty(k)) {\n                var val = self.values[k];\n                if (val.inputConnector) {\n                    val.inputConnector.remove();\n                }\n                ;\n            }\n        });\n        [].concat(this.outputConnectors).forEach(function (con) {\n            con.remove();\n        });\n        if (this.onremove instanceof Function) {\n            this.onremove();\n        }\n        this.closeBtn.removeEventListener(\"click\", this.close);\n        this.rect.removeEventListener(\"mousedown\", this.rectDownHandler);\n        this.output.addEventListener(\"mousedown\", this.outputDownHandler);\n    };\n    ;\n    return Node;\n}());\nexports.Node = Node;\n\n\n\n},{\"./nodevalue\":12}],10:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar svgPanZoom = require(\"svg-pan-zoom\");\nvar node_1 = require(\"./node\");\nvar nodeconnector_1 = require(\"./nodeconnector\");\nvar namespace = \"http://www.w3.org/2000/svg\";\nvar NodeCanvas = (function () {\n    function NodeCanvas() {\n        this.svg = null;\n        this.g = null;\n        this.paths = null;\n        this.nodes = [];\n        this.pt = null;\n        this.draggingEntity = null;\n        this.currentConnector = null;\n        this.diff = null;\n    }\n    NodeCanvas.prototype.cursorPoint = function (evt) {\n        this.pt.x = evt.clientX;\n        this.pt.y = evt.clientY;\n        return this.pt.matrixTransform(this.svg.getScreenCTM().inverse());\n    };\n    ;\n    NodeCanvas.prototype.render = function () {\n        var self = this;\n        if (!this.svg) {\n            this.svg = document.createElementNS(namespace, \"svg\");\n            this.svg.setAttribute(\"class\", \"codenodes\");\n            this.pt = this.svg.createSVGPoint();\n            this.svg.setAttributeNS(\"http://www.w3.org/2000/xmlns/\", \"xmlns\", namespace);\n            this.svg.setAttributeNS(\"http://www.w3.org/2000/xmlns/\", \"xmlns:xlink\", \"http://www.w3.org/1999/xlink\");\n            this.svg.setAttribute(\"width\", \"100%\");\n            this.svg.setAttribute(\"height\", \"100%\");\n            this.g = document.createElementNS(namespace, \"g\");\n            this.paths = document.createElementNS(namespace, \"g\");\n            this.g.classList.add(\"svg-pan-zoom_viewport\");\n            this.g.setAttribute(\"transform\", \"matrix(1,1,1,1,0,0)\");\n            this.g.appendChild(this.paths);\n            this.svg.appendChild(this.g);\n        }\n        this.nodes.forEach(function (node) {\n            node.render(self.g);\n        });\n    };\n    ;\n    NodeCanvas.prototype.addNode = function (title, builder, schema, type, clonable, clonefn, x, y) {\n        var n = new node_1.Node(title, builder, schema, type, clonable, clonefn, x, y), self = this, ctm = null, offset = null;\n        function convertCoords(o) {\n            var x = o.x, y = o.y;\n            return {\n                x: (ctm.a * x) + (ctm.c * y) + ctm.e - offset.left,\n                y: (ctm.b * x) + (ctm.d * y) + ctm.f - offset.top\n            };\n        }\n        function mouseMoveHandler(evt) {\n            if (self.draggingEntity) {\n                var p = self.cursorPoint(evt);\n                p.x = p.x - self.diff.x;\n                p.y = p.y - self.diff.y;\n                var p1 = convertCoords(p);\n                self.draggingEntity.move(p1.x, p1.y);\n            }\n        }\n        function mouseUpHandler(evt) {\n            self.svg.removeEventListener(\"mousemove\", mouseMoveHandler);\n            self.svg.removeEventListener(\"mouseup\", mouseUpHandler);\n            mouseMoveHandler(evt);\n            self.draggingEntity = null;\n        }\n        function mouseMoveConnectorHandler(evt) {\n            var p = convertCoords(self.cursorPoint(evt));\n            self.currentConnector.moveEndPoint(p);\n        }\n        function mouseUpConnectorHandler(evt) {\n            var p = convertCoords(self.cursorPoint(evt));\n            self.svg.removeEventListener(\"mousemove\", mouseMoveConnectorHandler);\n            self.svg.removeEventListener(\"mouseup\", mouseUpConnectorHandler);\n            var dots = [].slice.call(document.querySelectorAll(\".codenodes .dot\"));\n            var candidates = dots.map(function (dot) {\n                var pos = dot.parentValue.getDotPosition();\n                var dist = Math.sqrt(Math.pow(p.x - pos.x, 2) + Math.pow(p.y - pos.y, 2));\n                return {\n                    dist: dist,\n                    dot: dot\n                };\n            }).filter(function (dot) {\n                return dot.dist <= 30;\n            }).sort(function (a, b) {\n                return a.dist - b.dist;\n            });\n            if (candidates.length > 0) {\n                if (candidates[0].dot.parentValue.inputConnector) {\n                    candidates[0].dot.parentValue.inputConnector.remove();\n                }\n                candidates[0].dot.parentValue.inputConnector = self.currentConnector;\n                self.currentConnector.end2 = candidates[0].dot.parentValue;\n                if (self.currentConnector.end2.type !== \"any\" && (self.currentConnector.end2.type !== self.currentConnector.end1.type)) {\n                    self.currentConnector.remove();\n                }\n                if (self.currentConnector.end1 === candidates[0].dot.parentValue.parentNode) {\n                    self.currentConnector.remove();\n                }\n                candidates[0].dot.parentValue.updateConectorPosition();\n            }\n            else {\n                self.currentConnector.remove();\n            }\n            self.currentConnector = null;\n        }\n        this.nodes.push(n);\n        n.outputMousedown = function (evt, entity) {\n            var p = self.cursorPoint(evt);\n            ctm = self.g.getCTM().inverse();\n            offset = self.svg.getBoundingClientRect();\n            var p1 = {\n                x: entity.position.x + parseInt(entity.output.getAttribute(\"cx\")),\n                y: entity.position.y + parseInt(entity.output.getAttribute(\"cy\"))\n            };\n            self.currentConnector = new nodeconnector_1.NodeConnector(p1, entity);\n            entity.outputConnectors.push(self.currentConnector);\n            self.paths.appendChild(self.currentConnector.path);\n            self.svg.addEventListener(\"mousemove\", mouseMoveConnectorHandler);\n            self.svg.addEventListener(\"mouseup\", mouseUpConnectorHandler);\n            evt.stopPropagation();\n        };\n        n.onmousedown = function (evt, entity) {\n            var p = self.cursorPoint(evt);\n            ctm = self.g.getCTM();\n            offset = self.svg.getBoundingClientRect();\n            var entPos = convertCoords(entity.position);\n            self.diff = {\n                x: p.x - entPos.x,\n                y: p.y - entPos.y\n            };\n            ctm = ctm.inverse();\n            evt.stopPropagation();\n            self.draggingEntity = entity;\n            if (self.draggingEntity) {\n                self.svg.addEventListener(\"mousemove\", mouseMoveHandler);\n                self.svg.addEventListener(\"mouseup\", mouseUpHandler);\n            }\n        }.bind(this);\n        n.onremove = function () {\n            n.outputMousedown = null;\n            n.onmousedown = null;\n            var ind = self.nodes.indexOf(n);\n            if (ind >= 0) {\n                self.nodes.splice(ind, 1);\n            }\n            self.g.removeChild(n.g);\n        };\n    };\n    ;\n    NodeCanvas.prototype.init = function () {\n        this.svg.setAttribute(\"viewBox\", \"0 0 \" + this.svg.clientWidth + \" \" + this.svg.clientHeight);\n        this.zoomingSvg = svgPanZoom(this.svg, {\n            zoomScaleSensitivity: 0.4,\n            dblClickZoomEnabled: false\n        });\n    };\n    ;\n    NodeCanvas.prototype.clear = function () {\n        //Alert the user about the action being irreversible\n        var nds = [].concat(this.nodes);\n        nds.forEach(function (node) {\n            node.remove();\n        });\n    };\n    ;\n    NodeCanvas.prototype.getTerminalNodes = function () {\n        return this.nodes.filter(function (n) {\n            return n.outputConnectors.length === 0;\n        });\n    };\n    ;\n    return NodeCanvas;\n}());\nexports.NodeCanvas = NodeCanvas;\n\n\n\n},{\"./node\":9,\"./nodeconnector\":11,\"svg-pan-zoom\":1}],11:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar namespace = \"http://www.w3.org/2000/svg\";\nvar NodeConnector = (function () {\n    function NodeConnector(sp, node) {\n        this.sp = sp;\n        this.ep = sp;\n        this.end1 = node;\n        this.end2 = null;\n        this.path = document.createElementNS(namespace, \"path\");\n        this.setPath();\n    }\n    ;\n    NodeConnector.prototype.setPath = function () {\n        var c1 = {\n            x: ((this.ep.x - this.sp.x) / 3) + this.sp.x,\n            y: this.sp.y\n        }, c2 = {\n            x: -((this.ep.x - this.sp.x) / 3) + this.ep.x,\n            y: this.ep.y\n        };\n        this.path.setAttribute(\"d\", \"M\" + this.sp.x + \",\" + this.sp.y + \" C\" + c1.x + \",\" + c1.y + \" \" + c2.x + \",\" + c2.y + \" \" + this.ep.x + \",\" + this.ep.y);\n    };\n    ;\n    NodeConnector.prototype.remove = function () {\n        if (this.end1) {\n            var ind = this.end1.outputConnectors.indexOf(this);\n            if (ind >= 0) {\n                this.end1.outputConnectors.splice(ind, 1);\n            }\n            this.end1 = null;\n        }\n        if (this.end2) {\n            this.end2.inputConnector = null;\n        }\n        if (this.path) {\n            this.path.parentNode.removeChild(this.path);\n            this.path = null;\n        }\n    };\n    ;\n    NodeConnector.prototype.moveEndPoint = function (point) {\n        this.ep = point;\n        this.setPath();\n    };\n    return NodeConnector;\n}());\nexports.NodeConnector = NodeConnector;\n\n\n\n},{}],12:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar namespace = \"http://www.w3.org/2000/svg\";\nvar ROW_HEIGHT = 38;\nvar NodeValue = (function () {\n    function NodeValue(name, type, mode, node, options) {\n        this.name = name;\n        this.type = type;\n        this.mode = mode;\n        this.options = options;\n        this.inputConnector = null;\n        this.__internalGetValue = null;\n        this.svgEntity = null;\n        this.gOffset = null;\n        this.parentNode = node;\n    }\n    NodeValue.prototype.render = function (parent, position) {\n        var self = this;\n        if (!this.svgEntity) {\n            var ent = document.createElementNS(namespace, \"g\");\n            this.gOffset = {\n                x: 1,\n                y: ((position * ROW_HEIGHT) + 1)\n            };\n            ent.setAttribute(\"transform\", \"translate(\" + this.gOffset.x + \", \" + this.gOffset.y + \")\");\n            ent.setAttribute(\"class\", \"row\");\n            if (this.mode === \"edit\") {\n                var rect = document.createElementNS(namespace, \"rect\"), fo = document.createElementNS(namespace, \"foreignObject\"), name_1 = document.createElementNS(namespace, \"text\"), div = document.createElementNS(\"http://www.w3.org/1999/xhtml\", \"div\");\n                name_1.textContent = this.name;\n                name_1.setAttribute(\"x\", \"10\");\n                name_1.setAttribute(\"y\", \"6\");\n                rect.setAttribute(\"x\", \"1\");\n                div.setAttribute(\"xmlns\", \"http://www.w3.org/1999/xhtml\");\n                var input_1 = document.createElement(\"input\");\n                switch (this.type) {\n                    case \"range\":\n                        this.__internalGetValue = function () {\n                            input_1.min = this.options[0];\n                            input_1.max = this.options[1];\n                            if (input_1.value <= input_1.max && input_1.value >= input_1.min) {\n                                return input_1.value;\n                            }\n                            else {\n                                // error range?\n                            }\n                        };\n                        input_1.type = this.type;\n                        div.appendChild(input_1);\n                        break;\n                    case \"text\":\n                        this.__internalGetValue = function () {\n                            return input_1.value;\n                        };\n                        input_1.type = this.type;\n                        div.appendChild(input_1);\n                        break;\n                    case \"number\":\n                        this.__internalGetValue = function () {\n                            return input_1.value;\n                        };\n                        input_1.type = this.type;\n                        div.appendChild(input_1);\n                        break;\n                    case \"email\":\n                        this.__internalGetValue = function () {\n                            return input_1.value;\n                        };\n                        input_1.type = this.type;\n                        div.appendChild(input_1);\n                        break;\n                    case \"date\":\n                        this.__internalGetValue = function () {\n                            return input_1.value;\n                        };\n                        input_1.type = this.type;\n                        div.appendChild(input_1);\n                        break;\n                    case \"color\":\n                        this.__internalGetValue = function () {\n                            console.log(input_1.value);\n                            return input_1.value;\n                        };\n                        input_1.type = this.type;\n                        div.appendChild(input_1);\n                        break;\n                    case \"select\":\n                        var div_select_1 = document.createElement(\"select\");\n                        this.options.forEach(function (op) {\n                            var div_option = document.createElement(\"option\");\n                            div_option.textContent = op.show.toString();\n                            div_option.setAttribute(\"value\", op.save);\n                            div_select_1.appendChild(div_option);\n                        });\n                        this.__internalGetValue = function () {\n                            return div_select_1.value;\n                        };\n                        div.appendChild(div_select_1);\n                        break;\n                    case \"popup\":\n                        var btn = document.createElement(\"button\");\n                        btn.classList.add(\"popup-btn\");\n                        btn.textContent = \"[Edit]\";\n                        var popup_1 = document.createElement(\"div\");\n                        popup_1.classList.add(\"codenodes-popup\");\n                        var popupLayer = document.createElement(\"div\");\n                        popupLayer.classList.add(\"layer\");\n                        var popupContent = document.createElement(\"div\");\n                        popupContent.classList.add(\"content\");\n                        var popupWraper = document.createElement(\"div\");\n                        popupWraper.classList.add(\"wraper\");\n                        var popupTextArea_1 = document.createElement(\"div\");\n                        popupTextArea_1.classList.add(\"text\");\n                        popupTextArea_1.setAttribute(\"contenteditable\", \"true\");\n                        var popupOK = document.createElement(\"div\");\n                        popupOK.classList.add(\"ok\");\n                        btn.addEventListener(\"click\", function () {\n                            popup_1.classList.add(\"visible\");\n                        });\n                        var fnClose = function () {\n                            popup_1.classList.remove(\"visible\");\n                        };\n                        popup_1.appendChild(popupLayer);\n                        popup_1.appendChild(popupWraper);\n                        popupWraper.appendChild(popupContent);\n                        popupContent.appendChild(popupTextArea_1);\n                        popupContent.appendChild(popupOK);\n                        popupOK.addEventListener(\"click\", fnClose);\n                        this.__internalGetValue = function () {\n                            return popupTextArea_1.textContent;\n                        };\n                        document.body.appendChild(popup_1);\n                        div.appendChild(btn);\n                        break;\n                }\n                fo.appendChild(div);\n                fo.setAttribute(\"transform\", \"translate(0,13)\");\n                //ent.appendChild(rect);\n                ent.appendChild(name_1);\n                ent.appendChild(fo);\n            }\n            if (this.mode === \"in\") {\n                var name_2 = document.createElementNS(namespace, \"text\"), type = document.createElementNS(namespace, \"text\"), dot = document.createElementNS(namespace, \"circle\");\n                dot.setAttribute(\"cx\", \"-1\");\n                dot.setAttribute(\"cy\", \"16\");\n                dot.setAttribute(\"r\", \"4\");\n                dot.setAttribute(\"class\", \"dot\");\n                dot.addEventListener(\"click\", function (evt) {\n                    if (self.inputConnector) {\n                        self.inputConnector.remove();\n                    }\n                    evt.stopPropagation();\n                });\n                dot[\"parentValue\"] = this;\n                name_2.textContent = this.name;\n                name_2.setAttribute(\"x\", \"10\");\n                name_2.setAttribute(\"y\", \"8\");\n                type.textContent = \"[\" + this.type + \"]\";\n                type.classList.add(\"value-type\");\n                type.setAttribute(\"x\", \"10\");\n                type.setAttribute(\"y\", \"25\");\n                this.__internalGetValue = function () {\n                    if (this.inputConnector) {\n                        return this.inputConnector.end1.build();\n                    }\n                    return undefined;\n                };\n                ent.appendChild(name_2);\n                ent.appendChild(type);\n                ent.appendChild(dot);\n            }\n            this.svgEntity = ent;\n            parent.appendChild(ent);\n        }\n    };\n    ;\n    NodeValue.prototype.getDotPosition = function () {\n        return {\n            x: this.parentNode.position.x + this.gOffset.x - 1,\n            y: this.parentNode.position.y + this.gOffset.y + 16\n        };\n    };\n    ;\n    NodeValue.prototype.updateConectorPosition = function () {\n        if (this.inputConnector) {\n            this.inputConnector.ep = this.getDotPosition();\n            this.inputConnector.setPath();\n        }\n    };\n    NodeValue.prototype.getValue = function () {\n        if (this.__internalGetValue instanceof Function) {\n            return this.__internalGetValue();\n        }\n        return null;\n    };\n    return NodeValue;\n}());\nexports.NodeValue = NodeValue;\n\n\n\n},{}]},{},[8])(8)\n});"]}